(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],Array(32).concat([function(e,t,n){e.exports=n.p+"static/media/dice-six-faces-six.e202d07a.svg"},,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/emerald.df0125b6.svg"},,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/sword-brandish.a3fe9ae2.svg"},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/shard-sword.23a923d5.svg"},function(e,t,n){e.exports=n.p+"static/media/spiral-thrust.4b9960c0.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/healing1.e72c5d2c.png"},function(e,t,n){e.exports=n.p+"static/media/fireball.267cc34c.png"},function(e,t,n){e.exports=n.p+"static/media/thunderbolt.bb5d2de7.png"},function(e,t,n){e.exports=n.p+"static/media/dark-blast.155cdf6e.png"},function(e,t,n){e.exports=n.p+"static/media/crippling-blow.f9be9048.png"},function(e,t,n){e.exports=n.p+"static/media/wrath.b68f4b08.png"},function(e,t,n){e.exports=n.p+"static/media/charge.11d38245.png"},function(e,t,n){e.exports=n.p+"static/media/headshot.6549c4b8.png"},function(e,t,n){e.exports=n.p+"static/media/shadow-strike.b9675e5b.png"},function(e,t,n){e.exports=n.p+"static/media/vanish.670b9e64.png"},function(e,t,n){e.exports=n.p+"static/media/inspect.af959ce1.png"},function(e,t,n){e.exports=n.p+"static/media/weapon-attack.1f0b2b4e.png"},function(e,t,n){e.exports=n.p+"static/media/aura.72475924.svg"},function(e,t,n){e.exports=n.p+"static/media/barbute.e93dc754.svg"},function(e,t,n){e.exports=n.p+"static/media/muscular-torso.92dbbc2a.svg"},function(e,t,n){e.exports=n.p+"static/media/hand.9a950e42.svg"},function(e,t,n){e.exports=n.p+"static/media/ring.5187be72.svg"},function(e,t,n){e.exports=n.p+"static/media/footprint.88018ef0.svg"},function(e,t,n){e.exports=n.p+"static/media/quick-slash.1d87b52f.svg"},function(e,t,n){e.exports=n.p+"static/media/barbed-arrow.c6c3f6ae.svg"},function(e,t,n){e.exports=n.p+"static/media/flame.332be8c2.svg"},function(e,t,n){e.exports=n.p+"static/media/bleeding-eye.12de19c6.svg"},function(e,t,n){e.exports=n.p+"static/media/moebius-trefoil.d014b37d.svg"},function(e,t,n){e.exports=n.p+"static/media/triorb.b6fc9ecd.svg"},function(e,t,n){e.exports=n.p+"static/media/fist.d1b25a44.svg"},function(e,t,n){e.exports=n.p+"static/media/fire-axe.3106dbae.svg"},function(e,t,n){e.exports=n.p+"static/media/war-axe.e2df8956.svg"},function(e,t,n){e.exports=n.p+"static/media/stiletto.ad33f46f.svg"},function(e,t,n){e.exports=n.p+"static/media/croc-sword.dfa5ecf6.svg"},function(e,t,n){e.exports=n.p+"static/media/flail.1f360b03.svg"},function(e,t,n){e.exports=n.p+"static/media/crossed-swords.b7d2c27a.svg"},function(e,t,n){e.exports=n.p+"static/media/katana.8ca51fab.svg"},function(e,t,n){e.exports=n.p+"static/media/sword-hilt.409c650d.svg"},function(e,t,n){e.exports=n.p+"static/media/orb-wand.2f0c673e.svg"},function(e,t,n){e.exports=n.p+"static/media/wizard-staff.3e6091b9.svg"},function(e,t,n){e.exports=n.p+"static/media/luger.ec54b497.svg"},function(e,t,n){e.exports=n.p+"static/media/crossbow.6d23d544.svg"},function(e,t,n){e.exports=n.p+"static/media/bloody-sword.59d8ca0f.svg"},function(e,t,n){e.exports=n.p+"static/media/winged-sword.c22831aa.svg"},function(e,t,n){e.exports=n.p+"static/media/closed-barbute.59102a4b.svg"},function(e,t,n){e.exports=n.p+"static/media/hood.7b3df127.svg"},function(e,t,n){e.exports=n.p+"static/media/shoulder-armor.caa17ee9.svg"},function(e,t,n){e.exports=n.p+"static/media/robe.5b61ecba.svg"},function(e,t,n){e.exports=n.p+"static/media/gloves.03da1411.svg"},function(e,t,n){e.exports=n.p+"static/media/power-ring.ed9dcd22.svg"},function(e,t,n){e.exports=n.p+"static/media/boots.b6910f10.svg"},,function(e,t,n){e.exports=n.p+"static/media/magnifying-glass.ec7b5987.svg"},function(e,t,n){e.exports=n.p+"static/media/tombstone.31b6aa47.svg"},function(e,t,n){e.exports=n.p+"static/media/pencil.ac0b4bc7.svg"},function(e,t,n){e.exports=n.p+"static/media/save.ec2d8043.svg"},function(e,t,n){e.exports=n.p+"static/media/trash-can.3332c6a4.svg"},function(e,t,n){e.exports=n.p+"static/media/roll.300ea409.png"},function(e,t,n){e.exports=n.p+"static/media/forest-931706_1920.f9c3ec0d.jpg"},function(e,t,n){e.exports=n.p+"static/media/swordman.c84cfcb8.svg"},function(e,t,n){e.exports=n.p+"static/media/swap-bag.df43fabd.svg"},function(e,t,n){e.exports=n.p+"static/media/skills.60519e24.svg"},function(e,t,n){e.exports=n.p+"static/media/crystal-shrine.d915d792.svg"},function(e,t,n){e.exports=n.p+"static/media/two-shadows.3e048aca.svg"},function(e,t,n){e.exports=n.p+"static/media/23761.e6671090.jpg"},,,,,function(e,t,n){e.exports=n(304)},,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),o=n.n(i),c=n(30),l=n.n(c),s=n(7),d=n(4),u=n(3),f=n(1),m=n(2),g=function(e){return Object.keys(e||{})},h=n(123),p=function(e,t){return 0===e?"":t},b=function(e){return p(e,e>0?"+":"-")},y=n(305),v=function(e){return e>0?e:0},E={3:.46,4:1.85,5:4.62,6:9.25,7:16.2,8:25.92,9:37.5,10:50,11:62.5,12:74.07,13:83.79,14:90.74,15:95.37,16:98.14,17:99.53},w=function(e){return e.split("+").map((function(e){var t=e.split("d"),n=Object(d.a)(t,2),a=n[0],r=n[1];return{n:parseInt(a,10),d:parseInt(r,10)}}))},x=function(e){return 0===e?"":"".concat(b(e)).concat(Math.abs(e))},O=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=W(e.string)||"1d1-1",a=new h.DiceRoll("".concat(n).concat(x(e.modifier)));return{id:Object(y.a)(),total:t?a.total:v(a.total),output:a.output,criticalSuccess:a.total===a.minTotal,criticalFailure:a.total===a.maxTotal,minTotal:t?a.minTotal:v(a.minTotal),maxTotal:t?a.maxTotal:v(a.maxTotal),averageTotal:t?a.averageTotal:v(a.averageTotal)}},k=function(e,t){return O({string:e,modifier:t||0}).total},j=function(e){var t,n=e.value,a=e.roll;return"3d6"===a.string&&0===a.modifier?(t=n)<3?.46:t>17?99.53:E[t]:""===a.string&&a.modifier<=n?100:0},C=function(e,t){var n=e.value,a=e.roll,r=O(a,t);return Object(f.a)({},r,{result:r.total<=n,chance:j(e),goal:n})},S={string:"",modifier:0},R="3d6",T=0,I={value:0,roll:S},q=function(e,t,n){return{keys:e,string:t||S.string,modifier:n||S.modifier}},M=function(e,t,n,a){return{keys:e,value:a||I.value,roll:{string:void 0===t?R:t,modifier:n||T}}},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(e,void 0,void 0,t)},W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter((function(e){return""!==e})).map((function(e){return w(e)})).reduce((function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t))}),[]),r={};return a.forEach((function(e){r[e.d]=(r[e.d]||0)+e.n})),g(r).map((function(e,t){return"".concat(r[parseInt(e,10)],"d").concat(e)})).reduce((function(e,t,n){return"".concat(e).concat(n>0?"+":"").concat(t)}),"")},z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return{string:W(e.string,t.string),modifier:e.modifier+t.modifier}}),S)},B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object(f.a)({},z(e,t),{keys:[].concat(Object(m.a)(e.keys),Object(m.a)(t.keys))})}),q([]))},D=function(e,t){var n=ue(t)(e.keys||[]);return{string:e.string,modifier:e.modifier+n}},A=function(e,t){var n=ue(t)(e.keys);return{value:e.value+n,roll:e.roll}},G=function(e,t,n){return O(D(e,t),n)},H=function(e,t,n){return C(A(e,t),n)},L=function(e){var t=O(e,!1);return t.minTotal===t.maxTotal?"".concat(t.maxTotal):"".concat(t.minTotal,"-").concat(t.maxTotal)},$=function(e){e.keys.length;var t=0!==e.modifier,n=e.keys.reduce((function(t,n,a){var r=0!==a||e.string?"+":"";return"".concat(t).concat(r).concat(me[n])}),""),a=t?"".concat(e.string||n?b(e.modifier):"").concat(Math.abs(e.modifier)):"";return"".concat(e.string).concat(n).concat(a)},U={slashing:"grey",piercing:"grey",fire:"orange",blood:"#cd7474",light:"lemonchiffon",dark:"mediumpurple"},F=function(e){return g(e)},K=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,r=0,i=g(t).filter((function(e){return t[e]})),o={slashing:void 0,piercing:void 0,fire:void 0,blood:void 0,light:void 0,dark:void 0};return i.forEach((function(i){var c=t[i],l=e(c,!0,!1,a);n&&(l=Object(f.a)({},l,{total:l.maxTotal||l.total})),r+=l.total,o=Object(f.a)({},o,Object(u.a)({},i,l))})),{total:r,rollResults:o}}},N={slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n={};return g(e).forEach((function(a){n[a]=t[a]?B(e[a],t[a]):e[a]})),n}),N)},V=function(e,t,n){return e.reduce(t,n)},Y={onHit:"on hit",onCrit:"on crit"},X=function(e){return e||[]},J=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return V(t,(function(e,t){var n={};return g(e).forEach((function(a){n[a]=[].concat(Object(m.a)(X(e[a])),Object(m.a)(X(t[a])))})),n}),{onHit:[],onCrit:[]})},Q={id:"",accuracyOffset:0,damageRolls:N,events:{},traits:[]},Z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return{id:t.id,accuracyOffset:e.accuracyOffset+t.accuracyOffset,damageRolls:_(e.damageRolls,t.damageRolls),events:J(e.events,t.events),traits:[].concat(Object(m.a)(e.traits),Object(m.a)(t.traits))}}),Q)},ee=function(e){if(e.processed)throw new Error("No Processed Weapons Allowed");var t=e.slots,n=V(t,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]),a=Z.apply(void 0,Object(m.a)(n));return Object(f.a)({},e,{processed:!0,accuracyCheck:Object(f.a)({},e.accuracyCheck,{value:e.accuracyCheck.value+a.accuracyOffset}),damageRolls:_(e.damageRolls,a.damageRolls),traits:[].concat(Object(m.a)(e.traits),Object(m.a)(a.traits)),events:J(e.events,a.events)})},te=function(e,t){return M(e,"",t,void 0)},ne=function(e){var t=Object(y.a)();return{id:t,type:e,rarity:"common",equippable:!0,name:"",cost:0,resource:"weaponHands",requirementCheck:te(["intelligence"],1),traits:[{id:"".concat(t,"-0"),name:"Bonus",duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0},statsModifiers:{health:0,focus:0,will:0,perception:0,agility:0,accuracy:0,evade:0}}],damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])}}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{id:Object(y.a)(),name:e,duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0},statsModifiers:{health:0,focus:0,will:0,perception:0,agility:0,accuracy:0,evade:0}}},re=Object(f.a)({},ne("weapon"),{id:Object(y.a)(),equippable:!0,type:"weapon",weaponType:"fists",name:"Unarmed",cost:0,resource:"weaponHands",requirementCheck:te(["strength"],1),damageRolls:{piercing:q([],"1d6",-3)},accuracyCheck:M(["dexterity"]),traits:[],events:{},slotCount:0,slots:[]}),ie=function(e){var t=V(e.armor,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]),n=V(e.equippedItems,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]);return[].concat(Object(m.a)(e.traits),Object(m.a)(ee(e.weapon||re).traits),Object(m.a)(n),Object(m.a)(t))},oe=function(e){return ie(e).map((function(e){return e.abilitiesModifiers})).reduce((function(e,t){return{strength:e.strength+t.strength,dexterity:e.dexterity+t.dexterity,intelligence:e.intelligence+t.intelligence,vigor:e.vigor+t.vigor}}),e.abilities)},ce=function(e){var t=oe(e);return ie(e).map((function(e){return e.statsModifiers})).reduce((function(e,t){return{health:e.health+t.health,focus:e.focus+t.focus,will:e.will+t.will,perception:e.perception+t.perception,agility:e.agility+t.agility,accuracy:e.accuracy+t.accuracy,evade:e.evade+t.evade}}),{health:2*t.strength+t.vigor,focus:t.intelligence+t.vigor,will:t.intelligence,perception:t.intelligence,agility:(t.vigor+t.dexterity)/4,accuracy:t.dexterity-2,evade:t.dexterity-8})},le=function(e){var t=e.armor,n=F(e.damageResistances);return V(n,(function(e,n){return Object(f.a)({},e,Object(u.a)({},n,B.apply(void 0,[e[n]].concat(Object(m.a)(t.map((function(e){return e.damageResistances[n]})))))))}),e.damageResistances)},se=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.processed)return e;e=t?e:Object(f.a)({},e,{weapon:void 0});var n=oe(e),a=ce(e),r=ie(e),i=le(e),o=v(r.reduce((function(e,t){return e-t.healthOffset}),e.healthOffset));return Object(f.a)({},e,{healthOffset:o,weapon:ee(e.weapon||re),abilities:n,stats:a,traits:r,damageResistances:i,processed:!0,dead:o>=a.health})},de=function(e){return function(t){return Object(f.a)({},e,{healthOffset:v(e.healthOffset-t.healthOffset),focusOffset:v(e.focusOffset-t.focusOffset)})}},ue=function(e){return function(t){return t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,a=e.abilities[n],r=e.stats[n];return a&&(t+=a),r&&(t+=r),t}),0)}},fe=function(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.resources.characterPoints;return je(Object(f.a)({},e,{power:e.power+(e.resources.characterPoints-a),resources:Object(f.a)({},e.resources,{characterPoints:a}),abilities:Object(f.a)({},e.abilities,Object(u.a)({},t,n))}))}},me={strength:"STR",dexterity:"DEX",intelligence:"INT",vigor:"VIG",health:"HLT",focus:"FOC",will:"WIL",perception:"PER",agility:"AGL",accuracy:"ACC",evade:"EVD"},ge={strength:10,dexterity:20,intelligence:20,vigor:10},he=(Object(f.a)({},ge,{health:5,focus:5,will:10,perception:10,agility:10,accuracy:10,evade:10}),function(e){return function(t,n){if(!t)return!1;if(!t.equippable)return!1;var a=t,r=se(e,n);return!!H(a.requirementCheck,r).result&&(("weapon"!==a.type||!e.weapon)&&!(r.resources[a.resource]<a.cost))}}),pe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var a,r=[],i=Object(f.a)({},e);(null===(a=e.weapon)||void 0===a?void 0:a.id)===n&&(r=[Object(f.a)({},e.weapon)],i=xe(i));var o=e.armor.find((function(e){return e.id===n}));o&&(r=[Object(f.a)({},o)],i=Ee(e)(o));var c=e.equippedItems.find((function(e){return e.id===n}));if(c&&(r=[Object(f.a)({},c)],i=ye(e)(c)),t){var l=je(i);i=l[0],r=[].concat(Object(m.a)(r),Object(m.a)(l[1]))}return[r,i]}},be=function(e){return function(t){var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n-t.cost)),equippedItems:[].concat(Object(m.a)(e.equippedItems),[t])})}},ye=function(e){return function(t){if(!t)return e;var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n+t.cost)),equippedItems:e.equippedItems.filter((function(e){return e.id!==t.id}))})}},ve=function(e){return function(t){var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n-t.cost)),armor:[].concat(Object(m.a)(e.armor),[t])})}},Ee=function(e){return function(t){if(!t)return e;var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n+t.cost)),armor:e.armor.filter((function(e){return e.id!==t.id}))})}},we=function(e){return function(t){var n;if("weapon"!==t.type)return e;var a=e.weapon;return(null===(n=a)||void 0===n?void 0:n.id)===re.id&&(a=void 0),Object(f.a)({},e,{resources:Object(f.a)({},e.resources,{weaponHands:e.resources.weaponHands-t.cost+(a?a.cost:0)}),weapon:t})}},xe=function(e){return e.weapon?Object(f.a)({},e,{resources:Object(f.a)({},e.resources,{weaponHands:e.resources.weaponHands+e.weapon.cost}),weapon:void 0}):e},Oe=function(e,t){var n=e.abilitiesModifiers[t],a=e.statsModifiers[t];return void 0!==n?n:a},ke=function(e){var t=Object(y.a)(),n="combine"+t;return(e||[]).reduce((function(e,a){var r=e.abilitiesModifiers,i=a.abilitiesModifiers,o=e.statsModifiers,c=a.statsModifiers;return{id:t,name:n,duration:a.duration,healthOffset:e.healthOffset+a.healthOffset,focusOffset:e.focusOffset+a.focusOffset,abilitiesModifiers:{strength:r.strength+i.strength,dexterity:r.dexterity+i.dexterity,intelligence:r.intelligence+i.intelligence,vigor:r.vigor+i.vigor},statsModifiers:{health:o.health+c.health,focus:o.focus+c.focus,will:o.will+c.will,perception:o.perception+c.perception,agility:o.agility+c.agility,accuracy:o.accuracy+c.accuracy,evade:o.evade+c.evade}}}),ae())},je=function e(t){var n,a,r=se(t),i=Object(f.a)({},t),o=[],c=function(e){i=Object(f.a)({},e),r=se(e)};if(!H(r.weapon.requirementCheck,r).result){var l=pe(i,!1)(r.weapon.id);c(l[1]),l[0]&&(o=[].concat(Object(m.a)(o),Object(m.a)(l[0])))}if(r.armor.forEach((function(e){if(!H(e.requirementCheck,r).result){var t=pe(i,!1)(e.id);c(t[1]),t[0]&&(o=[].concat(Object(m.a)(o),Object(m.a)(t[0])))}})),r.equippedItems.forEach((function(e){if(!H(e.requirementCheck,r).result&&!H(e.requirementCheck,r).result){var t=pe(i,!1)(e.id);c(t[1]),t[0]&&(o=[].concat(Object(m.a)(o),Object(m.a)(t[0])))}})),(null===(n=i.weapon)||void 0===n?void 0:n.id)!==(null===(a=t.weapon)||void 0===a?void 0:a.id)||i.armor.length!==t.armor.length||i.equippedItems.length!==i.equippedItems.length){var s=e(i),u=Object(d.a)(s,2),g=u[0],h=u[1];o=[].concat(Object(m.a)(o),Object(m.a)(h)),c(g)}return[i,o]},Ce={name:"-- init --",id:Object(y.a)(),power:0,resources:{characterPoints:0,weaponHands:0,heads:0,bodies:0,hands:0,fingers:0,feet:0},abilities:{strength:0,dexterity:0,intelligence:0,vigor:0},damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},traits:[],skills:[],equippedItems:[],armor:[],healthOffset:0,focusOffset:0,dead:!1,inspected:!1},Se=function(e){return Object(f.a)({},e,{characters:e.characters.map((function(t){return Object(f.a)({},se(t),{partyId:e.id})})),processed:!0})},Re=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0,r=e[a.type];return r?r(n,a):n}},Te=n(22),Ie=n(23),qe=function(e,t){return[].concat(Object(m.a)(e.filter((function(e){return e.id!==t.id}))),[t])},Me=function(e,t,n){return e.map((function(e){return e.id===t?n(e):e}))},Pe=function(e){return e[Math.floor(Math.random()*e.length)]},We=["Helmet of Doom","Helmet of Dawn"],ze=["Hood of the Night"],Be=["Armor of the King"],De=["Robe of the Necromancer"],Ae=["Gloves of the Great War"],Ge=["Ring of Green","Silver Serpant Ring"],He=["Boots of the Gods"],Le=function(e){for(var t=Object(m.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t},$e={3:"set",4:"unique",5:"legendary",6:"rare",7:"uncommon",8:"common",9:"common",10:"common",11:"common",12:"common",13:"uncommon",14:"uncommon",15:"rare",16:"legendary",17:"unique",18:"mythic"},Ue=function(e,t,n){var a=n-13,r=t+(a=a>0?a:0);r=r>0?r:0;for(var i={},o=0;o<r;++o){var c=Pe(Le(e));i[c]=(i[c]||0)+1}return i},Fe={helmet:["strength","dexterity"],cowl:["dexterity","intelligence"],chestplate:["strength","vigor"],robe:["dexterity","intelligence"],gloves:["strength","dexterity","intelligence"],ring:["strength","dexterity","intelligence"],boots:["strength","dexterity","intelligence"]},Ke={helmet:1,cowl:1,chestplate:1,robe:1,gloves:2,ring:1,boots:2},Ne={helmet:"heads",cowl:"heads",chestplate:"bodies",robe:"bodies",gloves:"hands",ring:"fingers",boots:"feet"},_e={helmet:["strength","intelligence","vigor","accuracy"],cowl:["dexterity","intelligence","agility","evade"],chestplate:["strength","intelligence","vigor"],robe:["dexterity","intelligence","agility","evade"],gloves:["strength","dexterity","intelligence","vigor","health","focus","agility","accuracy"],ring:["strength","dexterity","intelligence","vigor","health","focus","will","perception","agility","accuracy","evade"],boots:["strength","dexterity","intelligence","vigor","health","focus","agility","evade"]},Ve={common:_e,uncommon:_e,rare:_e,legendary:_e,unique:_e,mythic:_e,set:_e},Ye={common:0,uncommon:1,rare:2,legendary:3,unique:4,mythic:5,set:5},Xe=function(e){return q([],"",k(e))},Je=function(e){return q([],e)},Qe=[],Ze=[],et=[],tt=function(e,t){t=t||$e[k("3d6")];var n=te([Pe(Fe[e])],10),a=Qe.find((function(t){return t.armorType===e||t.requirementCheck===n})),r=Ze.find((function(t){return t.armorType===e||t.requirementCheck===n})),i=et.find((function(t){return t.armorType===e||t.requirementCheck===n}));return"unique"===t&&a?a:"mythic"===t&&r?r:"set"===t&&i?i:nt(e,{common:{helmet:"Common Helmet",cowl:"Common Hood",chestplate:"Common Chestplate",robe:"Common Robe",gloves:"Common Gloves",ring:"Common Ring",boots:"Common Boots"},uncommon:{helmet:"Uncommon Helmet",cowl:"Uncommon Hood",chestplate:"Uncommon Chestplate",robe:"Uncommon Robe",gloves:"Uncommon Gloves",ring:"Uncommon Ring",boots:"Uncommon Boots"},rare:{helmet:"Rare Helmet",cowl:"Rare Hood",chestplate:"Rare Chestplate",robe:"Rare Robe",gloves:"Rare Gloves",ring:"Rare Ring",boots:"Rare Boots"},legendary:{helmet:"Epic Helmet",cowl:"Epic Hood",chestplate:"Epic Chestplate",robe:"Epic Robe",gloves:"Epic Gloves",ring:"Epic Ring",boots:"Epic Boots"},unique:{helmet:Pe(We),cowl:Pe(ze),chestplate:Pe(Be),robe:Pe(De),gloves:Pe(Ae),ring:Pe(Ge),boots:Pe(He)},mythic:{helmet:"Mythic Helmet",cowl:"Mythic Hood",chestplate:"Mythic Chestplate",robe:"Mythic Robe",gloves:"Mythic Gloves",ring:"Mythic Ring",boots:"Mythic Boots"},set:{helmet:"Set Helmet",cowl:"Set Hood",chestplate:"Set Chestplate",robe:"Set Robe",gloves:"Set Gloves",ring:"Set Ring",boots:"Set Boots"}}[t][e],Ke[e],Ne[e],n,function(e,t,n){var a=Le(Ve[t][e]);return Ue(a,Ye[t],n)}(e,t,n.value),{common:{helmet:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1")},cowl:{blood:Xe("1d2-1"),light:Xe("1d2-1"),dark:Xe("1d2-1")},chestplate:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1"),fire:Xe("1d2-1")},robe:{fire:Xe("1d2-1"),blood:Xe("1d2-1"),light:Xe("1d2-1"),dark:Xe("1d2-1")},gloves:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1")},ring:{blood:Xe("1d2-1"),light:Xe("1d2-1"),dark:Xe("1d2-1")},boots:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1")}},uncommon:{helmet:{slashing:Xe("1d3-1"),piercing:Xe("1d3-1")},cowl:{blood:Xe("1d3-1"),light:Xe("1d3-1"),dark:Xe("1d3-1")},chestplate:{slashing:Xe("1d3-1"),piercing:Xe("1d3-1"),fire:Xe("1d3-1")},robe:{fire:Xe("1d3-1"),blood:Xe("1d3-1"),light:Xe("1d3-1"),dark:Xe("1d3-1")},gloves:{slashing:Xe("1d3-1"),piercing:Xe("1d3-1")},ring:{blood:Xe("1d3-1"),light:Xe("1d3-1"),dark:Xe("1d3-1")},boots:{slashing:Xe("1d3-1"),piercing:Xe("1d3-1")}},rare:{helmet:{slashing:Xe("1d4-1"),piercing:Xe("1d4-1")},cowl:{blood:Xe("1d4-1"),light:Xe("1d4-1"),dark:Xe("1d4-1")},chestplate:{slashing:Xe("1d4-1"),piercing:Xe("1d4-1"),fire:Xe("1d4-1")},robe:{fire:Xe("1d4-1"),blood:Xe("1d4-1"),light:Xe("1d4-1"),dark:Xe("1d4-1")},gloves:{slashing:Xe("1d4-1"),piercing:Xe("1d4-1")},ring:{blood:Xe("1d4-1"),light:Xe("1d4-1"),dark:Xe("1d4-1")},boots:{slashing:Xe("1d4-1"),piercing:Xe("1d4-1")}},legendary:{helmet:{slashing:Xe("1d5-1"),piercing:Xe("1d5-1")},cowl:{blood:Xe("1d5-1"),light:Xe("1d5-1"),dark:Xe("1d5-1")},chestplate:{slashing:Xe("1d5-1"),piercing:Xe("1d5-1"),fire:Xe("1d5-1")},robe:{fire:Xe("1d5-1"),blood:Xe("1d5-1"),light:Xe("1d5-1"),dark:Xe("1d5-1")},gloves:{slashing:Xe("1d5-1"),piercing:Xe("1d5-1")},ring:{fire:Xe("1d5-1"),blood:Xe("1d5-1"),light:Xe("1d5-1"),dark:Xe("1d5-1")},boots:{slashing:Xe("1d5-1"),piercing:Xe("1d5-1")}},unique:{helmet:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},cowl:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},chestplate:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},robe:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},gloves:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},ring:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},boots:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")}},mythic:{helmet:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},cowl:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},chestplate:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},robe:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},gloves:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},ring:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},boots:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")}},set:{helmet:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},cowl:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},chestplate:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},robe:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},gloves:{slashing:Xe("1d2-1"),piercing:Xe("1d2-1"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},ring:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")},boots:{slashing:Je("1d6"),piercing:Je("1d6"),fire:Je("1d6"),blood:Je("1d6"),light:Je("1d6"),dark:Je("1d6")}}}[t][e],t)},nt=function(e,t,n,a,r,i,o,c){var l=ne("armor");return Object(f.a)({},l,{type:"armor",armorType:e,name:t,cost:n,resource:a,requirementCheck:r,rarity:c,damageResistances:Object(f.a)({},l.damageResistances,{},o),traits:[{id:"".concat(l.id,"--bonus"),name:"Armor Trait",duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:i.strength||0,dexterity:i.dexterity||0,intelligence:i.intelligence||0,vigor:i.vigor||0},statsModifiers:{health:i.health||0,focus:i.focus||0,will:i.will||0,perception:i.perception||0,agility:i.agility||0,accuracy:i.accuracy||0,evade:i.evade||0}}]})},at={fists:["strength"],axe:["strength"],greataxe:["strength"],flail:["strength"],daggers:["dexterity"],katana:["dexterity"],rapier:["dexterity"],wand:["intelligence"],staff:["intelligence"],elementalSword:["strength","intelligence"],elementalGreatsword:["strength","intelligence"],sword:["strength","dexterity"],greatsword:["strength","dexterity"],pistol:["dexterity","intelligence"],crossbow:["dexterity","intelligence"]},rt={fists:1,axe:1,greataxe:2,flail:1,daggers:2,katana:1,rapier:1,wand:1,staff:2,elementalSword:1,elementalGreatsword:2,sword:1,greatsword:2,pistol:1,crossbow:2},it={fists:["strength","vigor"],axe:["strength","vigor","health","agility"],greataxe:["strength","vigor","health","agility"],flail:["strength","vigor","health","agility"],daggers:["dexterity","vigor","health","agility"],katana:["dexterity","vigor","health","agility"],rapier:["dexterity","vigor","health","agility"],wand:["intelligence","vigor","agility"],staff:["intelligence","vigor","perception","will"],elementalSword:["intelligence","vigor","strength","will"],elementalGreatsword:["intelligence","vigor","strength","will"],sword:["strength","intelligence","health","agility"],greatsword:["strength","intelligence","health","vigor"],pistol:["dexterity","intelligence","perception","vigor"],crossbow:["dexterity","intelligence","perception","vigor"]},ot={common:it,uncommon:it,rare:it,legendary:it,unique:it,mythic:it,set:it},ct={common:1,uncommon:2,rare:3,legendary:4,unique:5,mythic:6,set:6},lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return q(n,e,k(t)*a+r)},st=function(e,t){"set"===(t=t||$e[k("3d6")])&&(t="mythic");var n=te([Pe(at[e])],10);return dt(e,{common:{fists:"Unarmed",axe:"Common Axe",greataxe:"Common Greataxe",flail:"Common Flail",daggers:"Common Daggers",katana:"Common Katana",rapier:"Common Rapier",wand:"Common Wand",staff:"Common Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Common Sword",greatsword:"Common Greatsword",pistol:"Common Pistol",crossbow:"Common Crossbow"},uncommon:{fists:"Unarmed",axe:"Uncommon Axe",greataxe:"Uncommon Greataxe",flail:"Uncommon Flail",daggers:"Uncommon Daggers",katana:"Uncommon Katana",rapier:"Uncommon Rapier",wand:"Uncommon Wand",staff:"Uncommon Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Uncommon Sword",greatsword:"Uncommon Greatsword",pistol:"Uncommon Pistol",crossbow:"Uncommon Crossbow"},rare:{fists:"Unarmed",axe:"Rare Axe",greataxe:"Rare Greataxe",flail:"Rare Flail",daggers:"Rare Daggers",katana:"Rare Katana",rapier:"Rare Rapier",wand:"Rare Wand",staff:"Rare Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Rare Sword",greatsword:"Rare Greatsword",pistol:"Rare Pistol",crossbow:"Rare Crossbow"},legendary:{fists:"Unarmed",axe:"Epic Axe",greataxe:"Epic Greataxe",flail:"Epic Flail",daggers:"Epic Daggers",katana:"Epic Katana",rapier:"Epic Rapier",wand:"Epic Wand",staff:"Epic Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Epic Sword",greatsword:"Epic Greatsword",pistol:"Epic Pistol",crossbow:"Epic Crossbow"},unique:{fists:"Unarmed",axe:"Unique Axe",greataxe:"Unique Greataxe",flail:"Unique Flail",daggers:"Unique Daggers",katana:"Unique Katana",rapier:"Unique Rapier",wand:"Unique Wand",staff:"Unique Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Unique Sword",greatsword:"Unique Greatsword",pistol:"Unique Pistol",crossbow:"Unique Crossbow"},mythic:{fists:"Unarmed",axe:"Mythic Axe",greataxe:"Mythic Greataxe",flail:"Mythic Flail",daggers:"Mythic Daggers",katana:"Mythic Katana",rapier:"Mythic Rapier",wand:"Mythic Wand",staff:"Mythic Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Mythic Sword",greatsword:"Mythic Greatsword",pistol:"Mythic Pistol",crossbow:"Mythic Crossbow"},set:{fists:"Unarmed",axe:"Set Axe",greataxe:"Set Greataxe",flail:"Set Flail",daggers:"Set Daggers",katana:"Set Katana",rapier:"Set Rapier",wand:"Set Wand",staff:"Set Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Set Sword",greatsword:"Set Greatsword",pistol:"Set Pistol",crossbow:"Set Crossbow"}}[t][e],rt[e],n,0,function(e,t,n){var a=Le(ot[t][e]);return Ue(a,ct[t],n)}(e,t,n.value),function(){var e=Pe(["fire","blood","dark","light"]);return{common:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},uncommon:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},rare:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},legendary:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},unique:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},mythic:{fists:{slashing:lt("1d6","3d4",["strength"])},axe:{slashing:lt("1d6","3d4",["strength"])},greataxe:{slashing:lt("2d6","1d6",["strength"])},flail:{piercing:lt("1d6","3d4",["strength"])},daggers:{slashing:lt("2d6","1d6",["dexterity"])},katana:{slashing:lt("1d6","3d4",["dexterity"])},rapier:{piercing:lt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,lt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,lt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:lt("1d6","3d6",[Pe(["strength","dexterity"])])},e,lt("1d4","3d4",["intelligence"])),sword:{slashing:lt("1d6","3d6",["strength"])},greatsword:{slashing:lt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:lt("1d4","3d6",["dexterity"]),fire:lt("1d4","3d6",["intelligence"])},crossbow:{piercing:lt("1d4","2d6",["dexterity"]),fire:lt("1d4","2d6",["intelligence"])}},set:{fists:{},axe:{},greataxe:{},flail:{},daggers:{},katana:{},rapier:{},wand:{},staff:{},elementalSword:{},elementalGreatsword:{},sword:{},greatsword:{},pistol:{},crossbow:{}}}}()[t][e],t)},dt=function(e,t,n,a,r,i,o,c){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},s=ne("weapon");return Object(f.a)({},s,{type:"weapon",weaponType:e,name:t,cost:n,rarity:c,requirementCheck:a,accuracyCheck:M(["accuracy"],void 0,0,r),damageRolls:o,traits:[Object(f.a)({},ae(),{id:"".concat(s.id,"--bonus"),name:"Weapon Trait",abilitiesModifiers:{strength:i.strength||0,dexterity:i.dexterity||0,intelligence:i.intelligence||0,vigor:i.vigor||0},statsModifiers:{health:i.health||0,focus:i.focus||0,will:i.will||0,perception:i.perception||0,agility:i.agility||0,accuracy:i.accuracy||0,evade:i.evade||0}})],events:{},slotCount:0,slots:[]},l)},ut=n(125),ft=n.n(ut),mt=n(126),gt=n.n(mt),ht=n(127),pt=n.n(ht),bt=n(128),yt=n.n(bt),vt=n(129),Et=n.n(vt),wt=n(130),xt=n.n(wt),Ot=n(131),kt=n.n(Ot),jt=n(132),Ct=n.n(jt),St=n(133),Rt=n.n(St),Tt=n(134),It=n.n(Tt),qt=n(135),Mt=n.n(qt),Pt=n(136),Wt=n.n(Pt),zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Weapon Attack";return{id:Object(y.a)(),name:e,imgSrc:"",requirementCheck:te(["intelligence"],1),damageRolls:{},targetTraits:[],sourceTraits:[],events:{},combineWeaponDamage:!0,checkDodgeForTraits:!0,focusCost:0,target:!0}},Bt=Object(f.a)({},zt(),{imgSrc:Wt.a}),Dt=Object(f.a)({},zt("Inspect"),{imgSrc:Mt.a,combineWeaponDamage:!1,damageRolls:{},inspected:!0}),At=Object(f.a)({},zt("Fireball"),{imgSrc:gt.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{fire:q([],"4d10",-7)},focusCost:10}),Gt=Object(f.a)({},zt("Critical Blow"),{imgSrc:Et.a,requirementCheck:te(["strength"],10),combineWeaponDamage:!0,checkDodgeForTraits:!0,damageRolls:{},targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:-5}}),Object(f.a)({},ae(),{duration:-1,focusOffset:-3,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0}})],focusCost:1}),Ht=Object(f.a)({},zt("Thunderbolt"),{imgSrc:pt.a,check:P(["intelligence"],-3),combineWeaponDamage:!1,damageRolls:{light:q(["intelligence"])},focusCost:3}),Lt=Object(f.a)({},zt("Dark Blast"),{imgSrc:yt.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{dark:q(["intelligence"],"2d6",-8)},focusCost:5}),$t=Object(f.a)({},zt("Healing"),{target:!1,imgSrc:ft.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{},focusCost:5,sourceTraits:[Object(f.a)({},ae(),{healthOffset:15})]}),Ut=Object(f.a)({},zt("Wrath"),{imgSrc:xt.a,check:M(["strength"]),combineWeaponDamage:!1,damageRolls:{piercing:q([],"1d6")},focusCost:5,sourceTraits:[Object(f.a)({},ae(),{duration:4,abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})],targetTraits:[Object(f.a)({},ae(),{duration:4,abilitiesModifiers:{strength:-2,dexterity:0,intelligence:0,vigor:0}})]}),Ft=Object(f.a)({},zt("Charge"),{imgSrc:kt.a,focusCost:5,check:M(["strength"]),combineWeaponDamage:!1,damageRolls:{slashing:q(["strength"],"3d6",-12),piercing:q(["strength"],"3d6",-12)},sourceTraits:[Object(f.a)({},ae(),{duration:2,statsModifiers:{health:0,focus:0,will:0,perception:0,accuracy:0,evade:0,agility:3}})],targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:-3}})]}),Kt=Object(f.a)({},zt("Skill Shot"),{imgSrc:Ct.a,focusCost:12,check:P(["dexterity"],-4),combineWeaponDamage:!1,damageRolls:{piercing:q(["dexterity"],"1d20"),fire:q([],"8d2",-8)},targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:-2,vigor:0}})]}),Nt=Object(f.a)({},zt("Vanish"),{imgSrc:It.a,focusCost:8,check:P(["dexterity"]),combineWeaponDamage:!1,damageRolls:{},target:!1,sourceTraits:[Object(f.a)({},ae(),{duration:2,statsModifiers:{health:0,focus:0,will:0,perception:2,agility:-2,accuracy:0,evade:20}})]}),_t=Object(f.a)({},zt("Shadow Strike"),{imgSrc:Rt.a,focusCost:7,check:P(["evade"],-3),combineWeaponDamage:!1,damageRolls:{piercing:q(["evade"],"1d6",-6)}}),Vt=function(e){return{name:e||"-- init --",id:Object(y.a)(),power:600,resources:{characterPoints:0,weaponHands:1,heads:0,bodies:0,hands:0,fingers:10,feet:0},abilities:{strength:10,dexterity:10,intelligence:10,vigor:10},damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},traits:[],skills:[Bt,Dt],equippedItems:[],armor:[tt(Pe(["cowl","helmet"]),"common"),tt(Pe(["chestplate","robe"]),"common"),tt("gloves","common"),tt("boots","common")],weapon:st(Pe(["axe","greataxe","wand","staff","daggers","katana","sword","greatsword","flail","elementalGreatsword","elementalSword"])),healthOffset:0,focusOffset:0,dead:!1,inspected:!1}},Yt=Object(f.a)({},st("elementalSword","mythic"),{name:"Sword of Blood and Fire",damageRolls:{slashing:q(["strength"],"1d10",-3),fire:q(["intelligence"],"1d4",-10),blood:q(["intelligence"],"1d4",-10)},events:{onHit:[Object(f.a)({},ae(),{name:"heal on hit",healthOffset:5}),Object(f.a)({},ae(),{name:"restore fp on hit",focusOffset:5})],onCrit:[Object(f.a)({},ae(),{name:"add strenth on crit",abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})]}}),Xt=Object(f.a)({},st("elementalSword","mythic"),{name:"Sword of the Infinite",damageRolls:{fire:q([],"3d6",-3),blood:q([],"",6),light:q(["intelligence"],"",-7),dark:q(["intelligence"],"1d6",-10),slashing:q([])},events:{onHit:[Object(f.a)({},ae(),{name:"heal on hit",healthOffset:5})],onCrit:[Object(f.a)({},ae(),{name:"add strenth on crit",abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})]},slotCount:3,slots:[{id:Object(y.a)(),name:"Slash Gem",rarity:"mythic",traits:[Object(f.a)({},Q,{accuracyOffset:2,traits:[Object(f.a)({},ae(),{statsModifiers:{health:0,focus:2,will:0,perception:0,accuracy:0,agility:0,evade:2}})],damageRolls:{slashing:q([],"1d6")}})]}]}),Jt={id:Object(y.a)(),name:"Slashing Mod",rarity:"mythic",traits:[Object(f.a)({},Q,{damageRolls:{slashing:q([],"1d6")}})]},Qt=function(e){return{type:"@actions/parties/upsert-party",payload:{party:e}}},Zt=function(e,t){return{type:"@actions/parties/upsert-character",payload:{partyId:e,character:t}}},en=function(e,t){return{type:"@actions/parties/delete-character",payload:{partyId:e,characterId:t}}},tn=function(e,t){return{type:"@actions/parties/upsert-item",payload:{partyId:e,item:t}}},nn=function(e,t){return{type:"@actions/parties/delete-item",payload:{partyId:e,itemId:t}}},an=function(e,t){return{type:"@actions/parties/upsert-mod",payload:{partyId:e,mod:t}}},rn=function(e,t){return{type:"@actions/parties/delete-mod",payload:{partyId:e,modId:t}}},on={upsertParty:function(e){return function(t){t(Qt(e))}},upsertCharacter:function(e,t){return function(n){n(Zt(e,t))}},deleteCharacter:function(e,t){return function(n){n(en(e,t))}},upsertItem:function(e,t){return function(n){n(tn(e,t))}},removeItem:function(e,t){return function(n){n(nn(e,t))}},upsertMod:function(e,t){return function(n){n(an(e,t))}},deleteMod:function(e,t){return function(n){n(rn(e,t))}},equipItem:function(e,t,n){return function(a,r){var i=r().parties.find((function(t){return t.id===e}));if(i){var o=i.characters.find((function(e){return e.id===t})),c=i.items.find((function(e){return e.id===n}));o&&c&&he(o)(c)&&(a(Zt(e,function(e){return function(t){return he(e)(t)?"armor"===t.type?ve(e)(t):"weapon"===t.type?we(e)(t):be(e)(t):e}}(o)(c))),a(nn(e,c.id)))}}},unequipItem:function(e,t,n){return function(a,r){var i=r().parties.find((function(t){return t.id===e}));if(i){var o=i.characters.find((function(e){return e.id===t}));if(o){var c=pe(o)(n),l=Object(d.a)(c,2),s=l[0],u=l[1];a(Zt(e,u)),s.forEach((function(t){a(tn(e,t))}))}}}},equipMod:function(e,t,n){return function(a,r){var i=r().parties.find((function(t){return t.id===e}));if(i){var o=i.characters.find((function(e){return e.id===t})),c=i.mods.find((function(e){return e.id===n}));if(o&&c){var l=o.weapon;l&&l.slotCount>l.slots.length&&(a(Zt(e,Object(f.a)({},o,{weapon:Object(f.a)({},l,{slots:[].concat(Object(m.a)(l.slots),[c])})}))),a(rn(e,n)))}}}},unequipMod:function(e,t,n){return function(a,r){console.log("unequip mod");var i=r().parties.find((function(t){return t.id===e}));if(i){var o=i.characters.find((function(e){return e.id===t}));if(o){var c=o.weapon;if(c){var l=c.slots.find((function(e){return e.id===n}));l&&(a(Zt(e,Object(f.a)({},o,{weapon:Object(f.a)({},c,{slots:c.slots.filter((function(e){return e.id!==n}))})}))),a(an(e,l)))}}}}}},cn=(a={},Object(u.a)(a,"@actions/parties/upsert-party",(function(e,t){return qe(e,t.payload.party)})),Object(u.a)(a,"@actions/parties/upsert-character",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{characters:qe(e.characters,t.payload.character)})}))})),Object(u.a)(a,"@actions/parties/delete-character",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{characters:e.characters.filter((function(e){return e.id!==t.payload.characterId}))})}))})),Object(u.a)(a,"@actions/parties/upsert-item",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{items:qe(e.items,t.payload.item)})}))})),Object(u.a)(a,"@actions/parties/delete-item",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{items:e.items.filter((function(e){return e.id!==t.payload.itemId}))})}))})),Object(u.a)(a,"@actions/parties/upsert-mod",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{mods:qe(e.mods,t.payload.mod)})}))})),Object(u.a)(a,"@actions/parties/delete-mod",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{mods:e.mods.filter((function(e){return e.id!==t.payload.modId}))})}))})),a),ln=Vt("Character One"),sn=Vt("Character Two"),dn=Vt("Character Three"),un=Object(y.a)(),fn=[{id:un,items:[],skills:[Ut,Ft,Gt,Nt,_t,Kt,Ht,At,Lt,$t],mods:[Jt],characters:[Object(f.a)({},ln,{weapon:Xt,skills:[].concat(Object(m.a)(ln.skills),[Ut,Ft,Gt,Nt,_t,Kt,Ht,At,Lt,$t])}),Object(f.a)({},sn,{skills:[].concat(Object(m.a)(sn.skills),[Ut,Ft,Gt,Nt,_t,Kt,Ht,At,Lt,$t]),weapon:Yt}),Object(f.a)({},dn,{skills:[].concat(Object(m.a)(dn.skills),[Ut,Ft,Gt,Nt,_t,Kt,Ht,At,Lt,$t]),weapon:st("greataxe","mythic")})]}],mn=Re(cn,fn),gn=function(){return function(e,t){var n=Object(Te.b)();return Object(i.useMemo)((function(){return Object(Ie.b)(e,n)}),t?[n].concat(Object(m.a)(t)):[n])}(on)},hn={parties:[],rawParties:[],userParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawUserParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},activeCharacterId:null,upsertParty:function(e){},upsertItem:function(e){},upsertCharacter:function(e,t){},deleteCharacter:function(e,t){},upsertMod:function(e,t){},deleteMod:function(e,t){},findCharacter:function(e,t){},findRawCharacter:function(e,t){},equipItem:function(e,t,n){},unequipItem:function(e,t,n){},equipMod:function(e,t,n){},unequipMod:function(e,t,n){},setActiveCharacterId:function(e){}},pn=o.a.createContext(hn),bn=function(e){var t=e.children,n=gn(),a=Object(Te.c)((function(e){return e.parties})),r=Object(i.useMemo)((function(){return a.map((function(e){return Se(e)}))}),[a]),c=r.find((function(e){return e.id===un})),l=a.find((function(e){return e.id===un})),s=Object(i.useState)(null),u=Object(d.a)(s,2),f=u[0],m=u[1];return o.a.createElement(pn.Provider,{value:{parties:r,rawParties:a,userParty:c,rawUserParty:l,activeCharacterId:f,upsertParty:function(e){if(e){if(e.processed)throw new Error("No Processed Parties Allowed");n.upsertParty(e)}},upsertItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;n.upsertItem(t,e)},upsertCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;if(e){if(e.processed)throw new Error("No processed Characters Allowed");n.upsertCharacter(t,e)}},deleteCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;n.deleteCharacter(t,e)},upsertMod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;n.upsertMod(t,e)},deleteMod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;n.deleteMod(t,e)},equipItem:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;n.equipItem(a,e,t)},unequipItem:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;n.unequipItem(a,e,t)},equipMod:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;n.equipMod(a,e,t)},unequipMod:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;n.unequipMod(a,e,t)},findCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un,n=r.find((function(e){return e.id===t}));return n.characters.find((function(t){return t.id===e}))},findRawCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un,n=a.find((function(e){return e.id===t}));return n.characters.find((function(t){return t.id===e}))},setActiveCharacterId:m}},t)},yn=function(){return Object(i.useContext)(pn)},vn=function(e){return{type:"@state/rolls/ADD_ROLL",payload:{rollResult:e}}},En=Object(u.a)({},"@state/rolls/ADD_ROLL",(function(e,t){return[].concat(Object(m.a)(e),[t.payload.rollResult])})),wn=Re(En,[]),xn=o.a.createContext({history:[],execRoll:function(e){return{}},execCheck:function(e){return{}},rollCharacter:function(e){return function(t,n,a){return G(t,e)}},checkCharacter:function(e){return function(t,n,a){return H(t,e)}},getProbability:function(e){return 0}}),On=function(){return Object(i.useContext)(xn)},kn=function(e){var t=e.children,n=e.rolls,a=e.addRoll,r=Sn(),i=e.character||r.character;return o.a.createElement(xn.Provider,{value:{history:n,execRoll:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.keys?G(e,i,n):O(e,n);return t&&a(o,r),o},execCheck:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.keys?H(e,i,n):C(e,n);return t&&a(o,r),o},rollCharacter:function(e){return function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=G(t,e,r);return n&&a(o,i),o}},checkCharacter:function(e){return function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=H(t,e,r);return n&&a(o,i),o}},getProbability:function(e){return j(A(e,i))}}},t)},jn=function(e){var t=e.children,n=e.character,a=Object(Te.c)((function(e){return e.rolls})),r=Object(Te.b)();return o.a.createElement(kn,{rolls:a,addRoll:function(e,t){r(vn(Object(f.a)({},e,{label:t})))},character:n},t)},Cn=o.a.createContext({rawCharacter:Ce,character:se(Ce),onChange:function(e){}}),Sn=function(){return Object(i.useContext)(Cn)},Rn=function(e){var t=e.character,n=e.children,a=e.onChange,r=Object(i.useMemo)((function(){return se(t)}),[t]);return o.a.createElement(Cn.Provider,{value:{character:r,rawCharacter:t,onChange:a}},o.a.createElement(jn,null,n))},Tn=function(e){var t=e.children,n=e.characterId,a=yn(),r=a.activeCharacterId,i=a.rawUserParty,c=a.upsertCharacter,l=i.characters.find((function(e){return e.id===n}))||i.characters.find((function(e){return e.id===r}))||Ce;return o.a.createElement(Rn,{character:l,onChange:function(e){if(e){if(e.processed)throw new Error("no process characters allowed");c(e)}}},t)},In=n(26),qn=Object(In.b)("div",(function(e){return{display:"flex",flexDirection:e.$direction||"row",flex:e.$full?1:"default"}})),Mn=Object(In.b)("div",(function(){return{flex:1}})),Pn=n(51),Wn=n.n(Pn),zn=n(137),Bn=n.n(zn),Dn=n(138),An=n.n(Dn),Gn=n(139),Hn=n.n(Gn),Ln=n(140),$n=n.n(Ln),Un=n(141),Fn=n.n(Un),Kn=n(142),Nn=n.n(Kn),_n=n(143),Vn=n.n(_n),Yn=n(144),Xn=n.n(Yn),Jn=n(145),Qn=n.n(Jn),Zn=n(146),ea=n.n(Zn),ta=n(147),na=n.n(ta),aa=n(148),ra=n.n(aa),ia=n(149),oa=n.n(ia),ca=n(150),la=n.n(ca),sa=n(151),da=n.n(sa),ua=n(152),fa=n.n(ua),ma=n(153),ga=n.n(ma),ha=n(154),pa=n.n(ha),ba=n(155),ya=n.n(ba),va=n(156),Ea=n.n(va),wa=n(157),xa=n.n(wa),Oa=n(158),ka=n.n(Oa),ja=n(159),Ca=n.n(ja),Sa=n(160),Ra=n.n(Sa),Ta=n(161),Ia=n.n(Ta),qa=n(74),Ma=n.n(qa),Pa=n(162),Wa=n.n(Pa),za=n(163),Ba=n.n(za),Da=n(75),Aa=n.n(Da),Ga=n(164),Ha=n.n(Ga),La=n(165),$a=n.n(La),Ua=n(166),Fa=n.n(Ua),Ka=n(167),Na=n.n(Ka),_a=n(168),Va=n.n(_a),Ya=n(169),Xa=n.n(Ya),Ja=n(170),Qa=n.n(Ja),Za={weaponHands:Wn.a,characterPoints:Bn.a,heads:An.a,bodies:Hn.a,hands:$n.a,fingers:Fn.a,feet:Nn.a},er={slashing:Vn.a,piercing:Xn.a,fire:Qn.a,blood:ea.a,light:na.a,dark:ra.a},tr={weapon:"",armor:"",offhand:""},nr={fists:oa.a,axe:la.a,greataxe:da.a,flail:pa.a,daggers:ya.a,katana:Ea.a,rapier:xa.a,wand:ka.a,staff:Ca.a,elementalSword:Ma.a,elementalGreatsword:Aa.a,sword:fa.a,greatsword:ga.a,pistol:Ra.a,crossbow:Ia.a},ar={"fire-sword":Ma.a,"blood-sword":Wa.a,"light-sword":Ba.a,"dark-sword":Aa.a},rr={helmet:Ha.a,cowl:$a.a,chestplate:Fa.a,robe:Na.a,gloves:Va.a,ring:Xa.a,boots:Qa.a},ir=function(e){var t=e.src,n=e.size,a=e.style,r=void 0===a?{}:a,c=e.fill,l=void 0===c?"white":c,s=e.onClick,u=Object(i.useState)(!0),m=Object(d.a)(u,2),g=m[0],h=m[1],p=Object(i.useState)(""),b=Object(d.a)(p,2),y=b[0],v=b[1];return Object(i.useEffect)((function(){t&&fetch(t).then((function(e){return e.text()})).then((function(e){return v(e)})).then((function(){return h(!1)}))}),[t]),g?o.a.createElement("div",null):o.a.createElement("div",{onClick:function(){s&&s()},style:Object(f.a)({},r,{height:n,width:n,fill:l}),dangerouslySetInnerHTML:{__html:y}})},or=n(188),cr=n(76),lr=n.n(cr),sr=n(171),dr=function(e){var t=e.delay,n=void 0===t?500:t,a=e.children,r=Object(i.useState)(!1),c=Object(d.a)(r,2),l=c[0],s=c[1],u=Object(i.useState)(!1),f=Object(d.a)(u,2),m=f[0],g=f[1],h=Object(i.useState)(Object(y.a)()),p=Object(d.a)(h,2),b=p[0],v=p[1];Object(i.useLayoutEffect)((function(){(function(){var e=Object(sr.a)(lr.a.mark((function e(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&setTimeout((function(){v(Object(y.a)())}),n);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(i.useLayoutEffect)((function(){l&&g(!0)}),[b]);return o.a.createElement("div",{onMouseEnter:function(e){e.preventDefault(),e.stopPropagation(),s(!0)},onMouseLeave:function(e){e.preventDefault(),e.stopPropagation(),s(!1),g(!1)}},a({isHovering:m}))},ur=function(e){var t=e.style,n=void 0===t?{}:t,a=e.substyle,r=void 0===a?{}:a,i=e.children,c=e.tag,l=void 0===c?"div":c,s=Object(or.a)(e,["style","substyle","children","tag"]);return o.a.createElement("div",{style:Object(f.a)({border:"1px solid #000",display:"flex",boxSizing:"border-box"},n)},o.a.createElement(l,Object.assign({style:Object(f.a)({border:r.border||"1px solid #555",background:"linear-gradient(0deg, #222222 0%, #2a2a2a 100%)",padding:10,color:"#ccc",flex:1,boxShadow:"inset 0px 0px 2px black"},r)},s),i))},fr=function(e){return o.a.createElement(ur,Object.assign({},e,{style:Object(f.a)({height:40,width:40},e.style),substyle:Object(f.a)({display:"flex",padding:0,justifyContent:"center",alignItems:"center",background:"#111"},e.substyle)}),e.children)},mr=function(e){return o.a.createElement(dr,{delay:0},(function(t){var n=t.isHovering;return o.a.createElement(ur,Object.assign({},e,{tag:"button",style:Object(f.a)({margin:0},e.style||{}),substyle:Object(f.a)({borderColor:n&&!e.disabled?"#999":"#555",padding:"4px",cursor:e.disabled?"default":"pointer",background:e.disabled?"#444":"#111",boxShadow:e.disabled?"none":void 0},e.substyle||{})}))}))},gr=function(e){var t=e.id,n=Sn().character,a=Za[t];return o.a.createElement(ur,{style:{flex:1},substyle:{display:"flex",padding:4,fontFamily:"monospace",fontSize:16,background:"#1a1a1a",color:"rgba(255,255,255,0.6)"}},o.a.createElement("div",{style:{flex:1,marginRight:10}},o.a.createElement(ir,{size:18,src:a,fill:"rgba(255,255,255,0.8)"})),n.resources[t])},hr=Object(In.b)("span",(function(){return{fontFamily:"Inconsolata, monospace",fontWeight:600}})),pr=Object(In.b)("div",(function(){return{fontFamily:"Inconsolata, monospace",fontWeight:600}})),br=function(e){var t=e.id,n=e.edit,a=void 0===n||n,r=Sn(),i=r.character,c=r.rawCharacter,l=r.onChange,s=yn().upsertItem,u=On().execCheck,f=me[t],m=c.abilities[t],g=i.abilities[t],h=ge[t],p=i.resources.characterPoints;return o.a.createElement(yr,{name:f,value:g,rawValue:m,points:p,cost:h,edit:a,onClick:function(){u(M([t]))},onIncrement:function(){var e=fe(c)(t,m+1,p-h),n=Object(d.a)(e,2),a=n[0],r=n[1];l(a),r.forEach((function(e){s(e)}))},onDecrement:function(){var e=fe(c)(t,m-1,p+h),n=Object(d.a)(e,2),a=n[0],r=n[1];l(a),r.forEach((function(e){s(e)}))}})},yr=function(e){var t=e.name,n=e.edit,a=e.rawValue,r=e.value,i=e.points,c=e.cost,l=(e.onClick,e.onIncrement),s=e.onDecrement;return o.a.createElement(ur,{substyle:{padding:0,display:"flex"}},o.a.createElement(qn,{style:{padding:8,marginRight:10,whiteSpace:"nowrap"},$direction:"column",$full:!0},o.a.createElement(hr,{style:{color:"rgba(255,255,255,0.5)",textShadow:"1px 1px 0px black"}},t," (",a,")"),o.a.createElement(Mn,null),o.a.createElement(hr,{style:{fontSize:42,textShadow:"1px 1px 3px black",color:r>a?"lightgreen":r<a?"lightcoral":"white"}},r)),n&&o.a.createElement(qn,{$direction:"column",style:{width:30}},o.a.createElement(mr,{style:{margin:0},disabled:i<c||18===a,onClick:l},"+"),o.a.createElement(qn,{$full:!0,style:{alignItems:"center",justifyContent:"center"}},o.a.createElement(hr,{style:{fontSize:12,color:"rgba(255,255,255,0.4)"}},c)),o.a.createElement(mr,{style:{margin:0},disabled:3===a,onClick:s},"-")))},vr=function(e){var t=e.id,n=Sn().character,a=(On().execCheck,t);return o.a.createElement(ur,{style:{flex:1},substyle:{display:"flex",alignItems:"center",background:"#222",boxShadow:"inset 3px 0px 10px black",fontSize:14}},o.a.createElement(hr,{style:{color:"rgba(255,255,255,0.5)",textShadow:"1px 1px 0px black",display:"inline-block",flex:1,marginRight:10,fontWeight:600}},a.toLocaleUpperCase()),o.a.createElement(hr,{style:{fontWeight:800}},n.stats[t]))},Er=function(e){var t=e.id,n=Sn().character,a=On().execRoll,r=n.damageResistances[t],i=r?"".concat(L(D(r,n))):"",c=er[t],l=U[t];return o.a.createElement(ur,{style:{flex:1},substyle:{display:"flex",whiteSpace:"nowrap",alignItems:"center",background:"#222",boxShadow:"inset -1px 0px 10px black",fontSize:14}},o.a.createElement(qn,{style:{alignItems:"center",flex:1,marginRight:10}},o.a.createElement(ir,{size:18,src:c,fill:l,style:{marginRight:10}}),o.a.createElement(hr,{style:{color:"rgba(255,255,255,0.5)",textShadow:"1px 1px 0px black"},onClick:function(){return r?a(r):null}},t.toLocaleUpperCase())),o.a.createElement(hr,{style:{fontWeight:800}},i||0))},wr=n(11),xr=n.n(wr),Or=function(){return arguments.length<=1?void 0:arguments[1]},kr=function(){return arguments.length<=2?void 0:arguments[2]},jr=["lightcoral","inherit","lightgreen"],Cr=function(e,t){return n=(a=e-t)<0?-1:a>0?1:0,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t[n+1]};var n,a},Sr=function(e){var t=e.trait,n=e.compareResult,a=void 0===n?function(e){return Or}:n,r=t.abilitiesModifiers,i=t.statsModifiers,c=g(r).filter((function(e){return 0!==Oe(t,e)})),l=g(i).filter((function(e){return 0!==Oe(t,e)}));return o.a.createElement(pr,{style:{fontSize:14,fontWeight:600}},0!==t.focusOffset&&o.a.createElement("span",null,b(t.focusOffset),Math.abs(t.focusOffset)," FP",0!==t.healthOffset||c.length>0||l.length>0?", ":""),0!==t.healthOffset&&o.a.createElement("span",null,b(t.healthOffset),Math.abs(t.healthOffset)," HP",c.length>0||l.length>0?", ":""),c.map((function(e,n){return o.a.createElement("span",{key:e},n>0?", ":"",o.a.createElement("span",{style:{color:a(e).apply(void 0,Object(m.a)(jr))}},b(Oe(t,e)),Math.abs(Oe(t,e))," ",me[e]))})),c.length>0&&l.length>0&&", ",l.map((function(e,n){return o.a.createElement("span",{key:e},n>0?", ":"",o.a.createElement("span",{style:{color:a(e).apply(void 0,Object(m.a)(jr))}},b(Oe(t,e)),Math.abs(Oe(t,e))," ",me[e]))})))},Rr=function(e){return p(e,"".concat(Math.abs(e)))},Tr=n(32),Ir=n.n(Tr),qr=function(e){var t=e.check,n=void 0===t?Object(f.a)({},I,{keys:[]}):t,a=e.name,r=e.showCheckButton,c=void 0===r||r,l=e.compareResult,s=void 0===l?Or:l,d=On(),u=d.execCheck,g=d.getProbability,h=n.value||0,p=(n.keys||[]).map((function(e){return me[e]})),y=p.reduce((function(e,t,n){return"".concat(e).concat(0!==n?"+":"").concat(t)}),"")+(0===p.length?"":b(h)),v=n.roll.string?" {".concat(n.roll.string,"} "):"",E=Object(i.useMemo)((function(){return g(n,!0)}),[n,g]);return o.a.createElement(qn,null,o.a.createElement("div",{style:{marginRight:10,flex:1,color:s.apply(void 0,Object(m.a)(jr))}},a&&o.a.createElement("strong",null,a),o.a.createElement(pr,{style:{whiteSpace:"nowrap"}},y,v&&Rr(h)," ",!v&&" = "+Rr(n.roll.modifier)," (",E,"%)")),c&&o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return u(n)}},o.a.createElement(ir,{src:Ir.a,size:18,fill:"4bebc6"}))))},Mr=function(e){var t=e.item,n=e.size,a=e.fill,r=e.style,i=rr[t.armorType];return o.a.createElement(ir,{src:i,size:n,fill:a,style:r})},Pr={common:"#fff",uncommon:"#9fbd9f",rare:"#91b4f2",legendary:"#cda5f3",unique:"#c2af6b",mythic:"lightsalmon",set:"#38f5e2"},Wr=function(e){var t=e.item,n=e.size,a=e.fill,r=e.style,i=tr[t.type];return o.a.createElement(ir,{src:i,size:n,fill:a,style:r})},zr=function(e){var t=e.item,n=e.showEquipButton,a=void 0===n||n,r=e.showRequirementCheck,c=void 0===r||r,l=e.showCollapseButton,s=void 0!==l&&l,u=Sn().rawCharacter,f=yn().unequipItem,g=Object(i.useState)(!1),h=Object(d.a)(g,2),p=h[0],b=h[1],y=e.requirementCompare||Or,v=e.traitCompare||function(e){return Or},E=e.resistancesCompare||function(e){return Or},w=e.costComare||Or,x="armor"===t.type,O=Pr[t.rarity],k=xr()(O).desaturate(.5).fade(.5).rgb().string();return o.a.createElement(ur,{style:{width:380},substyle:{borderColor:k,padding:0}},o.a.createElement(qn,{style:{padding:8,background:"linear-gradient(0deg, rgba(34,34,34,1) 0%, rgba(51,51,51,1) 100%)",borderBottom:"1px solid #555"}},x?o.a.createElement(Mr,{item:t,size:24,fill:O,style:{marginRight:10}}):o.a.createElement(Wr,{item:t,size:24,style:{marginRight:10},fill:O}),o.a.createElement("h3",{style:{margin:"0 10px 0 0",flex:1,whiteSpace:"nowrap",lineHeight:"29px"}},t.name),s&&o.a.createElement(mr,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){b((function(e){return!e}))}},p?"more":"less"),!a&&o.a.createElement(qn,{style:{margin:"0 0 10px 0",fontWeight:"bold",fontSize:12,color:w.apply(void 0,Object(m.a)(jr))}},o.a.createElement(ir,{src:Za[t.resource],size:12,fill:w("lightcoral","white","lightgreen"),style:{margin:"0 8px"}}),t.cost),a&&o.a.createElement(mr,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){f(u.id,t.id)}},o.a.createElement(ir,{src:Za[t.resource],size:12,fill:"rgba(255,255,255,0.8)",style:{marginRight:10}}),t.cost)),o.a.createElement("div",{style:{padding:"8px 16px",background:"#222",boxShadow:"inset 0px 0px 15px black"}},!p&&o.a.createElement(o.a.Fragment,null,1!==t.requirementCheck.roll.modifier&&c&&o.a.createElement("div",{style:{marginTop:4}},o.a.createElement(qr,{name:"Requirement",check:t.requirementCheck,showCheckButton:!1,compareResult:y})),o.a.createElement(qn,{$direction:"column"},t.traits.map((function(e){return o.a.createElement("div",{key:e.id,style:{marginTop:10,marginBottom:10}},o.a.createElement(Sr,{trait:e,compareResult:v}))})),t.damageResistances&&o.a.createElement(qn,{style:{flexWrap:"wrap",justifyContent:"space-evenly",marginBottom:8}},F(t.damageResistances).filter((function(e){return t.damageResistances[e]})).map((function(e){return o.a.createElement(qn,{key:e},o.a.createElement(ir,{src:er[e],size:14,fill:U[e],style:{marginRight:8}}),o.a.createElement(pr,{style:{fontSize:16,lineHeight:"16px",color:E(e).apply(void 0,Object(m.a)(jr))}},$(t.damageResistances[e])||0))})))))))},Br={helmet:0,cowl:0,chestplate:1,robe:1,gloves:2,ring:3,boots:4},Dr=n(16),Ar=n.n(Dr),Gr=function(e){var t=e.weapon,n=e.size,a=e.fill,r=e.style,i=t.icon?ar[t.icon]:nr[t.weaponType];return o.a.createElement(ir,{src:i,size:n,fill:a,style:r})},Hr=function(e){var t=e.parent,n=e.children,a=Sn().character,r=t.damageRolls,i=g(r).filter((function(e){return r[e]})),c=i.map((function(e){return r[e]})).filter((function(e){return e}));return o.a.createElement(ur,{style:{whiteSpace:"nowrap"},substyle:{padding:"4px 10px",borderColor:"rgba(255,255,255,0.3)",background:"rgba(0,0,0,0.75)"}},n(i.map((function(e){return{id:e,key:e,damageRangeText:(t=r[e],L(D(t,a))),damageRollText:$(r[e])};var t})),B.apply(void 0,Object(m.a)(c))))},Lr=function(e){var t=e.id,n=e.damageRangeText,a=e.damageRollText,r=e.compareResult,i=void 0===r?Or:r;return a?o.a.createElement(qn,{key:t,style:{alignItems:"flex-end",padding:"4px 0",height:24,lineHeight:"24px"}},o.a.createElement(ir,{src:er[t],size:20,fill:U[t],style:{marginBottom:2,marginRight:10}}),o.a.createElement(hr,{style:{margin:0,fontSize:18,fontWeight:600}},o.a.createElement("span",{style:{color:i.apply(void 0,Object(m.a)(jr))}},"(",n,")")," ",o.a.createElement("span",{style:{color:"rgba(255,255,255, 0.3)"}},a))):null},$r=n(41),Ur=n.n($r),Fr=function(e){var t=e.mod,n=e.onEquip,a=(Sn().character,Z.apply(void 0,Object(m.a)(t.traits))),r=ke(a.traits);return o.a.createElement(ur,null,o.a.createElement(qn,null,o.a.createElement(ir,{src:Ur.a,size:24}),o.a.createElement("span",{style:{margin:"0 10px",flex:1,fontWeight:"bold",whiteSpace:"nowrap"}},t.name),o.a.createElement(mr,{onClick:function(){return n&&n(t.id)}},"equip")),0!==a.accuracyOffset&&o.a.createElement("div",{style:{fontFamily:"monospace",marginTop:10}},b(a.accuracyOffset),Math.abs(a.accuracyOffset)," to hit"),o.a.createElement("div",{style:{marginBottom:10}},o.a.createElement(Sr,{trait:r})),o.a.createElement(Hr,{parent:a},(function(e,t){return e.map((function(e){return o.a.createElement(Lr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText})}))})))},Kr=function(e){var t=Object.assign({},e);return o.a.createElement(Ar.a,Object.assign({direction:"up",tagName:"div",padding:"0",arrow:!1},t))},Nr=function(e){return o.a.createElement(dr,null,(function(t){var n=t.isHovering;return o.a.createElement(Kr,Object.assign({},e,{isOpen:n}))}))},_r=function(e){var t=Sn(),n=t.character,a=t.rawCharacter,r=(t.onChange,yn()),i=r.unequipItem,c=r.unequipMod,l=e.showEquipButton,s=void 0===l||l,d=e.showRequirement,u=void 0===d||d,f=e.weapon||n.weapon,h=Pr[f.rarity],p=xr()(h).desaturate(.5).fade(.5).rgb().string(),b=e.requirementCompare||Or,y=e.accuracyCompare||Or,v=e.traitCompare||function(e){return Or},E=e.damageCompare||function(e){return Or},w=e.costComare||Or,x=ke(f.traits);return o.a.createElement(ur,{style:{width:380},substyle:{borderColor:p,padding:0}},o.a.createElement(qn,{style:{padding:8,background:"linear-gradient(0deg, #222222 0%, #2a2a2a 100%)",borderBottom:"1px solid #555"}},o.a.createElement(Gr,{weapon:f,size:24,fill:h}),o.a.createElement("h3",{style:{margin:"0 0 0 10px",flex:1,lineHeight:"29px"}},f.name),f.id!==re.id&&s?o.a.createElement(mr,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){return i(a.id,f.id)}},o.a.createElement(ir,{src:Za[f.resource],size:12,fill:"rgba(255,255,255,0.8)",style:{marginRight:10}}),f.cost):o.a.createElement(qn,{style:{margin:"0 0 10px 0",fontWeight:"bold",fontSize:12,color:w.apply(void 0,Object(m.a)(jr))}},o.a.createElement(ir,{src:Za.weaponHands,size:12,style:{margin:"0 8px"},fill:w("lightcoral","white","lightgreen")}),f.cost)),o.a.createElement("div",{style:{padding:8,background:"#222",boxShadow:"inset 0px 0px 15px black"}},o.a.createElement("div",{style:{padding:"8px 8px 0px 8px"}},o.a.createElement(qn,{style:{marginBottom:10}},u&&o.a.createElement(Mn,null,o.a.createElement(qr,{name:"Requirement",showCheckButton:!1,check:f.requirementCheck,compareResult:b})),o.a.createElement(Mn,null,o.a.createElement(qr,{showCheckButton:!1,check:f.accuracyCheck,compareResult:y}))),o.a.createElement("div",{style:{marginBottom:10}},o.a.createElement(Sr,{trait:x,compareResult:v})),o.a.createElement("div",{style:{marginBottom:10}},g(f.events||{}).map((function(e){return(f.events[e]||[]).length>0&&o.a.createElement(qn,{key:e,style:{alignItems:"center"}},o.a.createElement(hr,{style:{fontSize:12,marginRight:10,color:"rgba(255,255,255,0.4)"}},Y[e],":"),o.a.createElement(Sr,{trait:ke(f.events[e])}))})))),f.slotCount>0&&o.a.createElement(qn,{style:{justifyContent:"center",padding:8,margin:"8px 0 4px 0"}},o.a.createElement(Mn,null,o.a.createElement("hr",{style:{borderColor:"rgba(255,255,255,0.3)",borderBottomWidth:0}})),o.a.createElement(qn,{style:{padding:"0 20px"}},Array(f.slotCount).fill(null).map((function(e,t){var a=f.slots[t];return a?o.a.createElement(Nr,{content:o.a.createElement(Fr,{mod:a})},o.a.createElement(ir,{src:Ur.a,size:20,fill:Pr[a.rarity],style:{padding:"0 8px",cursor:"pointer"},onClick:function(){c(n.id,a.id)}})):o.a.createElement(ir,{src:Ur.a,size:20,fill:"rgba(255,255,255,0.4)",style:{padding:"0 8px"}})}))),o.a.createElement(Mn,null,o.a.createElement("hr",{style:{borderColor:"rgba(255,255,255,0.3)",borderBottomWidth:0}}))),o.a.createElement(Hr,{parent:f},(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(hr,{style:{fontSize:12,color:"rgba(255,255,255,0.25)"}},"TOTAL DAMAGE: (",L(D(t,n)),")"),e.map((function(e){return o.a.createElement(Lr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText,compareResult:E(e.id)})})))}))))},Vr=function(e){var t=e.item,n=void 0===t?{}:t,a=e.size,r=void 0===a?38:a,c=e.onClick,l=void 0===n.type,s=Pr[n?n.rarity:"common"],d=xr()(s).desaturate(.5).fade(.5).rgb().string(),u="armor"===n.type,f="weapon"===n.type,m=Object(i.useMemo)((function(){return n?f?o.a.createElement(Gr,{weapon:n,size:r-16,fill:s}):u?o.a.createElement(Mr,{item:n,size:r-16,fill:s}):void 0:null}),[n,u,f,s]);return n?o.a.createElement(dr,null,(function(e){var t=e.isHovering;return o.a.createElement(Ar.a,{isOpen:t,direction:"bottom",tagName:"div",padding:"0",arrow:!1,content:"armor"===n.type?o.a.createElement(zr,{item:n,showEquipButton:!1,showCollapseButton:!1,showRequirementCheck:!1}):o.a.createElement(_r,{weapon:n,showEquipButton:!1})},o.a.createElement(ur,{style:{height:r,width:r,cursor:n&&c?"pointer":"default"},substyle:{background:l?"#111":"#222",boxShadow:"inset 0 0 3px black",border:"1px solid ".concat(l?"#555":d),display:"flex",alignItems:"center",justifyContent:"center",padding:0},onClick:function(){return c&&c(n)}},m))})):null},Yr=function(e){var t=Sn(),n=t.character,a=t.rawCharacter,r=yn().unequipItem,i=n.armor,c=i.filter((function(e){return"ring"===e.armorType})),l=Array(10-c.length).fill(void 0);return o.a.createElement("div",null,o.a.createElement(qn,null,[].concat(Object(m.a)(l),Object(m.a)(c)).map((function(e){return o.a.createElement(Vr,{key:e?e.id:Object(y.a)(),item:e,onClick:function(e){return r(a.id,e.id)}})}))),i.filter((function(e){return"ring"!==e.armorType})).sort((function(e,t){return Br[e.armorType]-Br[t.armorType]})).map((function(e){return o.a.createElement(zr,{key:e.id,item:e,showRequirementCheck:!1,showCollapseButton:!1})})))},Xr=n(172),Jr=n.n(Xr),Qr=function(e){var t=e.name,n=void 0===t?"":t,a=e.value,r=e.max,i=e.color,c=e.height,l=void 0===c?30:c,s=e.children,d=a/r*100,u=d>100?100:d;return o.a.createElement(Nr,{direction:"right",content:o.a.createElement(ur,null,"".concat(n," (").concat(a," / ").concat(r,")"))},o.a.createElement(ur,{substyle:{padding:0,background:"#555",height:l-2,position:"relative"}},o.a.createElement(qn,{style:{position:"absolute",left:0,boxSizing:"border-box",height:l-2,maxWidth:"".concat(u,"%"),minWidth:"".concat(u,"%"),border:u>0?"1px solid ".concat(xr()(i).lighten(.5)):"none",boxShadow:"inset 1px 1px 0px rgba(0,0,0,0.5)",textShadow:"1px 1px 1px black",backgroundColor:i,color:"white",alignItems:"center",justifyContent:"center",transition:"all 0.5s"}}),o.a.createElement(Mn,{style:{position:"absolute",height:l,lineHeight:"".concat(l-2,"px"),right:4,top:0,fontSize:14,fontWeight:"bold",overflow:"hidden",textShadow:"0px 0px 3px black"}},o.a.createElement(pr,null,s))))},Zr=function(){Sn().character;return o.a.createElement(qn,null,o.a.createElement(qn,{$direction:"column"},o.a.createElement(br,{id:"strength",edit:!1}),o.a.createElement(br,{id:"dexterity",edit:!1}),o.a.createElement(br,{id:"intelligence",edit:!1}),o.a.createElement(br,{id:"vigor",edit:!1})),o.a.createElement(qn,{$direction:"column"},o.a.createElement(vr,{id:"health"}),o.a.createElement(vr,{id:"focus"}),o.a.createElement(vr,{id:"will"}),o.a.createElement(vr,{id:"perception"}),o.a.createElement(vr,{id:"agility"}),o.a.createElement(vr,{id:"accuracy"}),o.a.createElement(vr,{id:"evade"})),o.a.createElement(qn,{$direction:"column"},o.a.createElement(Er,{id:"slashing"}),o.a.createElement(Er,{id:"piercing"}),o.a.createElement(Er,{id:"fire"}),o.a.createElement(Er,{id:"blood"}),o.a.createElement(Er,{id:"light"}),o.a.createElement(Er,{id:"dark"})))},ei=n(173),ti=n.n(ei),ni=n(174),ai=n.n(ni),ri=n(175),ii=n.n(ri),oi=n(176),ci=n.n(oi),li=function(e){var t=e.skillId,n=e.showRequirementCheck,a=Sn().character,r=e.skill||a.skills.find((function(e){return e.id===t}))||zt();return o.a.createElement(ur,{style:{width:380,background:"url(".concat(r.imgSrc,") no-repeat center center"),backgroundSize:"cover"},substyle:{background:"rgba(0,0,0,0.8)",borderColor:"rgba(255,255,255,0.4)"}},o.a.createElement(qn,{style:{marginBottom:10}},o.a.createElement("h3",{style:{margin:"0 10px 0 0",flex:1}},r.name)),o.a.createElement(qn,{style:{marginBottom:10,fontSize:14}},o.a.createElement("strong",{style:{marginRight:10}},"Cost"),o.a.createElement("span",null,r.focusCost)),o.a.createElement(qn,{style:{marginBottom:10}},n&&o.a.createElement(Mn,null,o.a.createElement(qr,{name:"Requirement",showCheckButton:!1,check:r.requirementCheck})),r.check&&o.a.createElement(Mn,null,o.a.createElement(qr,{name:"Skill Check",showCheckButton:!1,check:r.check})),r.combineWeaponDamage&&o.a.createElement(Mn,null,o.a.createElement(qr,{showCheckButton:!1,check:a.weapon.accuracyCheck}))),r.targetTraits.length>0&&o.a.createElement(qn,{style:{marginBottom:10}},o.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},"target:"),o.a.createElement(Sr,{trait:ke(r.targetTraits)})),r.sourceTraits.length>0&&o.a.createElement(qn,{style:{marginBottom:10}},o.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},"self:"),o.a.createElement(Sr,{trait:ke(r.sourceTraits)})),o.a.createElement("div",{style:{marginBottom:10}},g(r.events).map((function(e){return o.a.createElement(qn,{key:e,style:{alignItems:"center"}},o.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},Y[e],":"),o.a.createElement(Sr,{trait:ke(r.events[e])}))}))),r.combineWeaponDamage&&o.a.createElement("div",{style:{marginBottom:10}},g(a.weapon.events).map((function(e){return o.a.createElement(qn,{key:e,style:{alignItems:"center"}},o.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},Y[e],":"),o.a.createElement(Sr,{trait:ke(a.weapon.events[e])}))}))),(r.combineWeaponDamage||Object.keys(r.damageRolls).length>0)&&o.a.createElement(Hr,{parent:r.combineWeaponDamage?a.weapon:r},(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(hr,{style:{fontSize:12,color:"rgba(255,255,255,0.25)"}},"TOTAL DAMAGE: (",L(D(t,a)),")"),e.map((function(e){return o.a.createElement(Lr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText})})))})))},si=function(e){var t=e.activeSkillId,n=void 0===t?Bt.id:t,a=e.skills,r=e.onClick,i=Sn().character,c=function(e){return n===e},l=function(e){return i.dead||i.stats.focus-i.focusOffset<e.focusCost};return o.a.createElement(qn,{style:{marginBottom:2}},a.map((function(e){return o.a.createElement(di,{key:e.id,skill:e,disabled:l(e),onClick:function(){return r(e.id)},style:Object(f.a)({padding:0,height:36,maxWidth:36,margin:0,borderColor:"transparent",opacity:l(e)?.2:c(e.id)?1:.7},c(e.id)?{borderColor:"turquoise"}:{})})})))},di=function(e){var t=e.skill,n=e.disabled,a=e.style,r=e.onClick,i=t.id===Dt.id;return o.a.createElement(dr,null,(function(e){var c=e.isHovering;return o.a.createElement(Ar.a,{isOpen:c,direction:"down",tagName:"div",padding:"0",arrow:!1,content:i?o.a.createElement(ur,null,t.name):o.a.createElement(li,{skillId:t.id,skill:t})},o.a.createElement(ur,{onClick:function(){return!n&&r(t.id)},substyle:Object(f.a)({borderColor:c?"#999":"#555",padding:"4px",cursor:n?"default":"pointer",background:n?"#444":"#111"},a),style:{border:"none"}},t.imgSrc&&o.a.createElement("img",{src:t.imgSrc,height:34,width:34,style:{height:34,maxWidth:34,boxSizing:"border-box",border:"1px solid black"}})))}))},ui=n(52),fi={dictionaries:[ui.a,ui.b],length:2,separator:" "},mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{id:Object(y.a)(),npc:!0,name:Object(ui.c)(fi),power:600,resources:Object(f.a)({characterPoints:250,weaponHands:2,heads:1,bodies:1,hands:2,fingers:10,feet:2},n),abilities:Object(f.a)({strength:10,dexterity:10,intelligence:10,vigor:10},e),damageResistances:Object(f.a)({slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},t),weapon:st(Pe(["axe","greataxe","wand","staff","daggers","katana","sword","greatsword","flail","elementalGreatsword","elementalSword"])),traits:[],skills:[Bt],equippedItems:[],armor:[tt("cowl"),tt("chestplate"),tt("gloves"),tt("boots")],healthOffset:0,focusOffset:0,dead:!1,inspected:!1}},gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.a)();return{id:e,items:[],skills:[],mods:[],characters:[mi(),mi(),mi(),mi(),mi()].map((function(t){return Object(f.a)({},t,{partyId:e})}))}},hi=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return o.a.createElement("span",{style:{color:e,fontWeight:n?"bold":"normal"}},t)},pi=function(e){return Ri(e)?hi("lightgreen",e.name):hi("lightsalmon",e.name)},bi=function(e){return 0!==e},yi=function(e){return e>0?"gained":"lost"},vi=function(e,t,n,a){e.targetTraits.forEach((function(e){var t=n.focusOffset-e.focusOffset,r=t<0?e.focusOffset+t:e.focusOffset;bi(r)&&a(o.a.createElement("span",null,pi(n)," ",yi(r)," ",r," FP.")),g(e.abilitiesModifiers).forEach((function(t){bi(e.abilitiesModifiers[t])&&a(o.a.createElement("span",null,pi(n)," ",yi(e.abilitiesModifiers[t])," ",e.abilitiesModifiers[t]," ",t,"."," ",e.duration>1&&"(".concat(e.duration-1)))})),g(e.statsModifiers).forEach((function(t){bi(e.statsModifiers[t])&&a(o.a.createElement("span",null,pi(n)," ",yi(e.statsModifiers[t])," ",e.statsModifiers[t]," ",t,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))}))})),e.sourceTraits.forEach((function(e){var n=t.focusOffset-e.focusOffset,r=n<0?e.focusOffset+n:e.focusOffset;bi(r)&&a(o.a.createElement("span",null,pi(t)," ",yi(r)," ",r," FP."));var i=t.healthOffset-e.healthOffset,c=i<0?e.healthOffset+i:e.healthOffset;bi(c)&&a(o.a.createElement("span",null,pi(t)," ",yi(c)," ",c," HP.")),g(e.abilitiesModifiers).forEach((function(n){bi(e.abilitiesModifiers[n])&&a(o.a.createElement("span",null,pi(t)," ",yi(e.abilitiesModifiers[n])," ",e.abilitiesModifiers[n]," ",n,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))})),g(e.statsModifiers).forEach((function(n){bi(e.statsModifiers[n])&&a(o.a.createElement("span",null,pi(t)," ",yi(e.statsModifiers[n])," ",e.statsModifiers[n]," ",n,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))}))}))},Ei={id:"zero",sourceId:"",targetId:"",skill:Bt,index:0,hitSuccess:!1,criticalSuccess:!1,dodgeSuccess:!1,rawDamage:0,blockedDamage:0,totalDamage:0,targetTraits:[],sourceTraits:[]},wi=function(e){return e||Object(f.a)({},S,{keys:[]})},xi=function(e,t){return e.combineWeaponDamage?{slashing:B(wi(e.damageRolls.slashing),wi(t.damageRolls.slashing)),piercing:B(wi(e.damageRolls.piercing),wi(t.damageRolls.piercing)),fire:B(wi(e.damageRolls.fire),wi(t.damageRolls.fire)),blood:B(wi(e.damageRolls.blood),wi(t.damageRolls.blood)),light:B(wi(e.damageRolls.light),wi(t.damageRolls.light)),dark:B(wi(e.damageRolls.dark),wi(t.damageRolls.dark))}:e.damageRolls},Oi=function(e,t,n){return function(a,r){var i=Object(f.a)({},Ei,{id:Object(y.a)(),targetId:a.id,sourceId:r.id}),o=r.skills.find((function(t){return t.id===e[r.id]}))||Bt;i.skill=o;var c=r.weapon,l=xi(o,c),s=function(e,t){return e.combineWeaponDamage?t.accuracyCheck:e.check||M([],void 0,0,18)}(o,c),d=t(r)(s);if(d.result){var u=d.criticalSuccess;i.hitSuccess=!0,i.criticalSuccess=u;var m=n(r),g=K(m)(l,u,"".concat(r.name," damage"));i.rawDamage=g.total;var h=t(a)(M(["evade"],void 0));if(i.dodgeSuccess=h.result||!1,!h.result){var p=a.damageResistances;F(g.rollResults).filter((function(e){return g.rollResults[e]})).forEach((function(e){var t=g.rollResults[e],a=p[e],o=n(r)(a,!0),c=u?0:o.total,l=t.total-c;i.blockedDamage+=t.total>0?c:0,i.totalDamage+=v(l)}))}o.checkDodgeForTraits&&h.result||(i.targetTraits=o.targetTraits,i.sourceTraits=o.sourceTraits)}return i}},ki=function(e,t,n,a,r){if(0===e.length)return[];if(!t||!n)return[];var i=[].concat(Object(m.a)(t.characters),Object(m.a)(n.characters)),c=function(e,t){i=i.map((function(n){return n.id===e?t(n):n}))},l=e[e.length-1];return a(o.a.createElement("strong",{style:{color:"lightblue",fontSize:20,display:"inline-block",marginTop:4}},"ROUND ".concat(e.length))),Object.values(l).sort((function(e,t){return e.index-t.index})).forEach((function(e){var t=i.map((function(e){return se(e)})),n=t.find((function(t){return t.id===e.sourceId})),r=t.find((function(t){return t.id===e.targetId})),l=i.find((function(t){return t.id===e.sourceId})),s=i.find((function(t){return t.id===e.targetId}));if(l&&n&&s&&r&&!n.dead&&!r.dead){!function(e,t,n,a){e.skill.id!==Bt.id&&a(o.a.createElement("span",null,pi(t)," casts ",hi("#cda5f3",e.skill.name),e.skill.target&&o.a.createElement("span",null," on ",pi(n),"."))),e.hitSuccess?(e.skill.id===Bt.id?a(o.a.createElement("span",null,pi(t)," attacks ",pi(n)," for"," ",hi("white","".concat(e.totalDamage," damage")),".")):(e.rawDamage>0&&a(o.a.createElement("span",null,hi("#cda5f3",e.skill.name)," deals"," ",hi("white","".concat(e.totalDamage," damage")),".")),(e.targetTraits.length>0||e.sourceTraits.length>0)&&vi(e,t,n,a)),e.criticalSuccess&&a(o.a.createElement("span",{style:{color:"khaki"}},"Critical hit!"))):e.skill.id===Bt.id?a(o.a.createElement("span",null,pi(t),"'s attack missed.")):a(o.a.createElement("span",null,hi("#cda5f3",e.skill.name)," ",e.skill.target?"missed":"failed",".")),e.dodgeSuccess&&a(o.a.createElement("span",null,pi(n)," dodged ",pi(t),"'s attack")),n.stats.health<=n.healthOffset+e.totalDamage&&a(hi("lightcoral","".concat(n.name," died")))}(e,n,r,a);var d=e.skill,u=s.healthOffset+e.totalDamage,g=l.focusOffset+d.focusCost,h=function(t,n){return e.hitSuccess?Object(f.a)({},de(t)(ke(n)),{traits:[].concat(Object(m.a)(t.traits),Object(m.a)(n.map((function(e){return Object(f.a)({},e,{healthOffset:0,focusOffset:0})}))))}):t};c(r.id,(function(e){return Object(f.a)({},e,{},h(e,d.targetTraits),{inspected:d.inspected||e.inspected,healthOffset:u})})),c(n.id,(function(e){return Object(f.a)({},e,{},h(e,d.sourceTraits),{focusOffset:g})})),d.combineWeaponDamage&&e.hitSuccess&&ji("onHit",n,l,d,a,c),d.combineWeaponDamage&&e.criticalSuccess&&ji("onCrit",n,l,d,a,c)}})),i.forEach((function(e){var t=se(e);r(Object(f.a)({},e,{traits:t.dead?e.traits:e.traits.map((function(e){return Object(f.a)({},e,{duration:e.duration-1})})).filter((function(e){return 0!==e.duration}))}),e.partyId)})),i.map((function(e){return se(e)}))},ji=function(e,t,n,a,r,i){var c=function(e,t){return function(n){if(e.processed)throw new Error("No Processed Characters [checkEvent]");var a=t.events[n];if(t.combineWeaponDamage){var r=e.weapon;if(!r)return a;var i=r.events[n];return i?[].concat(Object(m.a)(a||[]),Object(m.a)(i)):a}return a}}(n,a)(e),l=a.combineWeaponDamage&&!a.events[e]?t.weapon.name:a.name;if(c){var s=ke(c),d=t.healthOffset-s.healthOffset,u=d<=0?s.healthOffset+d:s.healthOffset;0!==u&&r(o.a.createElement("span",null,pi(t)," ",yi(u)," ",u," HP from ",l,"."));var h=t.focusOffset-s.focusOffset,p=h<0?s.focusOffset+h:s.focusOffset;0!==p&&r(o.a.createElement("span",null,pi(t)," ",yi(p)," ",p," FP from ",l,".")),g(s.abilitiesModifiers).forEach((function(e){var n=s.abilitiesModifiers[e];0!==n&&r(o.a.createElement("span",null,pi(t)," ",yi(n)," ",n," ",e," from ",l,"."))})),i(n.id,(function(e){return Object(f.a)({},de(e)(s),{traits:[].concat(Object(m.a)(e.traits),Object(m.a)(c.map((function(e){return Object(f.a)({},e,{healthOffset:0})}))))})}))}},Ci=function(e){return e&&0===e.characters.filter((function(e){return e.healthOffset<e.stats.health})).length},Si=Object(y.a)(),Ri=function(e){return e.partyId===un},Ti=o.a.createContext({lines:[],addLine:function(e){},clear:function(){}}),Ii=function(){return Object(i.useContext)(Ti)},qi=function(e){var t=e.children,n=Object(i.useState)([]),a=Object(d.a)(n,2),r=a[0],c=a[1];return o.a.createElement(Ti.Provider,{value:{lines:r,addLine:function(e){return c((function(t){return[].concat(Object(m.a)(t),[e])}))},clear:function(){return c([])}}},t)},Mi=n(77),Pi=n.n(Mi),Wi={isOpen:!1,contents:null,callback:null,payload:null,blocking:!1,style:{}},zi="modalContext/OPEN",Bi="modalContext/CLOSE",Di=function(e,t,n){return{type:zi,contents:e,style:t,blocking:n}},Ai=function(){return{type:Bi}},Gi=function(e){return{type:"modalContext/SET_PAYLOAD",payload:e}},Hi=function(e){return{type:"modalContext/SET_CONTENTS",contents:e}},Li=function(e){return{type:"modalContext/SET_CALLBACK",callback:e}},$i=function(e){return{type:"modalContext/SET_BLOCKING",blocking:e}},Ui=function(e){return{type:"modalContext/SET_STYLE",style:e}},Fi=(r={},Object(u.a)(r,zi,(function(e,t){return Object(f.a)({},e,{isOpen:!0,contents:t.contents?t.contents:e.contents,style:t.style?t.style:e.style||{},blocking:t.blocking||!1})})),Object(u.a)(r,Bi,(function(e){return Object(f.a)({},e,{isOpen:!1})})),Object(u.a)(r,"modalContext/SET_PAYLOAD",(function(e,t){return Object(f.a)({},e,{payload:t.payload})})),Object(u.a)(r,"modalContext/SET_CONTENTS",(function(e,t){return Object(f.a)({},e,{callback:null,payload:null,contents:t.contents,blocking:!1,style:{}})})),Object(u.a)(r,"modalContext/SET_CALLBACK",(function(e,t){return Object(f.a)({},e,{callback:t.callback})})),Object(u.a)(r,"modalContext/SET_BLOCKING",(function(e,t){return Object(f.a)({},e,{blocking:t.blocking})})),Object(u.a)(r,"modalContext/SET_STYLE",(function(e,t){return Object(f.a)({},e,{style:t.style})})),r),Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0,n=Fi[t.type];return n?n(e,t):e},Ni=o.a.createContext({open:function(){return null},close:function(){return null},setBlocking:function(){return null},setPayload:function(){return null},setContents:function(){return null},setCallback:function(){return null},setStyle:function(){return null}}),_i=function(){return Object(i.useContext)(Ni)},Vi=function(e,t){return{isOpen:e.isOpen,open:function(e,n,a){return t(Di(e,n,a))},close:function(n){e.callback&&e.callback(n||e.payload),t(Ai())},setPayload:function(e){return t(Gi(e))},setContents:function(e){return t(Hi(e))},setCallback:function(e){return t(Li(e))},setBlocking:function(e){return t($i(e))},setStyle:function(e){return t(Ui(e))}}};Pi.a.setAppElement("#root");var Yi=function(e){var t=e.children,n=Object(i.useReducer)(Ki,Wi),a=Object(d.a)(n,1)[0],r=Object(i.useMemo)((function(){return Vi.apply(void 0,Object(m.a)(n))}),[n]);return o.a.createElement(Ni.Provider,{value:r},t,o.a.createElement(Pi.a,{parentSelector:function(){return document.querySelector("#content-root")},isOpen:a.isOpen,onRequestClose:function(){a.blocking||r.close()},style:{content:{backgroundColor:"#111",color:"white",width:400,margin:"0 auto",bottom:"unset",borderColor:"#555"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}},a.contents&&o.a.createElement(a.contents,null)))},Xi=["weapon","weapon","armor","armor","armor","armor"],Ji={weapon:function(){return function(e){var t=g(e);return(e[Pe(t)]||function(){return re})()}({axe:function(){return st("axe")},greataxe:function(){return st("greataxe")},flail:function(){return st("flail")},daggers:function(){return st("daggers")},katana:function(){return st("katana")},rapier:function(){return st("rapier")},wand:function(){return st("wand")},staff:function(){return st("staff")},elementalSword:function(){return st("elementalSword")},elementalGreatsword:function(){return st("elementalGreatsword")},sword:function(){return st("sword")},greatsword:function(){return st("greatsword")},pistol:function(){return st("pistol")},crossbow:function(){return st("crossbow")}})},armor:function(){return function(e){var t=g(e);return(e[Pe(t)]||function(){return tt("ring")})()}({helmet:function(){return tt("helmet")},cowl:function(){return tt("cowl")},chestplate:function(){return tt("chestplate")},robe:function(){return tt("robe")},ring:function(){return tt("ring")},boots:function(){return tt("boots")},gloves:function(){return tt("gloves")}})},offhand:function(){return ne("offhand")}},Qi=function(){return Ji[Pe(Xi)]()},Zi=function(e){var t=e.reset,n=_i().close,a=Object(i.useState)(),r=Object(d.a)(a,2),c=r[0],l=r[1],s=Object(i.useMemo)((function(){return[Qi(),Qi(),Qi(),Qi(),Qi()]}),[]);return console.log(s),o.a.createElement(qn,{$direction:"column"},o.a.createElement("h1",{style:{textAlign:"center",marginTop:0}},"Victory!"),o.a.createElement(qn,{$direction:"column",style:{alignItems:"center"}},o.a.createElement("span",{style:{marginBottom:20,fontFamily:"monospace"}},"Each character gained 5 XP"),o.a.createElement("span",null,"Choose a Reward"),o.a.createElement(qn,null,s.map((function(e){return o.a.createElement("div",{style:{border:"2px solid transparent",borderColor:c===e.id?"white":"transparent"}},o.a.createElement(Vr,{item:e,size:60,onClick:function(){return l(e.id)}}))})))),o.a.createElement(qn,{style:{marginTop:20,alignItems:"center"}},o.a.createElement(mr,{disabled:void 0===c,onClick:function(){t(!1),n(s.find((function(e){return e.id===c})))}},"Next Battle")))},eo=function(e){var t=e.wins,n=Object(s.f)(),a=_i().close;return o.a.createElement(qn,{$direction:"column"},o.a.createElement("h1",{style:{textAlign:"center",marginTop:0}},"You Died..."),o.a.createElement("span",null,"But you won ",t," times."),o.a.createElement(qn,null,o.a.createElement(mr,{onClick:function(){a(),n.push("/characters/")}},"Back to Characters")))},to={rounds:[],userParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawUserParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},enemyParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawEnemyParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},parties:[],done:!1,characterSkills:{},characterTargets:{},setCharacterSkill:function(e,t){},setCharacterTarget:function(e,t){},next:function(){},reset:function(e){}},no=Object(i.createContext)(to),ao=function(){return Object(i.useContext)(no)},ro=function(e){var t=e.children,n=yn(),a=n.parties,r=n.rawParties,c=n.userParty,l=n.rawUserParty,g=n.upsertParty,h=n.upsertCharacter,p=n.upsertItem,b=On(),y=b.checkCharacter,v=b.rollCharacter,E=Ii(),w=E.addLine,x=E.clear,O=Object(i.useState)([]),k=Object(d.a)(O,2),j=k[0],C=k[1],S=Object(i.useState)(0),R=Object(d.a)(S,2),T=R[0],I=R[1],q=Object(i.useState)({}),M=Object(d.a)(q,2),P=M[0],W=M[1],z=Object(i.useState)({}),B=Object(d.a)(z,2),D=B[0],A=B[1],G=function(e,t){return W((function(n){return Object(f.a)({},n,Object(u.a)({},e,t))}))},H=function(e,t){return A((function(n){return Object(f.a)({},n,Object(u.a)({},e,t))}))},L=Object(i.useState)(!1),$=Object(d.a)(L,2),U=$[0],F=$[1],K=Object(i.useState)(!1),N=Object(d.a)(K,2),_=N[0],V=N[1],Y=r.filter((function(e){return e.id===Si}))[0],X=a.filter((function(e){return e.id===Si}))[0],J=_i(),Q=J.open,Z=J.setCallback,ee=Object(s.f)(),te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(),e||(F(!1),C([]),g(gi(Si)),g(Object(f.a)({},l,{characters:l.characters.map((function(e){return Object(f.a)({},e,{traits:[],partyId:un})}))})))};Object(i.useEffect)((function(){return g(gi(Si)),g(Object(f.a)({},l,{characters:l.characters.map((function(e){return Object(f.a)({},e,{partyId:un,dead:!1,healthOffset:0,focusOffset:0,traits:[]})}))})),V(!0),function(){te(!0)}}),[]);var ne=function(e){F(!0),e?(Q((function(){return o.a.createElement(Zi,{reset:te})}),{},!0),Z((function(e){p(e),l.characters.forEach((function(e){h(Object(f.a)({},e,{resources:Object(f.a)({},e.resources,{characterPoints:e.resources.characterPoints+5})}))}))}))):Q((function(){return o.a.createElement(eo,{wins:T})}),{},!0)};return Object(i.useEffect)((function(){_&&(Ci(c)&&!U?(Z((function(){ee.push("/characters")})),ne(!1)):Ci(X)&&!U&&(ne(!0),I((function(e){return e+1}))))}),[c,X]),Object(i.useEffect)((function(){if(j.length>0){var e=ki(j,l,Y,w,h);!function(e,t,n){e.forEach((function(e){var a=e.skills.find((function(n){return n.id===t[e.id]}))||Bt,r=e.stats.focus-e.focusOffset;a.focusCost>r&&n(e.id,Bt.id)}))}(e,P,G),function(e,t,n){e.forEach((function(a){var r=e.find((function(e){return e.id===t[a.id]}));r&&r.dead&&n(a.id,void 0)}))}(e,D,H)}}),[j]),o.a.createElement(no.Provider,{value:{rounds:j,userParty:c,rawUserParty:l,enemyParty:X,rawEnemyParty:Y,parties:a,done:U,characterSkills:P,characterTargets:D,setCharacterSkill:G,setCharacterTarget:H,reset:te,next:function(){if(X&&c){var e=function(e,t,n,a){return function(r,i,o){var c=[].concat(Object(m.a)(r.characters),Object(m.a)(i.characters)),l={};return c.filter((function(e){return!e.dead})).sort((function(e,t){return t.stats.agility-e.stats.agility})).forEach((function(r,i){var c=o.find((function(e){return e.id===r.partyId})),s=o.find((function(e){return e.id!==r.partyId}));if(c&&s){var d=Se(s).characters.filter((function(e){return!e.dead})),m=d.find((function(e){return e.id===t[r.id]}))||Pe(d);m&&(l=Object(f.a)({},l,Object(u.a)({},r.name,Object(f.a)({},Oi(e,n,a)(m,r),{index:i}))))}})),l}}(P,D,y,v)(c,X,r);C((function(t){return[].concat(Object(m.a)(t),[e])}))}}}},t)},io=n(177),oo=n.n(io),co=function(e){var t=e.activeTargetId,n=e.showRandom,a=void 0===n||n,r=e.onClick,i=ao().enemyParty,c=Sn(),l=function(e){return t===e},s=i?i.characters:[];return o.a.createElement(qn,null,a&&o.a.createElement(mr,{disabled:c.character.id!==Ce.id&&c.character.dead,onClick:function(){return!c.character.dead&&r(void 0)},style:{border:"none"},substyle:Object(f.a)({cursor:c.character.dead?"default":"pointer",background:c.character.dead?"#444":"#111",padding:0,height:36,width:36,boxSizing:"border-box",borderColor:"transparent",opacity:void 0===t?1:.5,margin:0},l(void 0)?{borderColor:"turquoise"}:{})},o.a.createElement("img",{alt:"random",src:oo.a,height:34,width:34,style:{height:34,width:34,boxSizing:"border-box",border:"1px solid black"}})),s.map((function(e){return o.a.createElement(lo,{key:e.id,name:e.name,onClick:function(){return r(e.id)},disabled:c.character.id!==Ce.id&&c.character.dead||e.dead,style:Object(f.a)({padding:0,height:36,width:36,boxSizing:"border-box",margin:0,borderColor:"transparent",opacity:c.character.id!==Ce.id&&c.character.dead||e.dead?.5:l(e.id)?1:.7},l(e.id)?{borderColor:"turquoise"}:{})})})),o.a.createElement(qn,{$full:!0}))},lo=function(e){var t=e.name,n=e.disabled,a=e.style,r=e.onClick;return o.a.createElement(dr,null,(function(e){var i=e.isHovering;return o.a.createElement(Ar.a,{isOpen:i,direction:"up",tagName:"div",padding:"0",arrow:!1,content:o.a.createElement(ur,null,t)},o.a.createElement(ur,{onClick:function(){return!n&&r()},disabled:n,substyle:Object(f.a)({borderColor:i?"#999":"#555",padding:"4px",cursor:n?"default":"pointer",background:n?"#444":"#111"},a),style:{border:"none"}},o.a.createElement("img",{alt:"profile",src:"https://picsum.photos/seed/".concat(t,"/60/60"),style:{height:34,width:34,boxSizing:"border-box",border:"1px solid black"}})))}))},so=function(e){var t=e.showEdit,n=void 0!==t&&t,a=e.showInspect,r=void 0!==a&&a,c=e.showWeaponInspect,l=void 0!==c&&c,s=e.showSkills,u=void 0!==s&&s,m=e.width,g=Sn(),h=yn().deleteCharacter,p=ao(),b=p.characterSkills,y=p.setCharacterSkill,E=p.characterTargets,w=p.setCharacterTarget,x=g.rawCharacter,O=g.onChange,k=e.character||g.character,j=Object(i.useState)(!1),C=Object(d.a)(j,2),S=C[0],R=C[1],T=Object(i.useState)(k.name),I=Object(d.a)(T,2),q=I[0],M=I[1],P=v(k.stats.health-k.healthOffset),W=v(k.stats.focus-k.focusOffset);return Object(i.useEffect)((function(){M(k.name)}),[k.name]),o.a.createElement(ur,{style:{minWidth:m||350,transition:"all 1s",border:"2px solid black"},substyle:{padding:0}},o.a.createElement(qn,{$direction:"column"},o.a.createElement(qn,{style:{padding:4,background:"linear-gradient(0deg, rgba(34,34,34,1) 0%, rgba(51,51,51,1) 100%)"}},o.a.createElement(qn,{$full:!0},o.a.createElement(ur,{style:{marginRight:10,height:64,width:64},substyle:{padding:0,backgroundColor:"#111",border:"none"}},k.dead?o.a.createElement(qn,{style:{justifyContent:"center",alignItems:"center",height:60}},o.a.createElement(ir,{src:ti.a,size:48})):o.a.createElement("img",{alt:"profile",src:"https://picsum.photos/seed/".concat(k.name,"/60/60"),style:{height:60,width:60,border:"1px solid rgba(255,255,255,0.5)"}})),S?o.a.createElement("div",null,o.a.createElement("input",{value:q,onChange:function(e){return M(e.target.value)}})):o.a.createElement(qn,{$direction:"column"},o.a.createElement("h2",{style:{margin:0,textShadow:"1px 1px 1px black",fontSize:18}},k.name),o.a.createElement(Mn,null),o.a.createElement(hr,{style:{fontSize:10,color:"rgba(255,255,255,0.24)"}},k.abilities.strength," ",k.abilities.dexterity," ",k.abilities.intelligence," ",k.abilities.vigor),o.a.createElement(hr,{style:{fontSize:10,color:"rgba(255,255,255,0.24)"}},k.stats.will," ",k.stats.perception," ",k.stats.agility," ",k.stats.accuracy," ",k.stats.evade))),l&&o.a.createElement(Nr,{direction:"right",content:o.a.createElement(_r,{showRequirement:!1,showEquipButton:!1,weapon:k.weapon})},o.a.createElement(fr,null,o.a.createElement(ir,{src:Wn.a,size:18}))),r&&o.a.createElement(Nr,{direction:"right",content:o.a.createElement(Zr,null)},o.a.createElement(fr,null,o.a.createElement(ir,{src:Jr.a,size:18}))),n&&!S&&o.a.createElement(mr,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return R((function(e){return!e}))}},o.a.createElement(ir,{src:ai.a,size:18})),S&&o.a.createElement(o.a.Fragment,null,o.a.createElement(mr,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){O(Object(f.a)({},x,{name:q})),R((function(e){return!e}))}},o.a.createElement(ir,{src:ii.a,size:18})),o.a.createElement(mr,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){h(k.id)}},o.a.createElement(ir,{src:ci.a,size:18})))),u&&o.a.createElement(qn,{$direction:"column",style:{backgroundColor:"#1a1a1a",boxShadow:"inset 0px 0px 15px black",width:"calc(100% - 16px)",padding:"4px 8px",borderTop:"1px solid #555"}},o.a.createElement(hr,{style:{color:"rgba(255,255,255,0.24)",marginBottom:2,fontSize:12,fontWeight:"normal"}},"SKILLS"),o.a.createElement(si,{activeSkillId:b[k.id],skills:k.skills,onClick:function(e){return y(k.id,e)}}),o.a.createElement(hr,{style:{color:"rgba(255,255,255,0.24)",marginBottom:2,marginTop:4,fontSize:12,fontWeight:"normal"}},"TARGETS"),o.a.createElement(co,{activeTargetId:E[k.id],onClick:function(e){return w(k.id,e)}})),o.a.createElement(Qr,{name:"Health",color:"#8f4e4d",max:k.stats.health,value:P,height:15},P,"/",k.stats.health),o.a.createElement(Qr,{name:"Focus",color:"#517e4e",max:k.stats.focus,value:W,height:15},W,"/",k.stats.focus)))},uo={logKey:void 0,sidebarKey:void 0,setLogKey:function(){},setSidebarKey:function(){}},fo=o.a.createContext(uo),mo=function(){return Object(i.useContext)(fo)},go=function(e){var t=e.children,n=Object(i.useState)(),a=Object(d.a)(n,2),r=a[0],c=a[1],l=Object(i.useState)(),s=Object(d.a)(l,2),u=s[0],f=s[1];return o.a.createElement(fo.Provider,{value:{logKey:r,sidebarKey:u,setLogKey:c,setSidebarKey:f}},t)},ho=function(e){var t=e.skill;return o.a.createElement(ur,{style:{height:64,width:64},substyle:{padding:0}},o.a.createElement(dr,null,(function(e){var n=e.isHovering;return o.a.createElement(Ar.a,{isOpen:n,direction:"down",tagName:"div",padding:"0",arrow:!1,content:o.a.createElement(li,{skillId:t.id,skill:t})},o.a.createElement("img",{src:t.imgSrc,height:60,width:60}))})))},po=n(18),bo={background:"#111",boxShadow:"inset 0 0 3px black"},yo={background:"#555"},vo=function(){var e,t=Sn().character,n=yn().userParty;return o.a.createElement(ur,{style:{borderLeft:"none",borderRight:"none"},substyle:{height:61,display:"flex",alignItems:"center",padding:"0px 8px",borderColor:"rgba(255,255,255,0.4)",borderTop:"none",borderLeft:"none",borderRight:"none",background:"rgba(255,255,255,0.4)"}},(e=n.characters,e.sort((function(e,t){return e.id.localeCompare(t.id)}))).map((function(e){return o.a.createElement(ur,{tag:po.b,to:"/characters/".concat(e.id),style:{marginRight:4},substyle:Object(f.a)({padding:"10px",display:"flex",justifyContent:"center",alignItems:"center",textShadow:"1px 1px 2px black"},(n=e.id,t.id===n?bo:yo))},o.a.createElement(hr,null,e.name));var n})))},Eo=n(178),wo=n.n(Eo),xo=function(){var e=Object(s.h)().id,t=Object(s.f)(),n=yn(),a=n.rawUserParty,r=n.setActiveCharacterId,c=mo(),l=c.setLogKey,d=(c.setSidebarKey,Object(i.useMemo)((function(){return a.characters.find((function(t){return t.id===e}))}),[e,a]));return Object(i.useEffect)((function(){d?r(d.id):t.push("/characters/".concat(a.characters[0].id))}),[e]),Object(i.useEffect)((function(){return l("items"),function(){l(void 0),r(null)}}),[]),d?o.a.createElement(Tn,null,o.a.createElement(jn,null,o.a.createElement(qn,{$direction:"column",$full:!0,style:{background:"url(".concat(wo.a,") center center"),backgroundSize:"cover"}},o.a.createElement(vo,null),o.a.createElement(qn,{style:{margin:10,flex:1}},o.a.createElement(qn,{$direction:"column",style:{marginRight:10}},o.a.createElement(so,{showEdit:!0}),o.a.createElement(qn,null,o.a.createElement(gr,{id:"characterPoints"}),o.a.createElement(gr,{id:"weaponHands"}),o.a.createElement(gr,{id:"fingers"}),o.a.createElement(gr,{id:"heads"}),o.a.createElement(gr,{id:"bodies"}),o.a.createElement(gr,{id:"hands"}),o.a.createElement(gr,{id:"feet"})),o.a.createElement(qn,null,o.a.createElement(qn,{$direction:"column"},o.a.createElement(br,{id:"strength"}),o.a.createElement(br,{id:"dexterity"}),o.a.createElement(br,{id:"intelligence"}),o.a.createElement(br,{id:"vigor"})),o.a.createElement(qn,{$direction:"column"},o.a.createElement(vr,{id:"health"}),o.a.createElement(vr,{id:"focus"}),o.a.createElement(vr,{id:"will"}),o.a.createElement(vr,{id:"perception"}),o.a.createElement(vr,{id:"agility"}),o.a.createElement(vr,{id:"accuracy"}),o.a.createElement(vr,{id:"evade"})),o.a.createElement(qn,{$direction:"column"},o.a.createElement(Er,{id:"slashing"}),o.a.createElement(Er,{id:"piercing"}),o.a.createElement(Er,{id:"fire"}),o.a.createElement(Er,{id:"blood"}),o.a.createElement(Er,{id:"light"}),o.a.createElement(Er,{id:"dark"}))),o.a.createElement(ur,{substyle:{width:320,padding:"4px 8px",boxShadow:"inset 0px 0px 10px black"}},o.a.createElement(hr,{style:{fontWeight:"bold",color:"rgba(255,255,255,0.24)",background:"#222",marginBottom:2,fontSize:14}},"SKILLS"),o.a.createElement(qn,{style:{flexWrap:"wrap"}},d.skills.filter((function(e){return e.id!==Bt.id&&e.id!==Dt.id})).map((function(e){return o.a.createElement("div",{style:{padding:2.5}},o.a.createElement(ho,{key:e.id,skill:e}))}))))),o.a.createElement(qn,null,o.a.createElement("div",{style:{marginRight:10}},o.a.createElement(_r,{showEquipButton:!0,showRequirement:!1}),d.equippedItems.map((function(e){return o.a.createElement(zr,{key:e.id,item:e,showRequirementCheck:!1,showCollapseButton:!1})}))),o.a.createElement(Yr,null)))))):null},Oo=function(e){var t=e.roll,n=t,a=void 0!==n.goal,r=a?n.result:void 0;return o.a.createElement("div",{style:{fontFamily:"monospace"}},a&&r&&hi("lightgreen","[PASSED] "),a&&!r&&hi("lightcoral","[FAILED] "),!a&&hi("turquoise","[STATIC] "),a&&o.a.createElement("span",null,"(",n.goal,") "),o.a.createElement("span",null,t.output))},ko=n(179),jo=n.n(ko),Co=n(180),So=n.n(Co),Ro=n(181),To=n.n(Ro),Io=n(182),qo=n.n(Io),Mo=o.a.createContext({a:null,b:null,compareChecks:function(e,t){return Or},compareRolls:function(e,t){return Or},compareValues:function(e,t){return Or}});function Po(){return Object(i.useContext)(Mo)}function Wo(e){var t=e.a,n=e.b,a=e.children,r=On(),i=r.execRoll,c=r.getProbability;return o.a.createElement(Mo.Provider,{value:{a:t,b:n,compareChecks:function(e,t){var n=c(e),a=c(t);return Cr(n,a)},compareRolls:function(e,t){var n=i(e,!1).averageTotal,a=i(t,!1).averageTotal;return Cr(n,a<0?0:a)},compareValues:function(e,t){return Cr(e,t)}}},a)}var zo=function(e){var t=e.weapon,n=Sn().character;return o.a.createElement(Wo,{a:t,b:n.weapon},o.a.createElement(Bo,null))},Bo=function(e){var t=Po(),n=t.compareChecks,a=t.compareRolls,r=t.compareValues,i=t.a||re,c=t.b||re,l=n(i.requirementCheck,c.requirementCheck),s=n(i.accuracyCheck,c.accuracyCheck),d=r(c.cost,i.cost);return o.a.createElement(_r,{weapon:i,showEquipButton:!1,requirementCompare:l,accuracyCompare:s,damageCompare:function(e){var t=i.damageRolls[e],n=c.damageRolls[e];return n?a(t,n):kr},traitCompare:function(e){var t=Oe(ke(i.traits),e),n=Oe(ke(c.traits),e);return r(t,n)},costComare:d})},Do=function(e){var t=e.item,n=Sn().character;if("ring"===t.armorType)return o.a.createElement(zr,{item:t,showEquipButton:!1,showRequirementCheck:!0,showCollapseButton:!1});var a=[].concat(Object(m.a)(n.armor),Object(m.a)(n.equippedItems)).find((function(e){return"armor"===t.type?"armor"===e.type&&e.resource===t.resource:"armor"!==e.type&&e.resource===t.resource}));return o.a.createElement(Wo,{a:t,b:a||ne("armor")},o.a.createElement(Ao,null))},Ao=function(e){var t=Po(),n=t.compareChecks,a=t.compareRolls,r=t.compareValues,i=t.a||ne("armor"),c=t.b||ne("armor"),l=n(i.requirementCheck,c.requirementCheck),s=r(c.cost,i.cost);return o.a.createElement(zr,{item:i,showEquipButton:!1,requirementCompare:l,resistancesCompare:function(e){var t=i.damageResistances[e],n=c.damageResistances[e];return n?a(t,n):kr},traitCompare:function(e){var t=Oe(ke(i.traits),e),n=Oe(ke(c.traits),e);return r(t,n)},costComare:s})},Go=function(e){var t=e.onClick;return o.a.createElement(qn,null,o.a.createElement(Ho,{rarity:"common",onClick:t}),o.a.createElement(Ho,{rarity:"uncommon",onClick:t}),o.a.createElement(Ho,{rarity:"rare",onClick:t}),o.a.createElement(Ho,{rarity:"legendary",onClick:t}),o.a.createElement(Ho,{rarity:"unique",onClick:t}),o.a.createElement(Ho,{rarity:"mythic",onClick:t}),o.a.createElement(Ho,{rarity:"set",onClick:t}),o.a.createElement(Ho,{type:"weapon",onClick:t},"W"),o.a.createElement(Ho,{type:"armor",onClick:t},"A"),o.a.createElement(Ho,{onClick:t},"R"))},Ho=function(e){var t=e.rarity,n=e.type,a=e.children,r=e.onClick,i=t?xr()(Pr[t]).fade(.75).hsl().toString():"#222",c=t?xr()(Pr[t]).fade(.5).hsl().toString():"#555";return o.a.createElement(ur,{tag:"button",style:{width:40,height:40},substyle:{background:i,cursor:"pointer",borderColor:c,boxShadow:"inset 0 0 3px black",display:"flex",padding:0,justifyContent:"center",alignItems:"center",margin:0},onClick:function(){return r(t,n)}},a)},Lo=function(e){var t=e.item,n=e.rawCharacter,a=e.onEquip,r=Object(i.useState)(!1),c=Object(d.a)(r,2),l=c[0],s=c[1],u=t.type,f=t.equippable,m="armor"===u,g="weapon"===u,h=Object(i.useMemo)((function(){return he(n)(t,!g)}),[t,n,g]),p=Pr[t.rarity],b=Object(i.useMemo)((function(){return g?o.a.createElement(Gr,{weapon:t,size:18,fill:p}):m?o.a.createElement(Mr,{item:t,size:18,fill:p}):f?o.a.createElement(Wr,{item:t,size:18,fill:p}):void 0}),[t,m,f,g,p]);return o.a.createElement("div",{onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},o.a.createElement(Ar.a,{isOpen:l,direction:"bottom",tagName:"div",padding:"0",arrow:!1,content:g?o.a.createElement(zo,{weapon:t}):f?o.a.createElement(Do,{item:t}):"item"},o.a.createElement(ur,{style:{width:40,height:40,background:h?"#222":"#333",boxShadow:"inset 0 0 ".concat(h?"12px":"3px"," ").concat("common"!==t.rarity&&h?xr()(p).fade(.5).hsl().toString():"black")},substyle:{background:"transparent",cursor:h?"pointer":"default",borderColor:l?p:"common"===t.rarity?"#555":xr()(p).fade(.5).hsl().toString(),boxShadow:h?"inset 0 0 3px black":"none",display:"flex",padding:0,justifyContent:"center",alignItems:"center",margin:0,opacity:h?1:.5},onClick:function(e){e.preventDefault(),e.stopPropagation(),f&&a(t.id)}},b)))},$o=function(e){var t=e.activeKey,n=e.setActiveKey,a=e.options,r=e.direction,c=void 0===r?"right":r,l=Object(i.useMemo)((function(){return a.find((function(e){return e.key===t}))}),[t]);return o.a.createElement(ur,{substyle:{display:"flex",flexDirection:"right"===c?"row":"row-reverse",padding:0}},o.a.createElement(qn,{$direction:"column",style:{width:60}},a.map((function(e,a){return o.a.createElement("div",{key:e.key,style:{height:60,width:60,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxSizing:"border-box",backgroundColor:t===e.key?"#111":"transparent",borderTop:0===a?"none":"1px solid #555",borderBottom:"1px solid black",borderRight:"right"===c&&t&&t!==e.key?"1px solid #555":"none",borderLeft:"left"===c&&t&&t!==e.key?"1px solid #555":"none"},onClick:function(a){a.preventDefault(),a.stopPropagation(),n(t===e.key?void 0:e.key)}},o.a.createElement(ir,{src:e.icon,size:24}))})),o.a.createElement(qn,{$full:!0,style:{borderTop:"1px solid #555",borderRight:"right"===c&&void 0!==t?"1px solid #555":"none",borderLeft:"left"===c&&void 0!==t?"1px solid #555":"none"}})),l&&o.a.createElement("div",{style:{padding:8,backgroundColor:"#111",overflow:"auto"}},o.a.createElement(l.Component,null)))},Uo=[{key:"roll-log",icon:Ir.a,Component:function(e){var t=On(),n=t.history,a=t.execRoll,r=Object(i.useState)(""),c=Object(d.a)(r,2),l=c[0],s=c[1],u=Object(i.useState)([]),f=Object(d.a)(u,2),g=f[0],h=f[1],p=Object(i.useState)(0),b=Object(d.a)(p,2),y=b[0],v=b[1],E=function(){try{a({string:l,keys:[],modifier:0},!0,!0),h([].concat(Object(m.a)(g),[l])),v(g.length)}catch(e){alert(e)}finally{s("")}};return o.a.createElement(qn,{$direction:"column",$full:!0,style:{width:400}},n.length>0?o.a.createElement(qn,{$full:!0,$direction:"column",style:{overflow:"auto",padding:10}},n.map((function(e){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(Oo,{key:e.id,roll:e}))}))):o.a.createElement(qn,{$full:!0}),o.a.createElement(qn,null,o.a.createElement("input",{value:l,style:{flex:1},onChange:function(e){return s(e.target.value)},onKeyDown:function(e){13===e.keyCode&&E(),38===e.keyCode&&(s(g[y]||""),v(y-1))}}),o.a.createElement("button",{onClick:E},o.a.createElement(ir,{src:Ir.a,size:18,fill:"#4bebc6"}))))}},{key:"attack-log",icon:jo.a,Component:function(){var e=Ii(),t=e.lines,n=e.clear,a=Object(i.useRef)(null);return Object(i.useEffect)((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})}),[t]),o.a.createElement(qn,{$direction:"column",$full:!0,style:{overflow:"auto",padding:10,overflowY:"auto"}},o.a.createElement("button",{onClick:n,style:{marginBottom:20}},"Clear Log"),o.a.createElement(qn,{$direction:"column",$full:!0,style:{color:"rgba(200,200,200, 1)",background:"#111",width:380,overflowX:"auto"}},t.map((function(e,t){return o.a.createElement("pre",{key:t},e)})),o.a.createElement("div",{ref:a})))}},{key:"items",icon:So.a,Component:function(){var e=Sn().rawCharacter,t=yn(),n=t.userParty,a=t.equipItem,r=Object(i.useState)(),c=Object(d.a)(r,2),l=c[0],s=c[1],u=Object(i.useState)(),f=Object(d.a)(u,2),m=f[0],g=f[1],h=function(e){return l?e.type===l:!m||e.rarity===m},p=n.items.filter((function(e){return"armor"!==e.type&&"weapon"!==e.type})).filter(h),b=n.items.filter((function(e){return"weapon"===e.type})).filter(h),y=n.items.filter((function(e){return"armor"===e.type})).filter(h);return o.a.createElement(qn,{style:{},$direction:"column"},o.a.createElement(Go,{onClick:function(e,t){e&&g(e),t&&s(t),e||t||(g(void 0),s(void 0))}}),o.a.createElement("div",{style:{marginTop:10}},b.length>0&&o.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"WEAPONS"),o.a.createElement(qn,{style:{flexWrap:"wrap",width:400}},b.map((function(t){return o.a.createElement(Lo,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})}))),y.length>0&&o.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"ARMOR"),o.a.createElement(qn,{style:{flexWrap:"wrap",width:400}},y.map((function(t){return o.a.createElement(Lo,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})}))),p.length>0&&o.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"OTHER"),o.a.createElement(qn,{style:{flexWrap:"wrap",width:400}},p.map((function(t){return o.a.createElement(Lo,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})})))))}},{key:"skills",icon:To.a,Component:function(){var e=yn().userParty;return o.a.createElement(qn,{style:{width:320,flexWrap:"wrap"}},e.skills.map((function(e){return o.a.createElement(ho,{skill:e})})))}},{key:"mods",icon:qo.a,Component:function(){var e=Sn().rawCharacter,t=yn(),n=t.userParty,a=t.equipMod;return o.a.createElement(qn,{$direction:"column"},n.mods.map((function(t){return o.a.createElement(Fr,{key:t.id,mod:t,onEquip:function(t){a(e.id,t)}})})))}}],Fo=function(e){var t=mo(),n=t.logKey,a=t.setLogKey;return o.a.createElement($o,{activeKey:n,setActiveKey:a,options:Uo,direction:"left"})},Ko=function(e,t){return o.a.createElement(s.a,{path:e},o.a.createElement(t,null))},No=n(183),_o=[{key:"characters",icon:n.n(No).a,Component:function(){return o.a.createElement(Yo,null)}}],Vo=function(e){var t=mo(),n=t.sidebarKey,a=t.setSidebarKey;return o.a.createElement($o,{options:_o,direction:"right",activeKey:n,setActiveKey:a})},Yo=function(){var e=yn(),t=e.userParty,n=e.upsertCharacter,a=Object(s.f)();return o.a.createElement(qn,{$direction:"column"},t.characters.map((function(e){return o.a.createElement(po.b,{key:e.id,to:"/characters/".concat(e.id),style:{padding:8}},e.name)})),t.characters.length<3&&o.a.createElement(mr,{onClick:function(){var e=Vt("new character");n(e),a.push("/characters/".concat(e.id))}},"Add New Character"))},Xo=function(e){var t=e.party,n=yn().upsertCharacter,a=ao(),r=a.userParty,i=a.enemyParty,c=a.characterSkills,l=a.characterTargets;if(!t||!r||!i)return o.a.createElement("div",null,"Loading...");var s=[].concat(Object(m.a)(r.characters),Object(m.a)(i.characters));return o.a.createElement("div",null,t.characters.map((function(e){return o.a.createElement(Rn,{key:e.id,character:e,onChange:function(e){return n(e,t.id)}},o.a.createElement(qn,{style:{position:"relative",opacity:se(e).dead?.5:1}},o.a.createElement(qn,{$direction:"column",$full:!0,style:{marginBottom:10}},o.a.createElement(so,{width:450,showInspect:e.inspected||e.partyId===un||se(e).dead,showWeaponInspect:e.inspected||e.partyId===un||se(e).dead,showSkills:t.id===un})),e.partyId===un&&o.a.createElement(qn,{$direction:"column",style:{fontFamily:"monospace",width:80}},o.a.createElement(Mn,null),o.a.createElement(Jo,{skillId:c[e.id],targetId:l[e.id],characters:s}),o.a.createElement(Mn,null))))})))},Jo=function(e){var t=e.skillId,n=e.targetId,a=e.characters,r=Sn().character,i=r.skills.find((function(e){return e.id===t}))||Bt,c=a.find((function(e){return e.id===n}));if(!c&&i.target)return null;var l=function(e,t,n){if(n){var a=0,r=0,i=xi(e,t.weapon),o=K((function(e){return G(e,t)}))(i,!1).rollResults,c=n.damageResistances;return F(o).filter((function(e){return o[e]})).forEach((function(e){var n=o[e],i=c[e],l=G(i,t,!0);a+=v(n.minTotal-l.maxTotal),r+=v(n.maxTotal-l.minTotal)})),a===r?"".concat(r):"".concat(a,"-").concat(r)}}(i,r,c),s=j(A(i.combineWeaponDamage?r.weapon.accuracyCheck:i.check||Object(f.a)({},I,{keys:[]}),r)),d=i.target&&c?j(A(M(["evade"]),c)):0;return o.a.createElement(ur,{style:{textAlign:"center",fontWeight:"bold",borderLeft:"none"},substyle:{borderLeft:"none",background:"#111"}},l&&"0"!==l&&o.a.createElement("div",{style:{marginBottom:5}},"(",l,")"),o.a.createElement("div",{style:{fontSize:20}},Math.floor(s-d),"%"))},Qo=n(184),Zo=n.n(Qo),ec=function(){var e=ao(),t=e.rawUserParty,n=e.rawEnemyParty,a=e.done,r=e.rounds,c=e.characterTargets,l=e.setCharacterTarget,s=e.next,d=mo().setLogKey,u=Object(i.useMemo)((function(){var e=c[t.characters[0].id];if(t.characters.every((function(t){return c[t.id]===e})))return e}),[c]);return Object(i.useEffect)((function(){return d("attack-log"),function(){d(void 0)}}),[]),o.a.createElement(qn,{$full:!0,$direction:"column",style:{background:"url(".concat(Zo.a,") center center"),backgroundSize:"cover"}},o.a.createElement(ur,{style:{borderLeft:"none",borderRight:"none"},substyle:{height:61,display:"flex",alignItems:"center",padding:"0px 8px",borderColor:"rgba(255,255,255,0.4)",borderTop:"none",borderLeft:"none",borderRight:"none",background:"rgba(255,255,255,0.12)"}},o.a.createElement(Mn,null,o.a.createElement(qn,null,!a&&o.a.createElement(mr,{onClick:function(){return s()},substyle:{padding:8}},"Next Round")),o.a.createElement(Mn,null)),o.a.createElement(qn,{style:{textTransform:"uppercase",fontFamily:"monospace",fontWeight:"bolder",fontSize:24}},"Round ",r.length+1),o.a.createElement(Mn,{style:{display:"flex"}},o.a.createElement(Mn,null),o.a.createElement(qn,{style:{alignItems:"center"}},o.a.createElement("span",{style:{fontFamily:"monospace",color:"rgba(255,255,255,0.4)",fontWeight:"bold",marginRight:10}},"ALL TARGET"),o.a.createElement(co,{activeTargetId:u,showRandom:!1,onClick:function(e){var n;n=e,t.characters.forEach((function(e){l(e.id,n)}))}})))),o.a.createElement(qn,{id:"Combat",$full:!0,style:{padding:10}},o.a.createElement(Xo,{party:t}),o.a.createElement(qn,{$full:!0,$direction:"column"}),o.a.createElement(Xo,{party:n})))},tc={background:"#111",boxShadow:"inset 0 0 3px black"},nc={backgroundColor:"#333"},ac=function(){var e=Object(s.g)().pathname.split("/"),t=function(t){return t.includes(e[1])?tc:nc};return o.a.createElement(ur,{substyle:{height:64,padding:0,alignItems:"center",display:"flex"}},o.a.createElement(pr,{style:{fontSize:24,margin:"0 30px"}},"rpgjs"),o.a.createElement(ur,{tag:po.b,to:"",style:{height:"100%"},substyle:Object(f.a)({padding:"0 20px",display:"flex",justifyContent:"center",alignItems:"center"},t(["","characters"]))},"edit characters"),o.a.createElement(ur,{tag:po.b,to:"/battle",style:{height:"100%"},substyle:Object(f.a)({padding:"0 20px",display:"flex",justifyContent:"center",alignItems:"center"},t(["battle"]))},"enter combat"))},rc=function(){return o.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex"}},o.a.createElement(go,null,o.a.createElement(Yi,null,o.a.createElement(bn,null,o.a.createElement(Tn,null,o.a.createElement(qi,null,o.a.createElement(qn,{$full:!0,$direction:"column",id:"content-root"},o.a.createElement(ac,null),o.a.createElement(qn,{$full:!0,style:{height:"calc(100% - 70px)",width:"100vw",overflow:"auto"}},o.a.createElement(Vo,null),o.a.createElement(qn,{$full:!0,style:{overflow:"auto"}},o.a.createElement(s.c,null,Ko("/battle",(function(){return o.a.createElement(ro,null,o.a.createElement(ec,null))})),Ko("/characters/:id",(function(){return o.a.createElement(xo,null)})),Ko("/",(function(){return o.a.createElement(xo,null)})))),o.a.createElement(Fo,null)))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(302);var ic=n(187),oc=n(185),cc=new ic.a,lc=Object(Ie.e)(Object(Ie.c)({rolls:wn,parties:mn}),Object(Ie.d)(Object(Ie.a)(oc.a)));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Te.a,{store:lc},o.a.createElement(In.a,{value:cc,debug:void 0,debugAfterHydration:!0},o.a.createElement(po.a,null,o.a.createElement(rc,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[189,1,2]]]);
//# sourceMappingURL=main.9470c13f.chunk.js.map