(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],Array(31).concat([function(e,t,n){e.exports=n.p+"static/media/dice-six-faces-six.e202d07a.svg"},,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/sword-brandish.a3fe9ae2.svg"},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/shard-sword.23a923d5.svg"},function(e,t,n){e.exports=n.p+"static/media/spiral-thrust.4b9960c0.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/healing1.e72c5d2c.png"},function(e,t,n){e.exports=n.p+"static/media/fireball.267cc34c.png"},function(e,t,n){e.exports=n.p+"static/media/thunderbolt.bb5d2de7.png"},function(e,t,n){e.exports=n.p+"static/media/dark-blast.155cdf6e.png"},function(e,t,n){e.exports=n.p+"static/media/crippling-blow.f9be9048.png"},function(e,t,n){e.exports=n.p+"static/media/wrath.b68f4b08.png"},function(e,t,n){e.exports=n.p+"static/media/charge.11d38245.png"},function(e,t,n){e.exports=n.p+"static/media/headshot.6549c4b8.png"},function(e,t,n){e.exports=n.p+"static/media/shadow-strike.b9675e5b.png"},function(e,t,n){e.exports=n.p+"static/media/vanish.670b9e64.png"},function(e,t,n){e.exports=n.p+"static/media/inspect.af959ce1.png"},function(e,t,n){e.exports=n.p+"static/media/weapon-attack.1f0b2b4e.png"},function(e,t,n){e.exports=n.p+"static/media/aura.72475924.svg"},function(e,t,n){e.exports=n.p+"static/media/barbute.e93dc754.svg"},function(e,t,n){e.exports=n.p+"static/media/muscular-torso.92dbbc2a.svg"},function(e,t,n){e.exports=n.p+"static/media/hand.9a950e42.svg"},function(e,t,n){e.exports=n.p+"static/media/ring.5187be72.svg"},function(e,t,n){e.exports=n.p+"static/media/footprint.88018ef0.svg"},function(e,t,n){e.exports=n.p+"static/media/quick-slash.1d87b52f.svg"},function(e,t,n){e.exports=n.p+"static/media/barbed-arrow.c6c3f6ae.svg"},function(e,t,n){e.exports=n.p+"static/media/flame.332be8c2.svg"},function(e,t,n){e.exports=n.p+"static/media/bleeding-eye.12de19c6.svg"},function(e,t,n){e.exports=n.p+"static/media/moebius-trefoil.d014b37d.svg"},function(e,t,n){e.exports=n.p+"static/media/triorb.b6fc9ecd.svg"},function(e,t,n){e.exports=n.p+"static/media/shield.2cc62e8a.svg"},function(e,t,n){e.exports=n.p+"static/media/book-cover.a02eb2a5.svg"},function(e,t,n){e.exports=n.p+"static/media/fist.d1b25a44.svg"},function(e,t,n){e.exports=n.p+"static/media/fire-axe.3106dbae.svg"},function(e,t,n){e.exports=n.p+"static/media/war-axe.e2df8956.svg"},function(e,t,n){e.exports=n.p+"static/media/stiletto.ad33f46f.svg"},function(e,t,n){e.exports=n.p+"static/media/croc-sword.dfa5ecf6.svg"},function(e,t,n){e.exports=n.p+"static/media/flail.1f360b03.svg"},function(e,t,n){e.exports=n.p+"static/media/crossed-swords.b7d2c27a.svg"},function(e,t,n){e.exports=n.p+"static/media/katana.8ca51fab.svg"},function(e,t,n){e.exports=n.p+"static/media/sword-hilt.409c650d.svg"},function(e,t,n){e.exports=n.p+"static/media/orb-wand.2f0c673e.svg"},function(e,t,n){e.exports=n.p+"static/media/wizard-staff.3e6091b9.svg"},function(e,t,n){e.exports=n.p+"static/media/luger.ec54b497.svg"},function(e,t,n){e.exports=n.p+"static/media/crossbow.6d23d544.svg"},function(e,t,n){e.exports=n.p+"static/media/bloody-sword.59d8ca0f.svg"},function(e,t,n){e.exports=n.p+"static/media/winged-sword.c22831aa.svg"},function(e,t,n){e.exports=n.p+"static/media/closed-barbute.59102a4b.svg"},function(e,t,n){e.exports=n.p+"static/media/hood.7b3df127.svg"},function(e,t,n){e.exports=n.p+"static/media/shoulder-armor.caa17ee9.svg"},function(e,t,n){e.exports=n.p+"static/media/robe.5b61ecba.svg"},function(e,t,n){e.exports=n.p+"static/media/gloves.03da1411.svg"},function(e,t,n){e.exports=n.p+"static/media/power-ring.ed9dcd22.svg"},function(e,t,n){e.exports=n.p+"static/media/boots.b6910f10.svg"},,function(e,t,n){e.exports=n.p+"static/media/magnifying-glass.ec7b5987.svg"},function(e,t,n){e.exports=n.p+"static/media/tombstone.31b6aa47.svg"},function(e,t,n){e.exports=n.p+"static/media/pencil.ac0b4bc7.svg"},function(e,t,n){e.exports=n.p+"static/media/save.ec2d8043.svg"},function(e,t,n){e.exports=n.p+"static/media/trash-can.3332c6a4.svg"},function(e,t,n){e.exports=n.p+"static/media/roll.300ea409.png"},function(e,t,n){e.exports=n.p+"static/media/swordman.c84cfcb8.svg"},function(e,t,n){e.exports=n.p+"static/media/swap-bag.df43fabd.svg"},function(e,t,n){e.exports=n.p+"static/media/skills.60519e24.svg"},function(e,t,n){e.exports=n.p+"static/media/crystal-shrine.d915d792.svg"},function(e,t,n){e.exports=n.p+"static/media/emerald.df0125b6.svg"},function(e,t,n){e.exports=n.p+"static/media/two-shadows.3e048aca.svg"},function(e,t,n){e.exports=n.p+"static/media/23761.e6671090.jpg"},,,,,function(e,t,n){e.exports=n(305)},,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),c=n.n(i),o=n(29),l=n.n(o),s=n(7),d=n(4),u=n(3),f=n(1),m=n(2),g=function(e){return Object.keys(e)},h=n(122),p=function(e,t){return 0===e?"":t},b=function(e){return p(e,e>0?"+":"-")},y=n(306),v=function(e){return e>0?e:0},E={3:.46,4:1.85,5:4.62,6:9.25,7:16.2,8:25.92,9:37.5,10:50,11:62.5,12:74.07,13:83.79,14:90.74,15:95.37,16:98.14,17:99.53},w=function(e){return e.split("+").map((function(e){var t=e.split("d"),n=Object(d.a)(t,2),a=n[0],r=n[1];return{n:parseInt(a,10),d:parseInt(r,10)}}))},O=function(e){return 0===e?"":"".concat(b(e)).concat(Math.abs(e))},x=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=D(e.string)||"1d1-1",a=new h.DiceRoll("".concat(n).concat(O(e.modifier)));return{id:Object(y.a)(),total:t?a.total:v(a.total),output:a.output,criticalSuccess:a.total===a.minTotal,criticalFailure:a.total===a.maxTotal,minTotal:t?a.minTotal:v(a.minTotal),maxTotal:t?a.maxTotal:v(a.maxTotal),averageTotal:t?a.averageTotal:v(a.averageTotal)}},k=function(e,t){return x({string:e,modifier:t||0}).total},j=function(e){var t,n=e.value,a=e.roll;return"3d6"===a.string&&0===a.modifier?(t=n)<3?.46:t>17?99.53:E[t]:""===a.string&&a.modifier<=n?100:0},C=function(e,t){var n=e.value,a=e.roll,r=x(a,t);return Object(f.a)({},r,{result:r.total<=n,chance:j(e),goal:n})},S={string:"",modifier:0},R="3d6",I=0,T={value:0,roll:S},q=function(e,t,n){return{keys:e,string:t||S.string,modifier:n||S.modifier}},M=function(e,t,n,a){return{keys:e,value:a||T.value,roll:{string:void 0===t?R:t,modifier:n||I}}},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(e,void 0,void 0,t)},D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.filter((function(e){return""!==e})).map((function(e){return w(e)})).reduce((function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t))}),[]),r={};return a.forEach((function(e){r[e.d]=(r[e.d]||0)+e.n})),g(r).map((function(e,t){return"".concat(r[parseInt(e,10)],"d").concat(e)})).reduce((function(e,t,n){return"".concat(e).concat(n>0?"+":"").concat(t)}),"")},B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return{string:D(e.string,t.string),modifier:e.modifier+t.modifier}}),S)},W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object(f.a)({},B(e,t),{keys:[].concat(Object(m.a)(e.keys),Object(m.a)(t.keys))})}),q([]))},z=function(e,t){var n=ue(t)(e.keys||[]);return{string:e.string,modifier:e.modifier+n}},G=function(e,t){var n=ue(t)(e.keys);return{value:e.value+n,roll:e.roll}},A=function(e,t,n){return x(z(e,t),n)},H=function(e,t,n){return C(G(e,t),n)},F=function(e){var t=x(e,!1);return t.minTotal===t.maxTotal?"".concat(t.maxTotal):"".concat(t.minTotal,"-").concat(t.maxTotal)},U=function(e){e.keys.length;var t=0!==e.modifier,n=e.keys.reduce((function(t,n,a){var r=0!==a||e.string?"+":"";return"".concat(t).concat(r).concat(me[n])}),""),a=t?"".concat(e.string||n?b(e.modifier):"").concat(Math.abs(e.modifier)):"";return"".concat(e.string).concat(n).concat(a)},$={slashing:"grey",piercing:"grey",fire:"orange",blood:"#cd7474",light:"lemonchiffon",dark:"mediumpurple"},L=function(e){return g(e)},K=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,r=0,i=g(t).filter((function(e){return t[e]})),c={slashing:void 0,piercing:void 0,fire:void 0,blood:void 0,light:void 0,dark:void 0};return i.forEach((function(i){var o=t[i],l=e(o,!0,!1,a);n&&(l=Object(f.a)({},l,{total:l.maxTotal||l.total})),r+=l.total,c=Object(f.a)({},c,Object(u.a)({},i,l))})),{total:r,rollResults:c}}},N={slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n={};return g(e).forEach((function(a){n[a]=t[a]?W(e[a],t[a]):e[a]})),n}),N)},V=function(e,t,n){return e.reduce(t,n)},Y={onHit:"on hit",onCrit:"on crit"},J=function(e){return e||[]},X=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return V(t,(function(e,t){var n={};return g(e).forEach((function(a){n[a]=[].concat(Object(m.a)(J(e[a])),Object(m.a)(J(t[a])))})),n}),{onHit:[],onCrit:[]})},Q={id:"",accuracyOffset:0,damageRolls:N,events:{},traits:[]},Z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return{id:t.id,accuracyOffset:e.accuracyOffset+t.accuracyOffset,damageRolls:_(e.damageRolls,t.damageRolls),events:X(e.events,t.events),traits:[].concat(Object(m.a)(e.traits),Object(m.a)(t.traits))}}),Q)},ee=function(e){if(e.processed)throw new Error("No Processed Weapons Allowed");var t=e.slots,n=V(t,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]),a=Z.apply(void 0,Object(m.a)(n)),r=Object(f.a)({},e,{processed:!0,accuracyCheck:Object(f.a)({},e.accuracyCheck,{value:e.accuracyCheck.value+a.accuracyOffset}),damageRolls:_(e.damageRolls,a.damageRolls),traits:[].concat(Object(m.a)(e.traits),Object(m.a)(a.traits)),events:X(e.events,a.events)});return console.log("weapon",e.name),console.log(r),r},te=function(e,t){return M(e,"",t,void 0)},ne=function(e){var t=Object(y.a)();return{id:t,type:e,rarity:"common",equippable:!0,name:"",cost:0,resource:"weaponHands",requirementCheck:te(["intelligence"],1),traits:[{id:"".concat(t,"-0"),name:"Bonus",duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0},statsModifiers:{health:0,focus:0,will:0,perception:0,agility:0,accuracy:0,evade:0}}],damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])}}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{id:Object(y.a)(),name:e,duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0},statsModifiers:{health:0,focus:0,will:0,perception:0,agility:0,accuracy:0,evade:0}}},re=Object(f.a)({},ne("weapon"),{id:Object(y.a)(),equippable:!0,type:"weapon",weaponType:"fists",name:"Unarmed",cost:0,resource:"weaponHands",requirementCheck:te(["strength"],1),damageRolls:{piercing:q([],"1d6",-3)},accuracyCheck:M(["dexterity"]),traits:[],events:{},slotCount:0,slots:[]}),ie=function(e){var t=V(e.armor,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]),n=V(e.equippedItems,(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.traits))}),[]);return[].concat(Object(m.a)(e.traits),Object(m.a)(ee(e.weapon||re).traits),Object(m.a)(n),Object(m.a)(t))},ce=function(e){return ie(e).map((function(e){return e.abilitiesModifiers})).reduce((function(e,t){return{strength:e.strength+t.strength,dexterity:e.dexterity+t.dexterity,intelligence:e.intelligence+t.intelligence,vigor:e.vigor+t.vigor}}),e.abilities)},oe=function(e){var t=ce(e);return ie(e).map((function(e){return e.statsModifiers})).reduce((function(e,t){return{health:e.health+t.health,focus:e.focus+t.focus,will:e.will+t.will,perception:e.perception+t.perception,agility:e.agility+t.agility,accuracy:e.accuracy+t.accuracy,evade:e.evade+t.evade}}),{health:2*t.strength+t.vigor,focus:t.intelligence+t.vigor,will:t.intelligence,perception:t.intelligence,agility:(t.vigor+t.dexterity)/4,accuracy:t.dexterity-2,evade:t.dexterity-8})},le=function(e){var t=e.armor,n=L(e.damageResistances);return V(n,(function(e,n){return Object(f.a)({},e,Object(u.a)({},n,W.apply(void 0,[e[n]].concat(Object(m.a)(t.map((function(e){return e.damageResistances[n]})))))))}),e.damageResistances)},se=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.processed)return e;e=t?e:Object(f.a)({},e,{weapon:void 0});var n=ce(e),a=oe(e),r=ie(e),i=le(e),c=v(r.reduce((function(e,t){return e-t.healthOffset}),e.healthOffset));return Object(f.a)({},e,{healthOffset:c,weapon:ee(e.weapon||re),abilities:n,stats:a,traits:r,damageResistances:i,processed:!0,dead:c>=a.health})},de=function(e){return function(t){return Object(f.a)({},e,{healthOffset:v(e.healthOffset-t.healthOffset),focusOffset:v(e.focusOffset-t.focusOffset)})}},ue=function(e){return function(t){return t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,a=e.abilities[n],r=e.stats[n];return a&&(t+=a),r&&(t+=r),t}),0)}},fe=function(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.resources.characterPoints;return je(Object(f.a)({},e,{power:e.power+(e.resources.characterPoints-a),resources:Object(f.a)({},e.resources,{characterPoints:a}),abilities:Object(f.a)({},e.abilities,Object(u.a)({},t,n))}))}},me={strength:"STR",dexterity:"DEX",intelligence:"INT",vigor:"VIG",health:"HLT",focus:"FOC",will:"WIL",perception:"PER",agility:"AGL",accuracy:"ACC",evade:"EVD"},ge={strength:10,dexterity:20,intelligence:20,vigor:10},he=(Object(f.a)({},ge,{health:5,focus:5,will:10,perception:10,agility:10,accuracy:10,evade:10}),function(e){return function(t,n){if(!t)return!1;if(!t.equippable)return!1;var a=t,r=se(e,n);return!!H(a.requirementCheck,r).result&&(("weapon"!==a.type||!e.weapon)&&!(r.resources[a.resource]<a.cost))}}),pe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var a,r=[],i=Object(f.a)({},e);(null===(a=e.weapon)||void 0===a?void 0:a.id)===n&&(r=[Object(f.a)({},e.weapon)],i=Oe(i));var c=e.armor.find((function(e){return e.id===n}));c&&(r=[Object(f.a)({},c)],i=Ee(e)(c));var o=e.equippedItems.find((function(e){return e.id===n}));if(o&&(r=[Object(f.a)({},o)],i=ye(e)(o)),t){var l=je(i);i=l[0],r=[].concat(Object(m.a)(r),Object(m.a)(l[1]))}return[r,i]}},be=function(e){return function(t){var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n-t.cost)),equippedItems:[].concat(Object(m.a)(e.equippedItems),[t])})}},ye=function(e){return function(t){if(!t)return e;var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n+t.cost)),equippedItems:e.equippedItems.filter((function(e){return e.id!==t.id}))})}},ve=function(e){return function(t){var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n-t.cost)),armor:[].concat(Object(m.a)(e.armor),[t])})}},Ee=function(e){return function(t){if(!t)return e;var n=e.resources[t.resource];return Object(f.a)({},e,{resources:Object(f.a)({},e.resources,Object(u.a)({},t.resource,n+t.cost)),armor:e.armor.filter((function(e){return e.id!==t.id}))})}},we=function(e){return function(t){var n;if("weapon"!==t.type)return e;var a=e.weapon;return(null===(n=a)||void 0===n?void 0:n.id)===re.id&&(a=void 0),Object(f.a)({},e,{resources:Object(f.a)({},e.resources,{weaponHands:e.resources.weaponHands-t.cost+(a?a.cost:0)}),weapon:t})}},Oe=function(e){return e.weapon?Object(f.a)({},e,{resources:Object(f.a)({},e.resources,{weaponHands:e.resources.weaponHands+e.weapon.cost}),weapon:void 0}):e},xe=function(e,t){var n=e.abilitiesModifiers[t],a=e.statsModifiers[t];return void 0!==n?n:a},ke=function(e){var t=Object(y.a)(),n="combine"+t;return e.reduce((function(e,a){var r=e.abilitiesModifiers,i=a.abilitiesModifiers,c=e.statsModifiers,o=a.statsModifiers;return{id:t,name:n,duration:a.duration,healthOffset:e.healthOffset+a.healthOffset,focusOffset:e.focusOffset+a.focusOffset,abilitiesModifiers:{strength:r.strength+i.strength,dexterity:r.dexterity+i.dexterity,intelligence:r.intelligence+i.intelligence,vigor:r.vigor+i.vigor},statsModifiers:{health:c.health+o.health,focus:c.focus+o.focus,will:c.will+o.will,perception:c.perception+o.perception,agility:c.agility+o.agility,accuracy:c.accuracy+o.accuracy,evade:c.evade+o.evade}}}),ae())},je=function e(t){var n,a,r=se(t),i=Object(f.a)({},t),c=[],o=function(e){i=Object(f.a)({},e),r=se(e)};if(!H(r.weapon.requirementCheck,r).result){var l=pe(i,!1)(r.weapon.id);o(l[1]),l[0]&&(c=[].concat(Object(m.a)(c),Object(m.a)(l[0])))}if(r.armor.forEach((function(e){if(!H(e.requirementCheck,r).result){var t=pe(i,!1)(e.id);o(t[1]),t[0]&&(c=[].concat(Object(m.a)(c),Object(m.a)(t[0])))}})),r.equippedItems.forEach((function(e){if(!H(e.requirementCheck,r).result&&!H(e.requirementCheck,r).result){var t=pe(i,!1)(e.id);o(t[1]),t[0]&&(c=[].concat(Object(m.a)(c),Object(m.a)(t[0])))}})),(null===(n=i.weapon)||void 0===n?void 0:n.id)!==(null===(a=t.weapon)||void 0===a?void 0:a.id)||i.armor.length!==t.armor.length||i.equippedItems.length!==i.equippedItems.length){var s=e(i),u=Object(d.a)(s,2),g=u[0],h=u[1];c=[].concat(Object(m.a)(c),Object(m.a)(h)),o(g)}return[i,c]},Ce={name:"-- init --",id:Object(y.a)(),power:0,resources:{characterPoints:0,weaponHands:0,heads:0,bodies:0,hands:0,fingers:0,feet:0},abilities:{strength:0,dexterity:0,intelligence:0,vigor:0},damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},traits:[],skills:[],equippedItems:[],armor:[],healthOffset:0,focusOffset:0,dead:!1,inspected:!1},Se=function(e){return Object(f.a)({},e,{characters:e.characters.map((function(t){return Object(f.a)({},se(t),{partyId:e.id})})),processed:!0})},Re=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0,r=e[a.type];return r?r(n,a):n}},Ie=n(21),Te=n(22),qe=function(e,t){return[].concat(Object(m.a)(e.filter((function(e){return e.id!==t.id}))),[t])},Me=function(e,t,n){return e.map((function(e){return e.id===t?n(e):e}))},Pe=function(e){return e[Math.floor(Math.random()*e.length)]},De=Object(f.a)({},ne("shield"),{id:"basic-shield",equippable:!0,type:"shield",rarity:"rare",name:"Basic Shield",cost:1,resource:"weaponHands",requirementCheck:te(["strength"],3),traits:[Object(f.a)({},ae(),{id:"basic-shield--bonus",abilitiesModifiers:{strength:1,dexterity:0,intelligence:0,vigor:2},statsModifiers:{health:0,focus:0,will:0,perception:0,agility:-2,accuracy:0,evade:0}})],damageResistances:{slashing:q([],void 0,3),piercing:q([],void 0,2),fire:q([]),blood:q([]),light:q([]),dark:q([])}}),Be=Object(f.a)({},ne("tome"),{id:"basic-tome",equippable:!0,type:"tome",rarity:"unique",name:"Basic Tome",cost:1,resource:"weaponHands",requirementCheck:te(["intelligence"],12),traits:[Object(f.a)({},ae(),{id:"basic-tome--bonus",abilitiesModifiers:{strength:0,dexterity:0,intelligence:4,vigor:0}})],damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])}}),We=["Helmet of Doom","Helmet of Dawn"],ze=["Hood of the Night"],Ge=["Armor of the King"],Ae=["Robe of the Necromancer"],He=["Gloves of the Great War"],Fe=["Ring of Green","Silver Serpant Ring"],Ue=["Boots of the Gods"],$e=function(e){for(var t=Object(m.a)(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t},Le={3:"set",4:"unique",5:"legendary",6:"rare",7:"uncommon",8:"common",9:"common",10:"common",11:"common",12:"common",13:"uncommon",14:"uncommon",15:"rare",16:"legendary",17:"unique",18:"mythic"},Ke=function(e,t,n){var a=n-13,r=t+(a=a>0?a:0);r=r>0?r:0;for(var i={},c=0;c<r;++c){var o=Pe($e(e));i[o]=(i[o]||0)+1}return i},Ne={helmet:["strength","dexterity"],cowl:["dexterity","intelligence"],chestplate:["strength","vigor"],robe:["dexterity","intelligence"],gloves:["strength","dexterity","intelligence"],ring:["strength","dexterity","intelligence"],boots:["strength","dexterity","intelligence"]},_e={helmet:1,cowl:1,chestplate:1,robe:1,gloves:2,ring:1,boots:2},Ve={helmet:"heads",cowl:"heads",chestplate:"bodies",robe:"bodies",gloves:"hands",ring:"fingers",boots:"feet"},Ye={helmet:["strength","intelligence","vigor","accuracy"],cowl:["dexterity","intelligence","agility","evade"],chestplate:["strength","intelligence","vigor"],robe:["dexterity","intelligence","agility","evade"],gloves:["strength","dexterity","intelligence","vigor","health","focus","agility","accuracy"],ring:["strength","dexterity","intelligence","vigor","health","focus","will","perception","agility","accuracy","evade"],boots:["strength","dexterity","intelligence","vigor","health","focus","agility","evade"]},Je={common:Ye,uncommon:Ye,rare:Ye,legendary:Ye,unique:Ye,mythic:Ye,set:Ye},Xe={common:0,uncommon:1,rare:2,legendary:3,unique:4,mythic:5,set:5},Qe=function(e){return q([],"",k(e))},Ze=function(e){return q([],e)},et=[],tt=[],nt=[],at=function(e,t){t=t||Le[k("3d6")];var n=te([Pe(Ne[e])],10),a=et.find((function(t){return t.armorType===e||t.requirementCheck===n})),r=tt.find((function(t){return t.armorType===e||t.requirementCheck===n})),i=nt.find((function(t){return t.armorType===e||t.requirementCheck===n}));return"unique"===t&&a?a:"mythic"===t&&r?r:"set"===t&&i?i:rt(e,{common:{helmet:"Common Helmet",cowl:"Common Hood",chestplate:"Common Chestplate",robe:"Common Robe",gloves:"Common Gloves",ring:"Common Ring",boots:"Common Boots"},uncommon:{helmet:"Uncommon Helmet",cowl:"Uncommon Hood",chestplate:"Uncommon Chestplate",robe:"Uncommon Robe",gloves:"Uncommon Gloves",ring:"Uncommon Ring",boots:"Uncommon Boots"},rare:{helmet:"Rare Helmet",cowl:"Rare Hood",chestplate:"Rare Chestplate",robe:"Rare Robe",gloves:"Rare Gloves",ring:"Rare Ring",boots:"Rare Boots"},legendary:{helmet:"Epic Helmet",cowl:"Epic Hood",chestplate:"Epic Chestplate",robe:"Epic Robe",gloves:"Epic Gloves",ring:"Epic Ring",boots:"Epic Boots"},unique:{helmet:Pe(We),cowl:Pe(ze),chestplate:Pe(Ge),robe:Pe(Ae),gloves:Pe(He),ring:Pe(Fe),boots:Pe(Ue)},mythic:{helmet:"Mythic Helmet",cowl:"Mythic Hood",chestplate:"Mythic Chestplate",robe:"Mythic Robe",gloves:"Mythic Gloves",ring:"Mythic Ring",boots:"Mythic Boots"},set:{helmet:"Set Helmet",cowl:"Set Hood",chestplate:"Set Chestplate",robe:"Set Robe",gloves:"Set Gloves",ring:"Set Ring",boots:"Set Boots"}}[t][e],_e[e],Ve[e],n,function(e,t,n){var a=$e(Je[t][e]);return Ke(a,Xe[t],n)}(e,t,n.value),{common:{helmet:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1")},cowl:{blood:Qe("1d2-1"),light:Qe("1d2-1"),dark:Qe("1d2-1")},chestplate:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1"),fire:Qe("1d2-1")},robe:{fire:Qe("1d2-1"),blood:Qe("1d2-1"),light:Qe("1d2-1"),dark:Qe("1d2-1")},gloves:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1")},ring:{blood:Qe("1d2-1"),light:Qe("1d2-1"),dark:Qe("1d2-1")},boots:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1")}},uncommon:{helmet:{slashing:Qe("1d3-1"),piercing:Qe("1d3-1")},cowl:{blood:Qe("1d3-1"),light:Qe("1d3-1"),dark:Qe("1d3-1")},chestplate:{slashing:Qe("1d3-1"),piercing:Qe("1d3-1"),fire:Qe("1d3-1")},robe:{fire:Qe("1d3-1"),blood:Qe("1d3-1"),light:Qe("1d3-1"),dark:Qe("1d3-1")},gloves:{slashing:Qe("1d3-1"),piercing:Qe("1d3-1")},ring:{blood:Qe("1d3-1"),light:Qe("1d3-1"),dark:Qe("1d3-1")},boots:{slashing:Qe("1d3-1"),piercing:Qe("1d3-1")}},rare:{helmet:{slashing:Qe("1d4-1"),piercing:Qe("1d4-1")},cowl:{blood:Qe("1d4-1"),light:Qe("1d4-1"),dark:Qe("1d4-1")},chestplate:{slashing:Qe("1d4-1"),piercing:Qe("1d4-1"),fire:Qe("1d4-1")},robe:{fire:Qe("1d4-1"),blood:Qe("1d4-1"),light:Qe("1d4-1"),dark:Qe("1d4-1")},gloves:{slashing:Qe("1d4-1"),piercing:Qe("1d4-1")},ring:{blood:Qe("1d4-1"),light:Qe("1d4-1"),dark:Qe("1d4-1")},boots:{slashing:Qe("1d4-1"),piercing:Qe("1d4-1")}},legendary:{helmet:{slashing:Qe("1d5-1"),piercing:Qe("1d5-1")},cowl:{blood:Qe("1d5-1"),light:Qe("1d5-1"),dark:Qe("1d5-1")},chestplate:{slashing:Qe("1d5-1"),piercing:Qe("1d5-1"),fire:Qe("1d5-1")},robe:{fire:Qe("1d5-1"),blood:Qe("1d5-1"),light:Qe("1d5-1"),dark:Qe("1d5-1")},gloves:{slashing:Qe("1d5-1"),piercing:Qe("1d5-1")},ring:{fire:Qe("1d5-1"),blood:Qe("1d5-1"),light:Qe("1d5-1"),dark:Qe("1d5-1")},boots:{slashing:Qe("1d5-1"),piercing:Qe("1d5-1")}},unique:{helmet:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},cowl:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},chestplate:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},robe:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},gloves:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},ring:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},boots:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")}},mythic:{helmet:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},cowl:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},chestplate:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},robe:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},gloves:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},ring:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},boots:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")}},set:{helmet:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},cowl:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},chestplate:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},robe:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},gloves:{slashing:Qe("1d2-1"),piercing:Qe("1d2-1"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},ring:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")},boots:{slashing:Ze("1d6"),piercing:Ze("1d6"),fire:Ze("1d6"),blood:Ze("1d6"),light:Ze("1d6"),dark:Ze("1d6")}}}[t][e],t)},rt=function(e,t,n,a,r,i,c,o){var l=ne("armor");return Object(f.a)({},l,{type:"armor",armorType:e,name:t,cost:n,resource:a,requirementCheck:r,rarity:o,damageResistances:Object(f.a)({},l.damageResistances,{},c),traits:[{id:"".concat(l.id,"--bonus"),name:"Armor Trait",duration:-1,healthOffset:0,focusOffset:0,abilitiesModifiers:{strength:i.strength||0,dexterity:i.dexterity||0,intelligence:i.intelligence||0,vigor:i.vigor||0},statsModifiers:{health:i.health||0,focus:i.focus||0,will:i.will||0,perception:i.perception||0,agility:i.agility||0,accuracy:i.accuracy||0,evade:i.evade||0}}]})},it={fists:["strength"],axe:["strength"],greataxe:["strength"],flail:["strength"],daggers:["dexterity"],katana:["dexterity"],rapier:["dexterity"],wand:["intelligence"],staff:["intelligence"],elementalSword:["strength","intelligence"],elementalGreatsword:["strength","intelligence"],sword:["strength","dexterity"],greatsword:["strength","dexterity"],pistol:["dexterity","intelligence"],crossbow:["dexterity","intelligence"]},ct={fists:1,axe:1,greataxe:2,flail:1,daggers:2,katana:1,rapier:1,wand:1,staff:2,elementalSword:1,elementalGreatsword:2,sword:1,greatsword:2,pistol:1,crossbow:2},ot={fists:["strength","vigor"],axe:["strength","vigor","health","agility"],greataxe:["strength","vigor","health","agility"],flail:["strength","vigor","health","agility"],daggers:["dexterity","vigor","health","agility"],katana:["dexterity","vigor","health","agility"],rapier:["dexterity","vigor","health","agility"],wand:["intelligence","vigor","agility"],staff:["intelligence","vigor","perception","will"],elementalSword:["intelligence","vigor","strength","will"],elementalGreatsword:["intelligence","vigor","strength","will"],sword:["strength","intelligence","health","agility"],greatsword:["strength","intelligence","health","vigor"],pistol:["dexterity","intelligence","perception","vigor"],crossbow:["dexterity","intelligence","perception","vigor"]},lt={common:ot,uncommon:ot,rare:ot,legendary:ot,unique:ot,mythic:ot,set:ot},st={common:1,uncommon:2,rare:3,legendary:4,unique:5,mythic:6,set:6},dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return q(n,e,k(t)*a+r)},ut=function(e,t){"set"===(t=t||Le[k("3d6")])&&(t="mythic");var n=te([Pe(it[e])],10);return ft(e,{common:{fists:"Unarmed",axe:"Common Axe",greataxe:"Common Greataxe",flail:"Common Flail",daggers:"Common Daggers",katana:"Common Katana",rapier:"Common Rapier",wand:"Common Wand",staff:"Common Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Common Sword",greatsword:"Common Greatsword",pistol:"Common Pistol",crossbow:"Common Crossbow"},uncommon:{fists:"Unarmed",axe:"Uncommon Axe",greataxe:"Uncommon Greataxe",flail:"Uncommon Flail",daggers:"Uncommon Daggers",katana:"Uncommon Katana",rapier:"Uncommon Rapier",wand:"Uncommon Wand",staff:"Uncommon Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Uncommon Sword",greatsword:"Uncommon Greatsword",pistol:"Uncommon Pistol",crossbow:"Uncommon Crossbow"},rare:{fists:"Unarmed",axe:"Rare Axe",greataxe:"Rare Greataxe",flail:"Rare Flail",daggers:"Rare Daggers",katana:"Rare Katana",rapier:"Rare Rapier",wand:"Rare Wand",staff:"Rare Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Rare Sword",greatsword:"Rare Greatsword",pistol:"Rare Pistol",crossbow:"Rare Crossbow"},legendary:{fists:"Unarmed",axe:"Epic Axe",greataxe:"Epic Greataxe",flail:"Epic Flail",daggers:"Epic Daggers",katana:"Epic Katana",rapier:"Epic Rapier",wand:"Epic Wand",staff:"Epic Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Epic Sword",greatsword:"Epic Greatsword",pistol:"Epic Pistol",crossbow:"Epic Crossbow"},unique:{fists:"Unarmed",axe:"Unique Axe",greataxe:"Unique Greataxe",flail:"Unique Flail",daggers:"Unique Daggers",katana:"Unique Katana",rapier:"Unique Rapier",wand:"Unique Wand",staff:"Unique Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Unique Sword",greatsword:"Unique Greatsword",pistol:"Unique Pistol",crossbow:"Unique Crossbow"},mythic:{fists:"Unarmed",axe:"Mythic Axe",greataxe:"Mythic Greataxe",flail:"Mythic Flail",daggers:"Mythic Daggers",katana:"Mythic Katana",rapier:"Mythic Rapier",wand:"Mythic Wand",staff:"Mythic Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Mythic Sword",greatsword:"Mythic Greatsword",pistol:"Mythic Pistol",crossbow:"Mythic Crossbow"},set:{fists:"Unarmed",axe:"Set Axe",greataxe:"Set Greataxe",flail:"Set Flail",daggers:"Set Daggers",katana:"Set Katana",rapier:"Set Rapier",wand:"Set Wand",staff:"Set Staff",elementalSword:"Elemental Sword",elementalGreatsword:"Elemental Greatsword",sword:"Set Sword",greatsword:"Set Greatsword",pistol:"Set Pistol",crossbow:"Set Crossbow"}}[t][e],ct[e],n,0,function(e,t,n){var a=$e(lt[t][e]);return Ke(a,st[t],n)}(e,t,n.value),function(){var e=Pe(["fire","blood","dark","light"]);return{common:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},uncommon:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},rare:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},legendary:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},unique:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},mythic:{fists:{slashing:dt("1d6","3d4",["strength"])},axe:{slashing:dt("1d6","3d4",["strength"])},greataxe:{slashing:dt("2d6","1d6",["strength"])},flail:{piercing:dt("1d6","3d4",["strength"])},daggers:{slashing:dt("2d6","1d6",["dexterity"])},katana:{slashing:dt("1d6","3d4",["dexterity"])},rapier:{piercing:dt("1d6","3d4",["dexterity"])},wand:Object(u.a)({},e,dt("1d6","3d4",["intelligence"])),staff:Object(u.a)({},e,dt("2d6","1d6",["intelligence"])),elementalSword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),elementalGreatsword:Object(u.a)({slashing:dt("1d6","3d6",[Pe(["strength","dexterity"])])},e,dt("1d4","3d4",["intelligence"])),sword:{slashing:dt("1d6","3d6",["strength"])},greatsword:{slashing:dt("1d6","3d6",["strength","dexterity"])},pistol:{piercing:dt("1d4","3d6",["dexterity"]),fire:dt("1d4","3d6",["intelligence"])},crossbow:{piercing:dt("1d4","2d6",["dexterity"]),fire:dt("1d4","2d6",["intelligence"])}},set:{fists:{},axe:{},greataxe:{},flail:{},daggers:{},katana:{},rapier:{},wand:{},staff:{},elementalSword:{},elementalGreatsword:{},sword:{},greatsword:{},pistol:{},crossbow:{}}}}()[t][e],t)},ft=function(e,t,n,a,r,i,c,o){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},s=ne("weapon");return Object(f.a)({},s,{type:"weapon",weaponType:e,name:t,cost:n,rarity:o,requirementCheck:a,accuracyCheck:M(["accuracy"],void 0,0,r),damageRolls:c,traits:[Object(f.a)({},ae(),{id:"".concat(s.id,"--bonus"),name:"Weapon Trait",abilitiesModifiers:{strength:i.strength||0,dexterity:i.dexterity||0,intelligence:i.intelligence||0,vigor:i.vigor||0},statsModifiers:{health:i.health||0,focus:i.focus||0,will:i.will||0,perception:i.perception||0,agility:i.agility||0,accuracy:i.accuracy||0,evade:i.evade||0}})],events:{},slotCount:0,slots:[]},l)},mt=["weapon","weapon","armor","armor","armor","armor"],gt={weapon:function(){return function(e){var t=g(e);return(e[Pe(t)]||function(){return re})()}({axe:function(){return ut("axe")},greataxe:function(){return ut("greataxe")},flail:function(){return ut("flail")},daggers:function(){return ut("daggers")},katana:function(){return ut("katana")},rapier:function(){return ut("rapier")},wand:function(){return ut("wand")},staff:function(){return ut("staff")},elementalSword:function(){return ut("elementalSword")},elementalGreatsword:function(){return ut("elementalGreatsword")},sword:function(){return ut("sword")},greatsword:function(){return ut("greatsword")},pistol:function(){return ut("pistol")},crossbow:function(){return ut("crossbow")}})},armor:function(){return function(e){var t=g(e);return(e[Pe(t)]||function(){return at("ring")})()}({helmet:function(){return at("helmet")},cowl:function(){return at("cowl")},chestplate:function(){return at("chestplate")},robe:function(){return at("robe")},ring:function(){return at("ring")},boots:function(){return at("boots")},gloves:function(){return at("gloves")}})},shield:function(){return De},tome:function(){return Be}},ht=function(){return gt[Pe(mt)]()},pt=n(124),bt=n.n(pt),yt=n(125),vt=n.n(yt),Et=n(126),wt=n.n(Et),Ot=n(127),xt=n.n(Ot),kt=n(128),jt=n.n(kt),Ct=n(129),St=n.n(Ct),Rt=n(130),It=n.n(Rt),Tt=n(131),qt=n.n(Tt),Mt=n(132),Pt=n.n(Mt),Dt=n(133),Bt=n.n(Dt),Wt=n(134),zt=n.n(Wt),Gt=n(135),At=n.n(Gt),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Weapon Attack";return{id:Object(y.a)(),name:e,imgSrc:"",requirementCheck:te(["intelligence"],1),damageRolls:{},targetTraits:[],sourceTraits:[],events:{},combineWeaponDamage:!0,checkDodgeForTraits:!0,focusCost:0,target:!0}},Ft=Object(f.a)({},Ht(),{imgSrc:At.a}),Ut=Object(f.a)({},Ht("Inspect"),{imgSrc:zt.a,combineWeaponDamage:!1,damageRolls:{},inspected:!0}),$t=Object(f.a)({},Ht("Fireball"),{imgSrc:vt.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{fire:q([],"4d10",-7)},focusCost:10}),Lt=Object(f.a)({},Ht("Crippling Blow"),{imgSrc:jt.a,requirementCheck:te(["strength"],10),combineWeaponDamage:!0,checkDodgeForTraits:!0,damageRolls:{},targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:-5}}),Object(f.a)({},ae(),{duration:-1,focusOffset:-3,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:0}})],focusCost:1}),Kt=Object(f.a)({},Ht("Thunderbolt"),{imgSrc:wt.a,check:P(["intelligence"],-3),combineWeaponDamage:!1,damageRolls:{light:q(["intelligence"])},focusCost:3}),Nt=Object(f.a)({},Ht("Dark Blast"),{imgSrc:xt.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{dark:q(["intelligence"],"2d6",-8)},focusCost:5}),_t=Object(f.a)({},Ht("Healing"),{target:!1,imgSrc:bt.a,check:M(["intelligence"]),combineWeaponDamage:!1,damageRolls:{},focusCost:5,sourceTraits:[Object(f.a)({},ae(),{healthOffset:15})]}),Vt=Object(f.a)({},Ht("Wrath"),{imgSrc:St.a,check:M(["strength"]),combineWeaponDamage:!1,damageRolls:{piercing:q([],"1d6")},focusCost:5,sourceTraits:[Object(f.a)({},ae(),{duration:4,abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})],targetTraits:[Object(f.a)({},ae(),{duration:4,abilitiesModifiers:{strength:-2,dexterity:0,intelligence:0,vigor:0}})]}),Yt=Object(f.a)({},Ht("Charge"),{imgSrc:It.a,focusCost:5,check:M(["strength"]),combineWeaponDamage:!1,damageRolls:{slashing:q(["strength"],"3d6",-12),piercing:q(["strength"],"3d6",-12)},sourceTraits:[Object(f.a)({},ae(),{duration:2,statsModifiers:{health:0,focus:0,will:0,perception:0,accuracy:0,evade:0,agility:3}})],targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:0,vigor:-3}})]}),Jt=Object(f.a)({},Ht("Skill Shot"),{imgSrc:qt.a,focusCost:12,check:P(["dexterity"],-4),combineWeaponDamage:!1,damageRolls:{piercing:q(["dexterity"],"1d20"),fire:q([],"8d2",-8)},targetTraits:[Object(f.a)({},ae(),{duration:2,abilitiesModifiers:{strength:0,dexterity:0,intelligence:-2,vigor:0}})]}),Xt=Object(f.a)({},Ht("Vanish"),{imgSrc:Bt.a,focusCost:8,check:P(["dexterity"]),combineWeaponDamage:!1,damageRolls:{},target:!1,sourceTraits:[Object(f.a)({},ae(),{duration:2,statsModifiers:{health:0,focus:0,will:0,perception:2,agility:-2,accuracy:0,evade:20}})]}),Qt=Object(f.a)({},Ht("Shadow Strike"),{imgSrc:Pt.a,focusCost:7,check:P(["evade"],-3),combineWeaponDamage:!1,damageRolls:{piercing:q(["evade"],"1d6",-6)}}),Zt=function(e){return{name:e||"-- init --",id:Object(y.a)(),power:600,resources:{characterPoints:250,weaponHands:1,heads:0,bodies:0,hands:0,fingers:10,feet:0},abilities:{strength:10,dexterity:10,intelligence:10,vigor:10},damageResistances:{slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},traits:[],skills:[Ft,Ut],equippedItems:[],armor:[at(Pe(["cowl","helmet"])),at(Pe(["chestplate","robe"])),at("gloves"),at("boots")],weapon:ut(Pe(["axe","greataxe","wand","staff","daggers","katana","sword","greatsword","flail","elementalGreatsword","elementalSword"])),healthOffset:0,focusOffset:0,dead:!1,inspected:!1}},en=Object(f.a)({},ut("elementalSword","mythic"),{name:"Sword of Blood and Fire",damageRolls:{slashing:q(["strength"],"1d10",-3),fire:q(["intelligence"],"1d4",-10),blood:q(["intelligence"],"1d4",-10)},events:{onHit:[Object(f.a)({},ae(),{name:"heal on hit",healthOffset:5}),Object(f.a)({},ae(),{name:"restore fp on hit",focusOffset:5})],onCrit:[Object(f.a)({},ae(),{name:"add strenth on crit",abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})]}}),tn=Object(f.a)({},ut("elementalSword","mythic"),{name:"Sword of the Infinite",damageRolls:{fire:q([],"3d6",-3),blood:q([],"",6),light:q(["intelligence"],"",-7),dark:q(["intelligence"],"1d6",-10),slashing:q([])},events:{onHit:[Object(f.a)({},ae(),{name:"heal on hit",healthOffset:5})],onCrit:[Object(f.a)({},ae(),{name:"add strenth on crit",abilitiesModifiers:{strength:2,dexterity:0,intelligence:0,vigor:0}})]},slotCount:1,slots:[{id:Object(y.a)(),name:"Test Weapon Mod",rarity:"mythic",traits:[Object(f.a)({},Q,{accuracyOffset:2,traits:[Object(f.a)({},ae(),{statsModifiers:{health:0,focus:2,will:0,perception:0,accuracy:0,agility:0,evade:2}})],damageRolls:{slashing:q([],"1d6")}})]}]}),nn={id:Object(y.a)(),name:"Slashing Mod",rarity:"mythic",traits:[Object(f.a)({},Q,{damageRolls:{slashing:q([],"1d6")}})]},an=function(e){return{type:"@actions/parties/upsert-party",payload:{party:e}}},rn=function(e,t){return{type:"@actions/parties/upsert-character",payload:{partyId:e,character:t}}},cn=function(e,t){return{type:"@actions/parties/delete-character",payload:{partyId:e,characterId:t}}},on=function(e,t){return{type:"@actions/parties/upsert-item",payload:{partyId:e,item:t}}},ln=function(e,t){return{type:"@actions/parties/delete-item",payload:{partyId:e,itemId:t}}},sn={upsertParty:function(e){return function(t){t(an(e))}},upsertCharacter:function(e,t){return function(n){n(rn(e,t))}},deleteCharacter:function(e,t){return function(n){n(cn(e,t))}},upsertItem:function(e,t){return function(n){n(on(e,t))}},removeItem:function(e,t){return function(n){n(ln(e,t))}},equipItem:function(e,t,n){return function(a,r){var i=r().parties.find((function(t){return t.id===e}));if(i){var c=i.characters.find((function(e){return e.id===t})),o=i.items.find((function(e){return e.id===n}));c&&o&&he(c)(o)&&(a(rn(e,function(e){return function(t){return he(e)(t)?"armor"===t.type?ve(e)(t):"weapon"===t.type?we(e)(t):be(e)(t):e}}(c)(o))),a(ln(e,o.id)))}}},unequipItem:function(e,t,n){return function(a,r){var i=r().parties.find((function(t){return t.id===e}));if(i){var c=i.characters.find((function(e){return e.id===t}));if(c){var o=pe(c)(n),l=Object(d.a)(o,2),s=l[0],u=l[1];a(rn(e,u)),s.forEach((function(t){a(on(e,t))}))}}}}},dn=(a={},Object(u.a)(a,"@actions/parties/upsert-party",(function(e,t){return qe(e,t.payload.party)})),Object(u.a)(a,"@actions/parties/upsert-character",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{characters:qe(e.characters,t.payload.character)})}))})),Object(u.a)(a,"@actions/parties/delete-character",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{characters:e.characters.filter((function(e){return e.id!==t.payload.characterId}))})}))})),Object(u.a)(a,"@actions/parties/upsert-item",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{items:qe(e.items,t.payload.item)})}))})),Object(u.a)(a,"@actions/parties/delete-item",(function(e,t){return Me(e,t.payload.partyId,(function(e){return Object(f.a)({},e,{items:e.items.filter((function(e){return e.id!==t.payload.itemId}))})}))})),a),un=Zt("Max M"),fn=Zt("Katie C"),mn=Zt("Milo W"),gn=Object(y.a)(),hn=[{id:gn,items:Object(m.a)(Array(80).fill(null).map((function(){return ht()}))),skills:[Vt,Yt,Lt,Xt,Qt,Jt,Kt,$t,Nt,_t],mods:[nn],characters:[Object(f.a)({},un,{weapon:tn,skills:[].concat(Object(m.a)(un.skills),[Vt,Yt,Lt,Xt,Qt,Jt,Kt,$t,Nt,_t])}),Object(f.a)({},fn,{skills:[].concat(Object(m.a)(fn.skills),[Vt,Yt,Lt,Xt,Qt,Jt,Kt,$t,Nt,_t]),weapon:en}),Object(f.a)({},mn,{skills:[].concat(Object(m.a)(mn.skills),[Vt,Yt,Lt,Xt,Qt,Jt,Kt,$t,Nt,_t]),weapon:ut("greataxe","mythic")})]}],pn=Re(dn,hn),bn=function(){return function(e,t){var n=Object(Ie.b)();return Object(i.useMemo)((function(){return Object(Te.b)(e,n)}),t?[n].concat(Object(m.a)(t)):[n])}(sn)},yn={parties:[],rawParties:[],userParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawUserParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},activeCharacterId:null,upsertParty:function(e){},upsertItem:function(e){},upsertCharacter:function(e,t){},deleteCharacter:function(e,t){},findCharacter:function(e,t){},findRawCharacter:function(e,t){},equipItem:function(e,t,n){},unequipItem:function(e,t,n){},setActiveCharacterId:function(e){}},vn=c.a.createContext(yn),En=function(e){var t=e.children,n=bn(),a=Object(Ie.c)((function(e){return e.parties})),r=Object(i.useMemo)((function(){return a.map((function(e){return Se(e)}))}),[a]),o=r.find((function(e){return e.id===gn})),l=a.find((function(e){return e.id===gn})),s=Object(i.useState)(null),u=Object(d.a)(s,2),f=u[0],m=u[1];return c.a.createElement(vn.Provider,{value:{parties:r,rawParties:a,userParty:o,rawUserParty:l,activeCharacterId:f,upsertParty:function(e){if(e){if(e.processed)throw new Error("No Processed Parties Allowed");n.upsertParty(e)}},upsertItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;n.upsertItem(t,e)},upsertCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;if(e){if(e.processed)throw new Error("No processed Characters Allowed");n.upsertCharacter(t,e)}},deleteCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn;n.deleteCharacter(t,e)},equipItem:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gn;n.equipItem(a,e,t)},unequipItem:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gn;n.unequipItem(a,e,t)},findCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn,n=r.find((function(e){return e.id===t}));return n.characters.find((function(t){return t.id===e}))},findRawCharacter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gn,n=a.find((function(e){return e.id===t}));return n.characters.find((function(t){return t.id===e}))},setActiveCharacterId:m}},t)},wn=function(){return Object(i.useContext)(vn)},On=function(e){return{type:"@state/rolls/ADD_ROLL",payload:{rollResult:e}}},xn=Object(u.a)({},"@state/rolls/ADD_ROLL",(function(e,t){return[].concat(Object(m.a)(e),[t.payload.rollResult])})),kn=Re(xn,[]),jn=c.a.createContext({history:[],execRoll:function(e){return{}},execCheck:function(e){return{}},rollCharacter:function(e){return function(t,n,a){return A(t,e)}},checkCharacter:function(e){return function(t,n,a){return H(t,e)}},getProbability:function(e){return 0}}),Cn=function(){return Object(i.useContext)(jn)},Sn=function(e){var t=e.children,n=e.rolls,a=e.addRoll,r=Tn(),i=e.character||r.character;return c.a.createElement(jn.Provider,{value:{history:n,execRoll:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=e.keys?A(e,i,n):x(e,n);return t&&a(c,r),c},execCheck:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=e.keys?H(e,i,n):C(e,n);return t&&a(c,r),c},rollCharacter:function(e){return function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,c=A(t,e,r);return n&&a(c,i),c}},checkCharacter:function(e){return function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,c=H(t,e,r);return n&&a(c,i),c}},getProbability:function(e){return j(G(e,i))}}},t)},Rn=function(e){var t=e.children,n=e.character,a=Object(Ie.c)((function(e){return e.rolls})),r=Object(Ie.b)();return c.a.createElement(Sn,{rolls:a,addRoll:function(e,t){r(On(Object(f.a)({},e,{label:t})))},character:n},t)},In=c.a.createContext({rawCharacter:Ce,character:se(Ce),onChange:function(e){}}),Tn=function(){return Object(i.useContext)(In)},qn=function(e){var t=e.character,n=e.children,a=e.onChange,r=Object(i.useMemo)((function(){return se(t)}),[t]);return c.a.createElement(In.Provider,{value:{character:r,rawCharacter:t,onChange:a}},c.a.createElement(Rn,null,n))},Mn=function(e){var t=e.children,n=e.characterId,a=wn(),r=a.activeCharacterId,i=a.rawUserParty,o=a.upsertCharacter,l=i.characters.find((function(e){return e.id===n}))||i.characters.find((function(e){return e.id===r}))||Ce;return c.a.createElement(qn,{character:l,onChange:function(e){if(e){if(e.processed)throw new Error("no process characters allowed");o(e)}}},t)},Pn=n(40),Dn=Object(Pn.b)("div",(function(e){return{display:"flex",flexDirection:e.$direction||"row",flex:e.$full?1:"default"}})),Bn=Object(Pn.b)("div",(function(){return{flex:1}})),Wn=n(50),zn=n.n(Wn),Gn=n(136),An=n.n(Gn),Hn=n(137),Fn=n.n(Hn),Un=n(138),$n=n.n(Un),Ln=n(139),Kn=n.n(Ln),Nn=n(140),_n=n.n(Nn),Vn=n(141),Yn=n.n(Vn),Jn=n(142),Xn=n.n(Jn),Qn=n(143),Zn=n.n(Qn),ea=n(144),ta=n.n(ea),na=n(145),aa=n.n(na),ra=n(146),ia=n.n(ra),ca=n(147),oa=n.n(ca),la=n(148),sa=n.n(la),da=n(149),ua=n.n(da),fa=n(150),ma=n.n(fa),ga=n(151),ha=n.n(ga),pa=n(152),ba=n.n(pa),ya=n(153),va=n.n(ya),Ea=n(154),wa=n.n(Ea),Oa=n(155),xa=n.n(Oa),ka=n(156),ja=n.n(ka),Ca=n(157),Sa=n.n(Ca),Ra=n(158),Ia=n.n(Ra),Ta=n(159),qa=n.n(Ta),Ma=n(160),Pa=n.n(Ma),Da=n(161),Ba=n.n(Da),Wa=n(162),za=n.n(Wa),Ga=n(73),Aa=n.n(Ga),Ha=n(163),Fa=n.n(Ha),Ua=n(164),$a=n.n(Ua),La=n(74),Ka=n.n(La),Na=n(165),_a=n.n(Na),Va=n(166),Ya=n.n(Va),Ja=n(167),Xa=n.n(Ja),Qa=n(168),Za=n.n(Qa),er=n(169),tr=n.n(er),nr=n(170),ar=n.n(nr),rr=n(171),ir=n.n(rr),cr={weaponHands:zn.a,characterPoints:An.a,heads:Fn.a,bodies:$n.a,hands:Kn.a,fingers:_n.a,feet:Yn.a},or={slashing:Xn.a,piercing:Zn.a,fire:ta.a,blood:aa.a,light:ia.a,dark:oa.a},lr={weapon:"",armor:"",shield:sa.a,tome:ua.a},sr={fists:ma.a,axe:ha.a,greataxe:ba.a,flail:xa.a,daggers:ja.a,katana:Sa.a,rapier:Ia.a,wand:qa.a,staff:Pa.a,elementalSword:Aa.a,elementalGreatsword:Ka.a,sword:va.a,greatsword:wa.a,pistol:Ba.a,crossbow:za.a},dr={"fire-sword":Aa.a,"blood-sword":Fa.a,"light-sword":$a.a,"dark-sword":Ka.a},ur={helmet:_a.a,cowl:Ya.a,chestplate:Xa.a,robe:Za.a,gloves:tr.a,ring:ar.a,boots:ir.a},fr=function(e){var t=e.src,n=e.size,a=e.style,r=void 0===a?{}:a,o=e.fill,l=void 0===o?"white":o,s=Object(i.useState)(!0),u=Object(d.a)(s,2),m=u[0],g=u[1],h=Object(i.useState)(""),p=Object(d.a)(h,2),b=p[0],y=p[1];return Object(i.useEffect)((function(){t&&fetch(t).then((function(e){return e.text()})).then((function(e){return y(e)})).then((function(){return g(!1)}))}),[t]),m?c.a.createElement("div",null):c.a.createElement("div",{style:Object(f.a)({},r,{height:n,width:n,fill:l}),dangerouslySetInnerHTML:{__html:b}})},mr=n(189),gr=n(75),hr=n.n(gr),pr=n(172),br=function(e){var t=e.delay,n=void 0===t?500:t,a=e.children,r=Object(i.useState)(!1),o=Object(d.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)(!1),f=Object(d.a)(u,2),m=f[0],g=f[1],h=Object(i.useState)(Object(y.a)()),p=Object(d.a)(h,2),b=p[0],v=p[1];Object(i.useLayoutEffect)((function(){(function(){var e=Object(pr.a)(hr.a.mark((function e(){return hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&setTimeout((function(){v(Object(y.a)())}),n);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(i.useLayoutEffect)((function(){l&&g(!0)}),[b]);return c.a.createElement("div",{onMouseEnter:function(e){e.preventDefault(),e.stopPropagation(),s(!0)},onMouseLeave:function(e){e.preventDefault(),e.stopPropagation(),s(!1),g(!1)}},a({isHovering:m}))},yr=function(e){var t=e.style,n=void 0===t?{}:t,a=e.substyle,r=void 0===a?{}:a,i=e.children,o=e.tag,l=void 0===o?"div":o,s=Object(mr.a)(e,["style","substyle","children","tag"]);return c.a.createElement("div",{style:Object(f.a)({border:"1px solid #000",display:"flex",boxSizing:"border-box"},n)},c.a.createElement(l,Object.assign({style:Object(f.a)({border:r.border||"1px solid #555",background:"linear-gradient(0deg, #222222 0%, #2a2a2a 100%)",padding:10,color:"#ccc",flex:1},r)},s),i))},vr=function(e){return c.a.createElement(yr,Object.assign({},e,{style:Object(f.a)({height:40,width:40},e.style),substyle:Object(f.a)({display:"flex",padding:0,justifyContent:"center",alignItems:"center",background:"#111"},e.substyle)}),e.children)},Er=function(e){return c.a.createElement(br,{delay:0},(function(t){var n=t.isHovering;return c.a.createElement(yr,Object.assign({},e,{tag:"button",style:Object(f.a)({margin:0},e.style||{}),substyle:Object(f.a)({borderColor:n?"#999":"#555",padding:"4px",cursor:e.disabled?"default":"pointer",background:e.disabled?"#444":"#111"},e.substyle||{})}))}))},wr=function(e){var t=e.id,n=Tn().character,a=cr[t];return c.a.createElement(yr,{substyle:{display:"flex",padding:4,fontFamily:"monospace",fontSize:16}},c.a.createElement("div",{style:{flex:1,marginRight:10}},c.a.createElement(fr,{size:18,src:a})),n.resources[t])},Or=function(e){var t=e.id,n=e.edit,a=void 0===n||n,r=Tn(),i=r.character,o=r.rawCharacter,l=r.onChange,s=wn().upsertItem,u=Cn().execCheck,f=me[t],m=o.abilities[t],g=i.abilities[t],h=ge[t],p=i.resources.characterPoints;return c.a.createElement(xr,{name:f,value:g,rawValue:m,points:p,cost:h,edit:a,onClick:function(){u(M([t]))},onIncrement:function(){var e=fe(o)(t,m+1,p-h),n=Object(d.a)(e,2),a=n[0],r=n[1];l(a),r.forEach((function(e){s(e)}))},onDecrement:function(){var e=fe(o)(t,m-1,p+h),n=Object(d.a)(e,2),a=n[0],r=n[1];l(a),r.forEach((function(e){s(e)}))}})},xr=function(e){var t=e.name,n=e.edit,a=e.rawValue,r=e.value,i=e.points,o=e.cost,l=e.onClick,s=e.onIncrement,d=e.onDecrement;return c.a.createElement(yr,{substyle:{padding:0,display:"flex",fontFamily:"monospace"}},c.a.createElement(Dn,{style:{padding:8,marginRight:10,whiteSpace:"nowrap"},$direction:"column",$full:!0},c.a.createElement("a",{href:"#",onClick:l},t," (",a,")"),c.a.createElement("span",{style:{fontSize:36,fontWeight:"bolder"}},r)),n&&c.a.createElement(Dn,{$direction:"column",style:{width:30}},c.a.createElement(Er,{style:{margin:0},disabled:i<o||18===a,onClick:s},"+"),c.a.createElement(Dn,{$full:!0,style:{alignItems:"center",justifyContent:"center"}},c.a.createElement("div",null,o)),c.a.createElement(Er,{style:{margin:0},disabled:3===a,onClick:d},"-")))},kr=function(e){var t=e.id,n=Tn().character,a=Cn().execCheck,r=t;return c.a.createElement(yr,{style:{flex:1},substyle:{display:"flex",fontFamily:"monospace",alignItems:"center"}},c.a.createElement("a",{href:"#",style:{display:"inline-block",flex:1,marginRight:10},onClick:function(){return a(M([t]))}},r),c.a.createElement("span",null,n.stats[t]))},jr=function(e){var t=e.id,n=Tn().character,a=Cn().execRoll,r=n.damageResistances[t],i=r?"(".concat(F(z(r,n)),")"):"",o=or[t],l=$[t];return c.a.createElement(yr,{style:{flex:1},substyle:{display:"flex",whiteSpace:"nowrap",fontFamily:"monospace",alignItems:"center"}},c.a.createElement("div",{style:{flex:1,marginRight:20}},c.a.createElement(Dn,null,c.a.createElement(fr,{size:18,src:o,fill:l,style:{marginRight:10}}),c.a.createElement("a",{href:"#",onClick:function(){return r?a(r):null}},t))),c.a.createElement("div",null,i||0))},Cr=n(12),Sr=n.n(Cr),Rr=function(){return arguments.length<=1?void 0:arguments[1]},Ir=function(){return arguments.length<=2?void 0:arguments[2]},Tr=["lightcoral","inherit","lightgreen"],qr=function(e,t){return n=(a=e-t)<0?-1:a>0?1:0,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t[n+1]};var n,a},Mr=function(e){var t=e.trait,n=e.compareResult,a=void 0===n?function(e){return Rr}:n,r=t.abilitiesModifiers,i=t.statsModifiers,o=g(r).filter((function(e){return 0!==xe(t,e)})),l=g(i).filter((function(e){return 0!==xe(t,e)}));return c.a.createElement("div",{style:{fontFamily:"monospace"}},0!==t.focusOffset&&c.a.createElement("span",null,b(t.focusOffset),Math.abs(t.focusOffset)," FP",0!==t.healthOffset||o.length>0||l.length>0?", ":""),0!==t.healthOffset&&c.a.createElement("span",null,b(t.healthOffset),Math.abs(t.healthOffset)," HP",o.length>0||l.length>0?", ":""),o.map((function(e,n){return c.a.createElement("span",{key:e},n>0?", ":"",c.a.createElement("span",{style:{color:a(e).apply(void 0,Object(m.a)(Tr))}},b(xe(t,e)),Math.abs(xe(t,e))," ",me[e]))})),o.length>0&&l.length>0&&", ",l.map((function(e,n){return c.a.createElement("span",{key:e},n>0?", ":"",c.a.createElement("span",{style:{color:a(e).apply(void 0,Object(m.a)(Tr))}},b(xe(t,e)),Math.abs(xe(t,e))," ",me[e]))})))},Pr=function(e){return p(e,"".concat(Math.abs(e)))},Dr=n(31),Br=n.n(Dr),Wr=function(e){var t=e.check,n=e.name,a=e.showCheckButton,r=void 0===a||a,o=e.compareResult,l=void 0===o?Rr:o,s=Cn(),d=s.execCheck,u=s.getProbability,f=t.value||0,g=(t.keys||[]).map((function(e){return me[e]})),h=g.reduce((function(e,t,n){return"".concat(e).concat(0!==n?"+":"").concat(t)}),"")+(0===g.length?"":b(f)),p=t.roll.string?" {".concat(t.roll.string,"} "):"",y=Object(i.useMemo)((function(){return u(t,!0)}),[t,u]);return c.a.createElement(Dn,null,c.a.createElement("div",{style:{marginRight:10,flex:1,color:l.apply(void 0,Object(m.a)(Tr))}},n&&c.a.createElement("strong",null,n),c.a.createElement("div",{style:{fontFamily:"monospace",whiteSpace:"nowrap"}},p,h,p&&Pr(f)," ",!p&&" = "+Pr(t.roll.modifier)," (",y,"%)")),r&&c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return d(t)}},c.a.createElement(fr,{src:Br.a,size:18,fill:"4bebc6"}))))},zr=function(e){var t=e.item,n=e.size,a=e.fill,r=e.style,i=ur[t.armorType];return c.a.createElement(fr,{src:i,size:n,fill:a,style:r})},Gr={common:"#fff",uncommon:"#9fbd9f",rare:"#91b4f2",legendary:"#cda5f3",unique:"#c2af6b",mythic:"lightsalmon",set:"#38f5e2"},Ar=function(e){var t=e.item,n=e.size,a=e.fill,r=e.style,i=lr[t.type];return c.a.createElement(fr,{src:i,size:n,fill:a,style:r})},Hr=function(e){var t=e.item,n=e.showEquipButton,a=void 0===n||n,r=e.showRequirementCheck,o=void 0===r||r,l=e.showCollapseButton,s=void 0!==l&&l,u=Tn().rawCharacter,f=wn().unequipItem,g=Object(i.useState)(!1),h=Object(d.a)(g,2),p=h[0],b=h[1],y=e.requirementCompare||Rr,v=e.traitCompare||function(e){return Rr},E=e.resistancesCompare||function(e){return Rr},w=e.costComare||Rr,O="armor"===t.type,x=Gr[t.rarity],k=Sr()(x).desaturate(.5).fade(.5).rgb().string();return c.a.createElement(yr,{style:{width:380},substyle:{borderColor:k}},c.a.createElement(Dn,null,O?c.a.createElement(zr,{item:t,size:24,fill:x,style:{marginRight:10}}):c.a.createElement(Ar,{item:t,size:24,style:{marginRight:10},fill:x}),c.a.createElement("h3",{style:{margin:"0 10px 0 0",flex:1,whiteSpace:"nowrap"}},t.name),s&&c.a.createElement(Er,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){b((function(e){return!e}))}},p?"more":"less"),!a&&c.a.createElement(Dn,{style:{margin:"0 0 10px 0",fontWeight:"bold",fontSize:12,color:w.apply(void 0,Object(m.a)(Tr))}},c.a.createElement(fr,{src:cr[t.resource],size:12,fill:w("lightcoral","white","lightgreen"),style:{margin:"0 8px"}}),t.cost),a&&c.a.createElement(Er,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){f(u.id,t.id)}},c.a.createElement(fr,{src:cr[t.resource],size:12,fill:"rgba(255,255,255,0.8)",style:{marginRight:10}}),t.cost)),!p&&c.a.createElement(c.a.Fragment,null,1!==t.requirementCheck.roll.modifier&&o&&c.a.createElement("div",{style:{marginTop:10}},c.a.createElement(Wr,{name:"Requirement",check:t.requirementCheck,showCheckButton:!1,compareResult:y})),c.a.createElement(Dn,{$direction:"column"},t.traits.map((function(e){return c.a.createElement("div",{key:e.id,style:{marginTop:10}},c.a.createElement(Mr,{trait:e,compareResult:v}))})),t.damageResistances&&c.a.createElement(Dn,{style:{fontFamily:"monospace",flexWrap:"wrap",marginTop:15,justifyContent:"space-evenly"}},L(t.damageResistances).filter((function(e){return t.damageResistances[e]})).map((function(e){return c.a.createElement(Dn,{key:e},c.a.createElement(fr,{src:or[e],size:14,fill:$[e],style:{marginRight:8}}),c.a.createElement("div",{style:{fontSize:16,lineHeight:"16px",color:E(e).apply(void 0,Object(m.a)(Tr))}},U(t.damageResistances[e])||0))}))))))},Fr={helmet:0,cowl:0,chestplate:1,robe:1,gloves:2,ring:3,boots:4},Ur=n(11),$r=n.n(Ur),Lr=function(e){var t=e.weapon,n=e.size,a=e.fill,r=e.style,i=t.icon?dr[t.icon]:sr[t.weaponType];return c.a.createElement(fr,{src:i,size:n,fill:a,style:r})},Kr=function(e){var t=e.parent,n=e.children,a=Tn().character,r=t.damageRolls,i=g(r).filter((function(e){return r[e]})),o=i.map((function(e){return r[e]})).filter((function(e){return e}));return c.a.createElement(yr,{style:{whiteSpace:"nowrap"},substyle:{padding:"4px 10px",background:"#111"}},n(i.map((function(e){return{id:e,key:e,damageRangeText:(t=r[e],F(z(t,a))),damageRollText:U(r[e])};var t})),W.apply(void 0,Object(m.a)(o))))},Nr=function(e){var t=e.id,n=e.damageRangeText,a=e.damageRollText,r=e.compareResult,i=void 0===r?Rr:r;return a?c.a.createElement(Dn,{key:t,style:{alignItems:"flex-end",padding:"4px 0",height:24,lineHeight:"24px"}},c.a.createElement("h3",{style:{margin:"0 8px 0 0"}},c.a.createElement("span",{style:{color:i.apply(void 0,Object(m.a)(Tr))}},"(",n,")")," ",c.a.createElement("span",{style:{color:"rgba(255,255,255, 0.5)"}},a)),c.a.createElement(fr,{src:or[t],size:20,fill:$[t],style:{marginBottom:2}})):null},_r=function(e){var t=Tn(),n=t.character,a=t.rawCharacter,r=(t.onChange,wn().unequipItem),i=e.showEquipButton,o=void 0===i||i,l=e.showRequirement,s=void 0===l||l,d=e.weapon||n.weapon,u=Gr[d.rarity],f=Sr()(u).desaturate(.5).fade(.5).rgb().string(),h=e.requirementCompare||Rr,p=e.accuracyCompare||Rr,b=e.traitCompare||function(e){return Rr},y=e.damageCompare||function(e){return Rr},v=e.costComare||Rr,E=ke(d.traits);return c.a.createElement(yr,{style:{width:380},substyle:{borderColor:f}},c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement(Lr,{weapon:d,size:24,fill:u}),c.a.createElement("h3",{style:{margin:"0 0 0 10px",flex:1}},d.name),d.id!==re.id&&o?c.a.createElement(Er,{substyle:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){return r(a.id,d.id)}},c.a.createElement(fr,{src:cr[d.resource],size:12,fill:"rgba(255,255,255,0.8)",style:{marginRight:10}}),d.cost):c.a.createElement(Dn,{style:{margin:"0 0 10px 0",fontWeight:"bold",fontSize:12,color:v.apply(void 0,Object(m.a)(Tr))}},c.a.createElement(fr,{src:cr.weaponHands,size:12,style:{margin:"0 8px"},fill:v("lightcoral","white","lightgreen")}),d.cost)),c.a.createElement(Dn,{style:{marginBottom:10}},s&&c.a.createElement(Bn,null,c.a.createElement(Wr,{name:"Requirement",showCheckButton:!1,check:d.requirementCheck,compareResult:h})),c.a.createElement(Bn,null,c.a.createElement(Wr,{name:"Accuracy",showCheckButton:!1,check:d.accuracyCheck,compareResult:p}))),c.a.createElement("div",{style:{marginBottom:10}},c.a.createElement(Mr,{trait:E,compareResult:b})),c.a.createElement("div",{style:{marginBottom:10}},g(d.events).map((function(e){return c.a.createElement(Dn,{key:e,style:{alignItems:"center"}},c.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},Y[e],":"),c.a.createElement(Mr,{trait:ke(d.events[e])}))}))),c.a.createElement(Kr,{parent:d},(function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{style:{fontFamily:"monospace",color:"rgba(255,255,255,0.25)"}},"(",F(z(t,n)),")"," ",U(t)),e.map((function(e){return c.a.createElement(Nr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText,compareResult:y(e.id)})})))})))},Vr=function(e){var t=e.item,n=void 0===t?{}:t,a=e.size,r=void 0===a?38:a,o=e.onClick,l=void 0===n.type,s=Gr[n?n.rarity:"common"],d=Sr()(s).desaturate(.5).fade(.5).rgb().string(),u="armor"===n.type,f="weapon"===n.type,m=Object(i.useMemo)((function(){return n?f?c.a.createElement(Lr,{weapon:n,size:r-16,fill:s}):u?c.a.createElement(zr,{item:n,size:r-16,fill:s}):void 0:null}),[n,u,f,s]);return n?c.a.createElement(br,null,(function(e){var t=e.isHovering;return c.a.createElement($r.a,{isOpen:t,direction:"bottom",tagName:"div",padding:"0",arrow:!1,content:"armor"===n.type?c.a.createElement(Hr,{item:n,showEquipButton:!1,showCollapseButton:!1}):c.a.createElement(_r,{weapon:n,showEquipButton:!1})},c.a.createElement(yr,{style:{height:r,width:r,cursor:n&&o?"pointer":"default"},substyle:{background:l?"#111":"#222",boxShadow:"inset 0 0 3px black",border:"1px solid ".concat(l?"#555":d),display:"flex",alignItems:"center",justifyContent:"center",padding:0},onClick:function(){return o&&o(n)}},m))})):null},Yr=function(e){var t=Tn(),n=t.character,a=t.rawCharacter,r=wn().unequipItem,i=n.armor,o=i.filter((function(e){return"ring"===e.armorType})),l=Array(10-o.length).fill(void 0);return c.a.createElement("div",null,c.a.createElement(Dn,null,[].concat(Object(m.a)(l),Object(m.a)(o)).map((function(e){return c.a.createElement(Vr,{key:e?e.id:Object(y.a)(),item:e,onClick:function(e){return r(a.id,e.id)}})}))),i.filter((function(e){return"ring"!==e.armorType})).sort((function(e,t){return Fr[e.armorType]-Fr[t.armorType]})).map((function(e){return c.a.createElement(Hr,{key:e.id,item:e,showRequirementCheck:!1,showCollapseButton:!1})})))},Jr=n(173),Xr=n.n(Jr),Qr=function(e){var t=e.name,n=void 0===t?"":t,a=e.value,r=e.max,o=e.color,l=e.height,s=void 0===l?30:l,u=e.children,f=Object(i.useState)(!1),m=Object(d.a)(f,2),g=m[0],h=m[1],p=a/r*100,b=p>100?100:p;return c.a.createElement($r.a,{isOpen:g,direction:"right",tagName:"div",padding:"0",content:c.a.createElement(yr,null,"".concat(n," (").concat(a," / ").concat(r,")"))},c.a.createElement(yr,{substyle:{padding:0,background:"#555",height:s-2,position:"relative"},onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)}},c.a.createElement(Dn,{style:{position:"absolute",left:0,boxSizing:"border-box",height:s-2,maxWidth:"".concat(b,"%"),minWidth:"".concat(b,"%"),border:b>0?"1px solid ".concat(Sr()(o).lighten(.5)):"none",boxShadow:"inset 1px 1px 0px rgba(0,0,0,0.5)",textShadow:"1px 1px 1px black",backgroundColor:o,color:"white",alignItems:"center",justifyContent:"center",transition:"all 0.5s"}}),c.a.createElement(Bn,{style:{position:"absolute",height:s,lineHeight:"".concat(s-2,"px"),right:4,top:0,fontFamily:"monospace",fontWeight:"bold",overflow:"hidden",textShadow:"0px 0px 3px black"}},u)))},Zr=function(){Tn().character;return c.a.createElement(Dn,null,c.a.createElement(Dn,{$direction:"column"},c.a.createElement(Or,{id:"strength",edit:!1}),c.a.createElement(Or,{id:"dexterity",edit:!1}),c.a.createElement(Or,{id:"intelligence",edit:!1}),c.a.createElement(Or,{id:"vigor",edit:!1})),c.a.createElement(Dn,{$direction:"column"},c.a.createElement(kr,{id:"health"}),c.a.createElement(kr,{id:"focus"}),c.a.createElement(kr,{id:"will"}),c.a.createElement(kr,{id:"perception"}),c.a.createElement(kr,{id:"agility"}),c.a.createElement(kr,{id:"accuracy"}),c.a.createElement(kr,{id:"evade"})),c.a.createElement(Dn,{$direction:"column"},c.a.createElement(jr,{id:"slashing"}),c.a.createElement(jr,{id:"piercing"}),c.a.createElement(jr,{id:"fire"}),c.a.createElement(jr,{id:"blood"}),c.a.createElement(jr,{id:"light"}),c.a.createElement(jr,{id:"dark"})))},ei=n(174),ti=n.n(ei),ni=n(175),ai=n.n(ni),ri=n(176),ii=n.n(ri),ci=n(177),oi=n.n(ci),li=function(e){var t=e.skillId,n=Tn().character,a=e.skill||n.skills.find((function(e){return e.id===t}))||Ht();return c.a.createElement(yr,{style:{width:380,background:"url(".concat(a.imgSrc,") no-repeat center center"),backgroundSize:"cover"},substyle:{background:"rgba(0,0,0,0.8)",borderColor:"rgba(255,255,255,0.5)"}},c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement("h3",{style:{margin:"0 10px 0 0",flex:1}},a.name)),c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement("strong",{style:{marginRight:10}},"Cost"),c.a.createElement("span",null,a.focusCost)),c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement(Bn,null,c.a.createElement(Wr,{name:"Requirement",showCheckButton:!1,check:a.requirementCheck})),a.check&&c.a.createElement(Bn,null,c.a.createElement(Wr,{name:"Skill Check",showCheckButton:!1,check:a.check})),a.combineWeaponDamage&&c.a.createElement(Bn,null,c.a.createElement(Wr,{name:"Accuracy",showCheckButton:!1,check:n.weapon.accuracyCheck}))),a.targetTraits.length>0&&c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},"target:"),c.a.createElement(Mr,{trait:ke(a.targetTraits)})),a.sourceTraits.length>0&&c.a.createElement(Dn,{style:{marginBottom:10}},c.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},"self:"),c.a.createElement(Mr,{trait:ke(a.sourceTraits)})),c.a.createElement("div",{style:{marginBottom:10}},g(a.events).map((function(e){return c.a.createElement(Dn,{key:e,style:{alignItems:"center"}},c.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},Y[e],":"),c.a.createElement(Mr,{trait:ke(a.events[e])}))}))),a.combineWeaponDamage&&c.a.createElement("div",{style:{marginBottom:10}},g(n.weapon.events).map((function(e){return c.a.createElement(Dn,{key:e,style:{alignItems:"center"}},c.a.createElement("strong",{style:{fontFamily:"monospace",marginRight:10,color:"rgba(255,255,255,0.5)"}},Y[e],":"),c.a.createElement(Mr,{trait:ke(n.weapon.events[e])}))}))),a.combineWeaponDamage||Object.keys(a.damageRolls).length>0&&c.a.createElement(Kr,{parent:a.combineWeaponDamage?n.weapon:a},(function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{style:{fontFamily:"monospace",color:"rgba(255,255,255,0.25)"}},"(",F(z(t,n)),")"," ",U(t)),e.map((function(e){return c.a.createElement(Nr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText})})))})))},si=function(e){var t=e.activeSkillId,n=void 0===t?Ft.id:t,a=e.skills,r=e.onClick,i=Tn().character,o=function(e){return n===e};return c.a.createElement(Dn,{style:{marginBottom:2}},a.map((function(e){return c.a.createElement(di,{key:e.id,skill:e,disabled:i.dead||i.stats.focus-i.focusOffset<e.focusCost,onClick:function(){return r(e.id)},style:Object(f.a)({padding:0,height:36,maxWidth:36,margin:0,borderColor:"transparent",opacity:i.dead||i.stats.focus-i.focusOffset<e.focusCost?.2:o(e.id)?1:.7},o(e.id)?{borderColor:"turquoise"}:{})})})))},di=function(e){var t=e.skill,n=e.disabled,a=e.style,r=e.onClick,i=t.id===Ft.id||t.id===Ut.id;return c.a.createElement(br,null,(function(e){var o=e.isHovering;return c.a.createElement($r.a,{isOpen:o,direction:"down",tagName:"div",padding:"0",arrow:!1,content:i?c.a.createElement(yr,null,t.name):c.a.createElement(li,{skillId:t.id,skill:t})},c.a.createElement(yr,{onClick:function(){return!n&&r(t.id)},substyle:Object(f.a)({borderColor:o?"#999":"#555",padding:"4px",cursor:n?"default":"pointer",background:n?"#444":"#111"},a),style:{border:"none"}},t.imgSrc&&c.a.createElement("img",{src:t.imgSrc,height:34,width:34,style:{height:34,maxWidth:34,boxSizing:"border-box",border:"1px solid black"}})))}))},ui=n(51),fi={dictionaries:[ui.a,ui.b],length:2,separator:" "},mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{id:Object(y.a)(),npc:!0,name:Object(ui.c)(fi),power:600,resources:Object(f.a)({characterPoints:250,weaponHands:2,heads:1,bodies:1,hands:2,fingers:10,feet:2},n),abilities:Object(f.a)({strength:10,dexterity:10,intelligence:10,vigor:10},e),damageResistances:Object(f.a)({slashing:q([]),piercing:q([]),fire:q([]),blood:q([]),light:q([]),dark:q([])},t),weapon:ut(Pe(["axe","greataxe","wand","staff","daggers","katana","sword","greatsword","flail","elementalGreatsword","elementalSword"])),traits:[],skills:[Ft],equippedItems:[],armor:[at("cowl"),at("chestplate"),at("gloves"),at("boots")],healthOffset:0,focusOffset:0,dead:!1,inspected:!1}},gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.a)();return{id:e,items:[],skills:[],mods:[],characters:[mi(),mi(),mi(),mi(),mi()].map((function(t){return Object(f.a)({},t,{partyId:e})}))}},hi=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return c.a.createElement("span",{style:{color:e,fontWeight:n?"bold":"normal"}},t)},pi=function(e){return Ri(e)?hi("lightgreen",e.name):hi("lightsalmon",e.name)},bi=function(e){return 0!==e},yi=function(e){return e>0?"gained":"lost"},vi=function(e,t,n,a){e.targetTraits.forEach((function(e){var t=n.focusOffset-e.focusOffset,r=t<0?e.focusOffset+t:e.focusOffset;bi(r)&&a(c.a.createElement("span",null,pi(n)," ",yi(r)," ",r," FP.")),g(e.abilitiesModifiers).forEach((function(t){bi(e.abilitiesModifiers[t])&&a(c.a.createElement("span",null,pi(n)," ",yi(e.abilitiesModifiers[t])," ",e.abilitiesModifiers[t]," ",t,"."," ",e.duration>1&&"(".concat(e.duration-1)))})),g(e.statsModifiers).forEach((function(t){bi(e.statsModifiers[t])&&a(c.a.createElement("span",null,pi(n)," ",yi(e.statsModifiers[t])," ",e.statsModifiers[t]," ",t,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))}))})),e.sourceTraits.forEach((function(e){var n=t.focusOffset-e.focusOffset,r=n<0?e.focusOffset+n:e.focusOffset;bi(r)&&a(c.a.createElement("span",null,pi(t)," ",yi(r)," ",r," FP."));var i=t.healthOffset-e.healthOffset,o=i<0?e.healthOffset+i:e.healthOffset;bi(o)&&a(c.a.createElement("span",null,pi(t)," ",yi(o)," ",o," HP.")),g(e.abilitiesModifiers).forEach((function(n){bi(e.abilitiesModifiers[n])&&a(c.a.createElement("span",null,pi(t)," ",yi(e.abilitiesModifiers[n])," ",e.abilitiesModifiers[n]," ",n,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))})),g(e.statsModifiers).forEach((function(n){bi(e.statsModifiers[n])&&a(c.a.createElement("span",null,pi(t)," ",yi(e.statsModifiers[n])," ",e.statsModifiers[n]," ",n,"."," ",e.duration>1&&"(".concat(e.duration-1,")")))}))}))},Ei={id:"zero",sourceId:"",targetId:"",skill:Ft,index:0,hitSuccess:!1,criticalSuccess:!1,dodgeSuccess:!1,rawDamage:0,blockedDamage:0,totalDamage:0,targetTraits:[],sourceTraits:[]},wi=function(e){return e||Object(f.a)({},S,{keys:[]})},Oi=function(e,t){return e.combineWeaponDamage?{slashing:W(wi(e.damageRolls.slashing),wi(t.damageRolls.slashing)),piercing:W(wi(e.damageRolls.piercing),wi(t.damageRolls.piercing)),fire:W(wi(e.damageRolls.fire),wi(t.damageRolls.fire)),blood:W(wi(e.damageRolls.blood),wi(t.damageRolls.blood)),light:W(wi(e.damageRolls.light),wi(t.damageRolls.light)),dark:W(wi(e.damageRolls.dark),wi(t.damageRolls.dark))}:e.damageRolls},xi=function(e,t,n){return function(a,r){var i=Object(f.a)({},Ei,{id:Object(y.a)(),targetId:a.id,sourceId:r.id}),c=r.skills.find((function(t){return t.id===e[r.id]}))||Ft;i.skill=c;var o=r.weapon,l=Oi(c,o),s=function(e,t){return e.combineWeaponDamage?t.accuracyCheck:e.check||M([],void 0,0,18)}(c,o),d=t(r)(s);if(d.result){var u=d.criticalSuccess;i.hitSuccess=!0,i.criticalSuccess=u;var m=n(r),g=K(m)(l,u,"".concat(r.name," damage"));i.rawDamage=g.total;var h=t(a)(M(["evade"],void 0));if(i.dodgeSuccess=h.result||!1,!h.result){var p=a.damageResistances;L(g.rollResults).filter((function(e){return g.rollResults[e]})).forEach((function(e){var t=g.rollResults[e],a=p[e],c=n(r)(a,!0),o=u?0:c.total,l=t.total-o;i.blockedDamage+=t.total>0?o:0,i.totalDamage+=v(l)}))}c.checkDodgeForTraits&&h.result||(i.targetTraits=c.targetTraits,i.sourceTraits=c.sourceTraits)}return i}},ki=function(e,t,n,a,r){if(0===e.length)return[];if(!t||!n)return[];var i=[].concat(Object(m.a)(t.characters),Object(m.a)(n.characters)),o=function(e,t){i=i.map((function(n){return n.id===e?t(n):n}))},l=e[e.length-1];return a(c.a.createElement("strong",{style:{color:"lightblue",fontSize:20,display:"inline-block",marginTop:4}},"ROUND ".concat(e.length))),Object.values(l).sort((function(e,t){return e.index-t.index})).forEach((function(e){var t=i.map((function(e){return se(e)})),n=t.find((function(t){return t.id===e.sourceId})),r=t.find((function(t){return t.id===e.targetId})),l=i.find((function(t){return t.id===e.sourceId})),s=i.find((function(t){return t.id===e.targetId}));if(l&&n&&s&&r&&!n.dead&&!r.dead){!function(e,t,n,a){e.skill.id!==Ft.id&&a(c.a.createElement("span",null,pi(t)," casts ",hi("#cda5f3",e.skill.name),e.skill.target&&c.a.createElement("span",null," on ",pi(n),"."))),e.hitSuccess?(e.skill.id===Ft.id?a(c.a.createElement("span",null,pi(t)," attacks ",pi(n)," for"," ",hi("white","".concat(e.totalDamage," damage")),".")):(e.rawDamage>0&&a(c.a.createElement("span",null,hi("#cda5f3",e.skill.name)," deals"," ",hi("white","".concat(e.totalDamage," damage")),".")),(e.targetTraits.length>0||e.sourceTraits.length>0)&&vi(e,t,n,a)),e.criticalSuccess&&a(c.a.createElement("span",{style:{color:"khaki"}},"Critical hit!"))):e.skill.id===Ft.id?a(c.a.createElement("span",null,pi(t),"'s attack missed.")):a(c.a.createElement("span",null,hi("#cda5f3",e.skill.name)," ",e.skill.target?"missed":"failed",".")),e.dodgeSuccess&&a(c.a.createElement("span",null,pi(n)," dodged ",pi(t),"'s attack")),n.stats.health<=n.healthOffset+e.totalDamage&&a(hi("lightcoral","".concat(n.name," died")))}(e,n,r,a);var d=e.skill,u=s.healthOffset+e.totalDamage,g=l.focusOffset+d.focusCost,h=function(t,n){return e.hitSuccess?Object(f.a)({},de(t)(ke(n)),{traits:[].concat(Object(m.a)(t.traits),Object(m.a)(n.map((function(e){return Object(f.a)({},e,{healthOffset:0,focusOffset:0})}))))}):t};o(r.id,(function(e){return Object(f.a)({},e,{},h(e,d.targetTraits),{inspected:d.inspected||e.inspected,healthOffset:u})})),o(n.id,(function(e){return Object(f.a)({},e,{},h(e,d.sourceTraits),{focusOffset:g})})),d.combineWeaponDamage&&e.hitSuccess&&ji("onHit",n,l,d,a,o),d.combineWeaponDamage&&e.criticalSuccess&&ji("onCrit",n,l,d,a,o)}})),i.forEach((function(e){var t=se(e);r(Object(f.a)({},e,{traits:t.dead?e.traits:e.traits.map((function(e){return Object(f.a)({},e,{duration:e.duration-1})})).filter((function(e){return 0!==e.duration}))}),e.partyId)})),i.map((function(e){return se(e)}))},ji=function(e,t,n,a,r,i){var o=function(e,t){return function(n){if(e.processed)throw new Error("No Processed Characters [checkEvent]");var a=t.events[n];if(t.combineWeaponDamage){var r=e.weapon;if(!r)return a;var i=r.events[n];return i?[].concat(Object(m.a)(a||[]),Object(m.a)(i)):a}return a}}(n,a)(e),l=a.combineWeaponDamage&&!a.events[e]?t.weapon.name:a.name;if(o){var s=ke(o),d=t.healthOffset-s.healthOffset,u=d<=0?s.healthOffset+d:s.healthOffset;0!==u&&r(c.a.createElement("span",null,pi(t)," ",yi(u)," ",u," HP from ",l,"."));var h=t.focusOffset-s.focusOffset,p=h<0?s.focusOffset+h:s.focusOffset;0!==p&&r(c.a.createElement("span",null,pi(t)," ",yi(p)," ",p," FP from ",l,".")),g(s.abilitiesModifiers).forEach((function(e){var n=s.abilitiesModifiers[e];0!==n&&r(c.a.createElement("span",null,pi(t)," ",yi(n)," ",n," ",e," from ",l,"."))})),i(n.id,(function(e){return Object(f.a)({},de(e)(s),{traits:[].concat(Object(m.a)(e.traits),Object(m.a)(o.map((function(e){return Object(f.a)({},e,{healthOffset:0})}))))})}))}},Ci=function(e){return e&&0===e.characters.filter((function(e){return e.healthOffset<e.stats.health})).length},Si=Object(y.a)(),Ri=function(e){return e.partyId===gn},Ii=c.a.createContext({lines:[],addLine:function(e){},clear:function(){}}),Ti=function(){return Object(i.useContext)(Ii)},qi=function(e){var t=e.children,n=Object(i.useState)([]),a=Object(d.a)(n,2),r=a[0],o=a[1];return c.a.createElement(Ii.Provider,{value:{lines:r,addLine:function(e){return o((function(t){return[].concat(Object(m.a)(t),[e])}))},clear:function(){return o([])}}},t)},Mi=n(76),Pi=n.n(Mi),Di={isOpen:!1,contents:null,callback:null,payload:null,blocking:!1,style:{}},Bi="modalContext/OPEN",Wi="modalContext/CLOSE",zi=function(e,t,n){return{type:Bi,contents:e,style:t,blocking:n}},Gi=function(){return{type:Wi}},Ai=function(e){return{type:"modalContext/SET_PAYLOAD",payload:e}},Hi=function(e){return{type:"modalContext/SET_CONTENTS",contents:e}},Fi=function(e){return{type:"modalContext/SET_CALLBACK",callback:e}},Ui=function(e){return{type:"modalContext/SET_BLOCKING",blocking:e}},$i=function(e){return{type:"modalContext/SET_STYLE",style:e}},Li=(r={},Object(u.a)(r,Bi,(function(e,t){return Object(f.a)({},e,{isOpen:!0,contents:t.contents?t.contents:e.contents,style:t.style?t.style:e.style||{},blocking:t.blocking||!1})})),Object(u.a)(r,Wi,(function(e){return Object(f.a)({},e,{isOpen:!1})})),Object(u.a)(r,"modalContext/SET_PAYLOAD",(function(e,t){return Object(f.a)({},e,{payload:t.payload})})),Object(u.a)(r,"modalContext/SET_CONTENTS",(function(e,t){return Object(f.a)({},e,{callback:null,payload:null,contents:t.contents,blocking:!1,style:{}})})),Object(u.a)(r,"modalContext/SET_CALLBACK",(function(e,t){return Object(f.a)({},e,{callback:t.callback})})),Object(u.a)(r,"modalContext/SET_BLOCKING",(function(e,t){return Object(f.a)({},e,{blocking:t.blocking})})),Object(u.a)(r,"modalContext/SET_STYLE",(function(e,t){return Object(f.a)({},e,{style:t.style})})),r),Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di,t=arguments.length>1?arguments[1]:void 0,n=Li[t.type];return n?n(e,t):e},Ni=c.a.createContext({open:function(){return null},close:function(){return null},setBlocking:function(){return null},setPayload:function(){return null},setContents:function(){return null},setCallback:function(){return null},setStyle:function(){return null}}),_i=function(){return Object(i.useContext)(Ni)},Vi=function(e,t){return{isOpen:e.isOpen,open:function(e,n,a){return t(zi(e,n,a))},close:function(n){e.callback&&e.callback(n||e.payload),t(Gi())},setPayload:function(e){return t(Ai(e))},setContents:function(e){return t(Hi(e))},setCallback:function(e){return t(Fi(e))},setBlocking:function(e){return t(Ui(e))},setStyle:function(e){return t($i(e))}}};Pi.a.setAppElement("#root");var Yi=function(e){var t=e.children,n=Object(i.useReducer)(Ki,Di),a=Object(d.a)(n,1)[0],r=Object(i.useMemo)((function(){return Vi.apply(void 0,Object(m.a)(n))}),[n]);return c.a.createElement(Ni.Provider,{value:r},t,c.a.createElement(Pi.a,{parentSelector:function(){return document.querySelector("#content-root")},isOpen:a.isOpen,onRequestClose:function(){a.blocking||r.close()},style:{content:{backgroundColor:"#111",color:"white",width:400,margin:"0 auto",bottom:"unset",borderColor:"#555"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}},a.contents&&c.a.createElement(a.contents,null)))},Ji=function(e){var t=e.reset,n=_i().close,a=Object(i.useState)(),r=Object(d.a)(a,2),o=r[0],l=r[1],s=Object(i.useMemo)((function(){return[ht(),ht(),ht(),ht(),ht()]}),[]);return console.log(s),c.a.createElement(Dn,{$direction:"column"},c.a.createElement("h1",{style:{textAlign:"center",marginTop:0}},"Victory!"),c.a.createElement(Dn,{$direction:"column",style:{alignItems:"center"}},c.a.createElement("span",null,"Choose a Reward"),c.a.createElement(Dn,null,s.map((function(e){return c.a.createElement("div",{style:{border:"2px solid transparent",borderColor:o===e.id?"white":"transparent"}},c.a.createElement(Vr,{item:e,size:60,onClick:function(){return l(e.id)}}))})))),c.a.createElement(Dn,{style:{marginTop:20,alignItems:"center"}},c.a.createElement(Er,{disabled:void 0===o,onClick:function(){t(),n(s.find((function(e){return e.id===o})))}},"Next Battle")))},Xi=function(e){var t=e.wins,n=Object(s.f)(),a=_i().close;return c.a.createElement(Dn,{$direction:"column"},c.a.createElement("h1",{style:{textAlign:"center",marginTop:0}},"You Died..."),c.a.createElement("span",null,"But you won ",t," times."),c.a.createElement(Dn,null,c.a.createElement(Er,{onClick:function(){a(),n.push("/characters/")}},"Back to Characters")))},Qi={rounds:[],userParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawUserParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},enemyParty:{id:Object(y.a)(),characters:[],processed:!0,items:[],skills:[],mods:[]},rawEnemyParty:{id:Object(y.a)(),characters:[],items:[],skills:[],mods:[]},parties:[],running:!1,done:!1,characterSkills:{},characterTargets:{},setCharacterSkill:function(e,t){},setCharacterTarget:function(e,t){},next:function(){},start:function(){},stop:function(){},reset:function(){}},Zi=Object(i.createContext)(Qi),ec=function(){return Object(i.useContext)(Zi)},tc=function(e){var t=e.children,n=wn(),a=n.parties,r=n.rawParties,o=n.userParty,l=n.rawUserParty,g=n.upsertParty,h=n.upsertCharacter,p=n.upsertItem,b=Cn(),y=b.checkCharacter,v=b.rollCharacter,E=Ti(),w=E.addLine,O=E.clear,x=Object(i.useState)([]),k=Object(d.a)(x,2),j=k[0],C=k[1],S=Object(i.useState)(0),R=Object(d.a)(S,2),I=R[0],T=R[1],q=Object(i.useState)({}),M=Object(d.a)(q,2),P=M[0],D=M[1],B=Object(i.useState)({}),W=Object(d.a)(B,2),z=W[0],G=W[1],A=function(e,t){return D((function(n){return Object(f.a)({},n,Object(u.a)({},e,t))}))},H=function(e,t){return G((function(n){return Object(f.a)({},n,Object(u.a)({},e,t))}))},F=Object(i.useState)(!1),U=Object(d.a)(F,2),$=U[0],L=U[1],K=r.filter((function(e){return e.id===Si}))[0],N=a.filter((function(e){return e.id===Si}))[0],_=_i(),V=_.open,Y=_.setCallback,J=Object(s.f)(),X=function(){if(N&&o){var e=function(e,t,n,a){return function(r,i,c){var o=[].concat(Object(m.a)(r.characters),Object(m.a)(i.characters)),l={};return o.filter((function(e){return!e.dead})).sort((function(e,t){return t.stats.agility-e.stats.agility})).forEach((function(r,i){var o=c.find((function(e){return e.id===r.partyId})),s=c.find((function(e){return e.id!==r.partyId}));if(o&&s){var d=Se(s).characters.filter((function(e){return!e.dead})),m=d.find((function(e){return e.id===t[r.id]}))||Pe(d);m&&(l=Object(f.a)({},l,Object(u.a)({},r.name,Object(f.a)({},xi(e,n,a)(m,r),{index:i}))))}})),l}}(P,z,y,v)(o,N,r);C((function(t){return[].concat(Object(m.a)(t),[e])}))}},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(i.useState)(!1),a=Object(d.a)(n,2),r=a[0],c=a[1],o=Object(i.useRef)(),l=function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];void 0===o.current?(c(!0),o.current=setInterval((function(){return e.apply(void 0,a)}),t)):(clearInterval(o.current),o.current=setInterval((function(){return e.apply(void 0,a)}),t))},s=function(){void 0!==o.current&&(c(!1),clearInterval(o.current),o.current=void 0)};return{start:l,stop:s,running:r}}(X),Z=Q.start,ee=Q.stop,te=Q.running,ne=function(){O(),L(!1),C([]),g(gi(Si)),g(Object(f.a)({},l,{characters:l.characters.map((function(e){return Object(f.a)({},e,{traits:[],partyId:gn})}))}))};Object(i.useEffect)((function(){return g(gi(Si)),g(Object(f.a)({},l,{characters:l.characters.map((function(e){return Object(f.a)({},e,{partyId:gn})}))})),function(){ee(),ne(!1)}}),[]);var ae=function(e){ee(),L(!0),e?(V((function(){return c.a.createElement(Ji,{reset:ne})}),{},!0),Y((function(e){p(e)}))):V((function(){return c.a.createElement(Xi,{wins:I})}),{},!0)};return Object(i.useEffect)((function(){Ci(o)&&!$?(Y((function(){J.push("/characters")})),ae(!1)):Ci(N)&&!$?(Y((function(){})),ae(!0),T((function(e){return e+1}))):te&&Z()}),[o,N]),Object(i.useEffect)((function(){if(j.length>0){var e=ki(j,l,K,w,h);!function(e,t,n){e.forEach((function(e){var a=e.skills.find((function(n){return n.id===t[e.id]}))||Ft,r=e.stats.focus-e.focusOffset;a.focusCost>r&&n(e.id,Ft.id)}))}(e,P,A),function(e,t,n){e.forEach((function(a){var r=e.find((function(e){return e.id===t[a.id]}));r&&r.dead&&n(a.id,void 0)}))}(e,z,H)}}),[j]),c.a.createElement(Zi.Provider,{value:{rounds:j,userParty:o,rawUserParty:l,enemyParty:N,rawEnemyParty:K,parties:a,running:te,done:$,characterSkills:P,characterTargets:z,setCharacterSkill:A,setCharacterTarget:H,start:Z,stop:ee,reset:ne,next:X}},t)},nc=n(178),ac=n.n(nc),rc=function(e){var t=e.activeTargetId,n=e.onClick,a=ec().enemyParty,r=Tn(),i=function(e){return t===e},o=a?a.characters:[];return c.a.createElement(Dn,null,c.a.createElement(Er,{disabled:r.character.dead,onClick:function(){return!r.character.dead&&n(void 0)},style:{border:"none"},substyle:Object(f.a)({cursor:r.character.dead?"default":"pointer",background:r.character.dead?"#444":"#111",padding:0,height:36,width:36,boxSizing:"border-box",borderColor:"transparent",opacity:void 0===t?1:.5,margin:0},i(void 0)?{borderColor:"turquoise"}:{})},c.a.createElement("img",{alt:"random",src:ac.a,height:34,width:34,style:{height:34,width:34,boxSizing:"border-box",border:"1px solid black"}})),o.map((function(e){return c.a.createElement(ic,{key:e.id,name:e.name,onClick:function(){return n(e.id)},disabled:r.character.dead||e.dead,style:Object(f.a)({padding:0,height:36,width:36,boxSizing:"border-box",margin:0,borderColor:"transparent",opacity:r.character.dead||e.dead?.5:i(e.id)?1:.7},i(e.id)?{borderColor:"turquoise"}:{})})})),c.a.createElement(Dn,{$full:!0}))},ic=function(e){var t=e.name,n=e.disabled,a=e.style,r=e.onClick;return c.a.createElement(br,null,(function(e){var i=e.isHovering;return c.a.createElement($r.a,{isOpen:i,direction:"up",tagName:"div",padding:"0",arrow:!1,content:c.a.createElement(yr,null,t)},c.a.createElement(yr,{onClick:function(){return!n&&r()},disabled:n,substyle:Object(f.a)({borderColor:i?"#999":"#555",padding:"4px",cursor:n?"default":"pointer",background:n?"#444":"#111"},a),style:{border:"none"}},c.a.createElement("img",{alt:"profile",src:"https://picsum.photos/seed/".concat(t,"/60/60"),style:{height:34,width:34,boxSizing:"border-box",border:"1px solid black"}})))}))},cc=function(e){var t=e.showEdit,n=void 0!==t&&t,a=e.showInspect,r=void 0!==a&&a,o=e.showWeaponInspect,l=void 0!==o&&o,s=e.showSkills,u=void 0!==s&&s,m=Tn(),g=wn(),h=g.deleteCharacter,p=(g.userParty,ec()),b=p.characterSkills,y=p.setCharacterSkill,E=p.characterTargets,w=p.setCharacterTarget,O=m.rawCharacter,x=m.onChange,k=e.character||m.character,j=Object(i.useState)(!1),C=Object(d.a)(j,2),S=C[0],R=C[1],I=Object(i.useState)(!1),T=Object(d.a)(I,2),q=T[0],M=T[1],P=Object(i.useState)(!1),D=Object(d.a)(P,2),B=D[0],W=D[1],z=Object(i.useState)(k.name),G=Object(d.a)(z,2),A=G[0],H=G[1],F=v(k.stats.health-k.healthOffset),U=v(k.stats.focus-k.focusOffset);return Object(i.useEffect)((function(){H(k.name)}),[k.name]),c.a.createElement(yr,{style:{width:454,transition:"all 1s",border:"2px solid black"},substyle:{padding:0}},c.a.createElement(Dn,{$direction:"column"},c.a.createElement(Dn,{style:{padding:4,background:"linear-gradient(0deg, rgba(34,34,34,1) 0%, rgba(51,51,51,1) 100%)"}},c.a.createElement(Dn,{$full:!0},c.a.createElement(yr,{style:{marginRight:10,height:64,width:64},substyle:{padding:0,backgroundColor:"#111",border:"none"}},k.dead?c.a.createElement(Dn,{style:{justifyContent:"center",alignItems:"center",height:60}},c.a.createElement(fr,{src:ti.a,size:48})):c.a.createElement("img",{alt:"profile",src:"https://picsum.photos/seed/".concat(k.name,"/60/60"),style:{height:60,width:60,border:"1px solid rgba(255,255,255,0.5)"}})),B?c.a.createElement("div",null,c.a.createElement("input",{value:A,onChange:function(e){return H(e.target.value)}})):c.a.createElement(Dn,{$direction:"column"},c.a.createElement("h2",{style:{margin:0,textShadow:"1px 1px 1px black",fontSize:18}},k.name),c.a.createElement(Bn,null),c.a.createElement("strong",{style:{fontFamily:"monospace",fontSize:10,color:"rgba(255,255,255,0.24)"}},k.abilities.strength," ",k.abilities.dexterity," ",k.abilities.intelligence," ",k.abilities.vigor),c.a.createElement("strong",{style:{fontFamily:"monospace",fontSize:10,color:"rgba(255,255,255,0.24)"}},k.stats.will," ",k.stats.perception," ",k.stats.agility," ",k.stats.accuracy," ",k.stats.evade))),l&&c.a.createElement($r.a,{isOpen:S,direction:"right",tagName:"div",padding:"0",arrow:!1,content:c.a.createElement(_r,{weapon:k.weapon})},c.a.createElement(vr,{onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)}},c.a.createElement(fr,{src:zn.a,size:18}))),r&&c.a.createElement($r.a,{isOpen:q,direction:"right",tagName:"div",padding:"0",arrow:!1,content:c.a.createElement(Zr,null)},c.a.createElement(vr,{onMouseEnter:function(){return M(!0)},onMouseLeave:function(){return M(!1)}},c.a.createElement(fr,{src:Xr.a,size:18}))),n&&!B&&c.a.createElement(Er,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){return W((function(e){return!e}))}},c.a.createElement(fr,{src:ai.a,size:18})),B&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Er,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){x(Object(f.a)({},O,{name:A})),W((function(e){return!e}))}},c.a.createElement(fr,{src:ii.a,size:18})),c.a.createElement(Er,{style:{height:42,width:42,margin:0},substyle:{padding:0,display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(){h(k.id)}},c.a.createElement(fr,{src:oi.a,size:18})))),u&&c.a.createElement(Dn,{$direction:"column",style:{backgroundColor:"#1a1a1a",boxShadow:"inset 0px 0px 15px black",width:"calc(100% - 16px)",padding:"4px 8px",borderTop:"1px solid #555"}},c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"SKILLS"),c.a.createElement(si,{activeSkillId:b[k.id],skills:k.skills,onClick:function(e){return y(k.id,e)}}),c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2,marginTop:4}},"TARGETS"),c.a.createElement(rc,{activeTargetId:E[k.id],onClick:function(e){return w(k.id,e)}})),c.a.createElement(Qr,{name:"Health",color:"#8f4e4d",max:k.stats.health,value:F,height:15},F,"/",k.stats.health),c.a.createElement(Qr,{name:"Focus",color:"#517e4e",max:k.stats.focus,value:U,height:15},U,"/",k.stats.focus)))},oc={logKey:void 0,sidebarKey:void 0,setLogKey:function(){},setSidebarKey:function(){}},lc=c.a.createContext(oc),sc=function(){return Object(i.useContext)(lc)},dc=function(e){var t=e.children,n=Object(i.useState)(),a=Object(d.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(),s=Object(d.a)(l,2),u=s[0],f=s[1];return c.a.createElement(lc.Provider,{value:{logKey:r,sidebarKey:u,setLogKey:o,setSidebarKey:f}},t)},uc=function(e){var t=e.skill;return c.a.createElement(yr,{style:{height:64,width:64},substyle:{padding:0}},c.a.createElement(br,null,(function(e){var n=e.isHovering;return c.a.createElement($r.a,{isOpen:n,direction:"down",tagName:"div",padding:"0",arrow:!1,content:c.a.createElement(li,{skillId:t.id,skill:t})},c.a.createElement("img",{src:t.imgSrc,height:60,width:60}))})))},fc=function(){var e=Object(s.h)().id,t=Object(s.f)(),n=wn(),a=n.rawUserParty,r=n.setActiveCharacterId,o=sc(),l=o.setLogKey,d=(o.setSidebarKey,Object(i.useMemo)((function(){return a.characters.find((function(t){return t.id===e}))}),[e,a]));return Object(i.useEffect)((function(){d?r(d.id):t.push("/characters/".concat(a.characters[0].id))}),[e]),Object(i.useEffect)((function(){return l("items"),function(){l(void 0),r(null)}}),[]),d?c.a.createElement(Mn,null,c.a.createElement(Rn,null,c.a.createElement(Dn,{style:{margin:10,flex:1}},c.a.createElement(Dn,{$direction:"column",style:{marginRight:10}},c.a.createElement(cc,{showEdit:!0}),c.a.createElement(Dn,null,c.a.createElement("div",null,c.a.createElement(wr,{id:"characterPoints"}),c.a.createElement(wr,{id:"weaponHands"}),c.a.createElement(wr,{id:"heads"}),c.a.createElement(wr,{id:"bodies"}),c.a.createElement(wr,{id:"hands"}),c.a.createElement(wr,{id:"fingers"}),c.a.createElement(wr,{id:"feet"})),c.a.createElement("div",null,c.a.createElement(Or,{id:"strength"}),c.a.createElement(Or,{id:"dexterity"}),c.a.createElement(Or,{id:"intelligence"}),c.a.createElement(Or,{id:"vigor"})),c.a.createElement("div",null,c.a.createElement(kr,{id:"health"}),c.a.createElement(kr,{id:"focus"}),c.a.createElement(kr,{id:"will"}),c.a.createElement(kr,{id:"perception"}),c.a.createElement(kr,{id:"agility"}),c.a.createElement(kr,{id:"accuracy"}),c.a.createElement(kr,{id:"evade"})),c.a.createElement("div",null,c.a.createElement(jr,{id:"slashing"}),c.a.createElement(jr,{id:"piercing"}),c.a.createElement(jr,{id:"fire"}),c.a.createElement(jr,{id:"blood"}),c.a.createElement(jr,{id:"light"}),c.a.createElement(jr,{id:"dark"})))),c.a.createElement(Dn,null,c.a.createElement("div",null,c.a.createElement(_r,{showEquipButton:!0,showRequirement:!1}),d.equippedItems.map((function(e){return c.a.createElement(Hr,{key:e.id,item:e,showRequirementCheck:!1,showCollapseButton:!1})})),c.a.createElement(yr,{substyle:{width:320}},c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"SKILLS"),c.a.createElement(Dn,{style:{flexWrap:"wrap"}},d.skills.filter((function(e){return e.id!==Ft.id&&e.id!==Ut.id})).map((function(e){return c.a.createElement("div",{style:{padding:3.5}},c.a.createElement(uc,{key:e.id,skill:e}))}))))),c.a.createElement(Yr,null))))):null},mc=function(e){var t=e.roll,n=t,a=void 0!==n.goal,r=a?n.result:void 0;return c.a.createElement("div",{style:{fontFamily:"monospace"}},a&&r&&hi("lightgreen","[PASSED] "),a&&!r&&hi("lightcoral","[FAILED] "),!a&&hi("turquoise","[STATIC] "),a&&c.a.createElement("span",null,"(",n.goal,") "),c.a.createElement("span",null,t.output))},gc=n(179),hc=n.n(gc),pc=n(180),bc=n.n(pc),yc=n(181),vc=n.n(yc),Ec=n(182),wc=n.n(Ec),Oc=c.a.createContext({a:null,b:null,compareChecks:function(e,t){return Rr},compareRolls:function(e,t){return Rr},compareValues:function(e,t){return Rr}});function xc(){return Object(i.useContext)(Oc)}function kc(e){var t=e.a,n=e.b,a=e.children,r=Cn(),i=r.execRoll,o=r.getProbability;return c.a.createElement(Oc.Provider,{value:{a:t,b:n,compareChecks:function(e,t){var n=o(e),a=o(t);return qr(n,a)},compareRolls:function(e,t){var n=i(e,!1).averageTotal,a=i(t,!1).averageTotal;return qr(n,a<0?0:a)},compareValues:function(e,t){return qr(e,t)}}},a)}var jc=function(e){var t=e.weapon,n=Tn().character;return c.a.createElement(kc,{a:t,b:n.weapon},c.a.createElement(Cc,null))},Cc=function(e){var t=xc(),n=t.compareChecks,a=t.compareRolls,r=t.compareValues,i=t.a||re,o=t.b||re,l=n(i.requirementCheck,o.requirementCheck),s=n(i.accuracyCheck,o.accuracyCheck),d=r(o.cost,i.cost);return c.a.createElement(_r,{weapon:i,showEquipButton:!1,requirementCompare:l,accuracyCompare:s,damageCompare:function(e){var t=i.damageRolls[e],n=o.damageRolls[e];return n?a(t,n):Ir},traitCompare:function(e){var t=xe(ke(i.traits),e),n=xe(ke(o.traits),e);return r(t,n)},costComare:d})},Sc=function(e){var t=e.item,n=Tn().character;if("ring"===t.armorType)return c.a.createElement(Hr,{item:t,showEquipButton:!1,showRequirementCheck:!0,showCollapseButton:!1});var a=[].concat(Object(m.a)(n.armor),Object(m.a)(n.equippedItems)).find((function(e){return"armor"===t.type?"armor"===e.type&&e.resource===t.resource:"armor"!==e.type&&e.resource===t.resource}));return c.a.createElement(kc,{a:t,b:a||ne("armor")},c.a.createElement(Rc,null))},Rc=function(e){var t=xc(),n=t.compareChecks,a=t.compareRolls,r=t.compareValues,i=t.a||ne("armor"),o=t.b||ne("armor"),l=n(i.requirementCheck,o.requirementCheck),s=r(o.cost,i.cost);return c.a.createElement(Hr,{item:i,showEquipButton:!1,requirementCompare:l,resistancesCompare:function(e){var t=i.damageResistances[e],n=o.damageResistances[e];return n?a(t,n):Ir},traitCompare:function(e){var t=xe(ke(i.traits),e),n=xe(ke(o.traits),e);return r(t,n)},costComare:s})},Ic=function(e){var t=e.onClick;return c.a.createElement(Dn,null,c.a.createElement(Tc,{rarity:"common",onClick:t}),c.a.createElement(Tc,{rarity:"uncommon",onClick:t}),c.a.createElement(Tc,{rarity:"rare",onClick:t}),c.a.createElement(Tc,{rarity:"legendary",onClick:t}),c.a.createElement(Tc,{rarity:"unique",onClick:t}),c.a.createElement(Tc,{rarity:"mythic",onClick:t}),c.a.createElement(Tc,{rarity:"set",onClick:t}),c.a.createElement(Tc,{type:"weapon",onClick:t},"W"),c.a.createElement(Tc,{type:"armor",onClick:t},"A"),c.a.createElement(Tc,{onClick:t},"R"))},Tc=function(e){var t=e.rarity,n=e.type,a=e.children,r=e.onClick,i=t?Sr()(Gr[t]).fade(.75).hsl().toString():"#222",o=t?Sr()(Gr[t]).fade(.5).hsl().toString():"#555";return c.a.createElement(yr,{tag:"button",style:{width:40,height:40},substyle:{background:i,cursor:"pointer",borderColor:o,boxShadow:"inset 0 0 3px black",display:"flex",padding:0,justifyContent:"center",alignItems:"center",margin:0},onClick:function(){return r(t,n)}},a)},qc=function(e){var t=e.item,n=e.rawCharacter,a=e.onEquip,r=Object(i.useState)(!1),o=Object(d.a)(r,2),l=o[0],s=o[1],u=t.type,f=t.equippable,m="armor"===u,g="weapon"===u,h=Object(i.useMemo)((function(){return he(n)(t,!g)}),[t,n,g]),p=Gr[t.rarity],b=Object(i.useMemo)((function(){return g?c.a.createElement(Lr,{weapon:t,size:18,fill:p}):m?c.a.createElement(zr,{item:t,size:18,fill:p}):f?c.a.createElement(Ar,{item:t,size:18,fill:p}):void 0}),[t,m,f,g,p]);return c.a.createElement("div",{onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},c.a.createElement($r.a,{isOpen:l,direction:"bottom",tagName:"div",padding:"0",arrow:!1,content:g?c.a.createElement(jc,{weapon:t}):f?c.a.createElement(Sc,{item:t}):"item"},c.a.createElement(yr,{style:{width:40,height:40,background:h?"#222":"#333",boxShadow:"inset 0 0 ".concat(h?"12px":"3px"," ").concat("common"!==t.rarity&&h?Sr()(p).fade(.5).hsl().toString():"black")},substyle:{background:"transparent",cursor:h?"pointer":"default",borderColor:l?p:"common"===t.rarity?"#555":Sr()(p).fade(.5).hsl().toString(),boxShadow:h?"inset 0 0 3px black":"none",display:"flex",padding:0,justifyContent:"center",alignItems:"center",margin:0,opacity:h?1:.5},onClick:function(e){e.preventDefault(),e.stopPropagation(),f&&a(t.id)}},b)))},Mc=function(e){var t=e.activeKey,n=e.setActiveKey,a=e.options,r=e.direction,o=void 0===r?"right":r,l=Object(i.useMemo)((function(){return a.find((function(e){return e.key===t}))}),[t]);return c.a.createElement(yr,{substyle:{display:"flex",flexDirection:"right"===o?"row":"row-reverse",padding:0}},c.a.createElement(Dn,{$direction:"column",style:{width:60}},a.map((function(e,a){return c.a.createElement("div",{key:e.key,style:{height:60,width:60,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxSizing:"border-box",backgroundColor:t===e.key?"#111":"transparent",borderTop:0===a?"none":"1px solid #555",borderBottom:"1px solid black",borderRight:"right"===o&&t&&t!==e.key?"1px solid #555":"none",borderLeft:"left"===o&&t&&t!==e.key?"1px solid #555":"none"},onClick:function(a){a.preventDefault(),a.stopPropagation(),n(t===e.key?void 0:e.key)}},c.a.createElement(fr,{src:e.icon,size:24}))})),c.a.createElement(Dn,{$full:!0,style:{borderTop:"1px solid #555",borderRight:"right"===o&&void 0!==t?"1px solid #555":"none",borderLeft:"left"===o&&void 0!==t?"1px solid #555":"none"}})),l&&c.a.createElement("div",{style:{padding:8,backgroundColor:"#111",overflow:"auto"}},c.a.createElement(l.Component,null)))},Pc=n(183),Dc=n.n(Pc),Bc=function(e){var t=e.mod,n=(Tn().character,Z.apply(void 0,Object(m.a)(t.traits))),a=ke(n.traits);return c.a.createElement(yr,null,c.a.createElement(Dn,null,c.a.createElement(fr,{src:Dc.a,size:24}),c.a.createElement("span",{style:{margin:"0 10px",flex:1,fontWeight:"bold"}},t.name),c.a.createElement(Er,null,"equip")),c.a.createElement("div",{style:{marginBottom:10}},c.a.createElement(Mr,{trait:a})),c.a.createElement(Kr,{parent:n},(function(e,t){return e.map((function(e){return c.a.createElement(Nr,{key:e.id,id:e.id,damageRangeText:e.damageRangeText,damageRollText:e.damageRollText})}))})))},Wc=[{key:"roll-log",icon:Br.a,Component:function(e){var t=Cn(),n=t.history,a=t.execRoll,r=Object(i.useState)(""),o=Object(d.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)([]),f=Object(d.a)(u,2),g=f[0],h=f[1],p=Object(i.useState)(0),b=Object(d.a)(p,2),y=b[0],v=b[1],E=function(){try{a({string:l,keys:[],modifier:0},!0,!0),h([].concat(Object(m.a)(g),[l])),v(g.length)}catch(e){alert(e)}finally{s("")}};return c.a.createElement(Dn,{$direction:"column",$full:!0,style:{width:400}},n.length>0?c.a.createElement(Dn,{$full:!0,$direction:"column",style:{overflow:"auto",padding:10}},n.map((function(e){return c.a.createElement(c.a.Fragment,{key:e.id},c.a.createElement(mc,{key:e.id,roll:e}))}))):c.a.createElement(Dn,{$full:!0}),c.a.createElement(Dn,null,c.a.createElement("input",{value:l,style:{flex:1},onChange:function(e){return s(e.target.value)},onKeyDown:function(e){13===e.keyCode&&E(),38===e.keyCode&&(s(g[y]||""),v(y-1))}}),c.a.createElement("button",{onClick:E},c.a.createElement(fr,{src:Br.a,size:18,fill:"#4bebc6"}))))}},{key:"attack-log",icon:hc.a,Component:function(){var e=Ti(),t=e.lines,n=e.clear,a=Object(i.useRef)(null);return Object(i.useEffect)((function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})}),[t]),c.a.createElement(Dn,{$direction:"column",$full:!0,style:{overflow:"auto",padding:10,overflowY:"auto"}},c.a.createElement("button",{onClick:n,style:{marginBottom:20}},"Clear Log"),c.a.createElement(Dn,{$direction:"column",$full:!0,style:{color:"rgba(200,200,200, 1)",background:"#111",width:380,overflowX:"auto"}},t.map((function(e,t){return c.a.createElement("pre",{key:t},e)})),c.a.createElement("div",{ref:a})))}},{key:"items",icon:bc.a,Component:function(){var e=Tn().rawCharacter,t=wn(),n=t.userParty,a=t.equipItem,r=Object(i.useState)(),o=Object(d.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)(),f=Object(d.a)(u,2),m=f[0],g=f[1],h=function(e){return l?e.type===l:!m||e.rarity===m},p=n.items.filter((function(e){return"armor"!==e.type&&"weapon"!==e.type})).filter(h),b=n.items.filter((function(e){return"weapon"===e.type})).filter(h),y=n.items.filter((function(e){return"armor"===e.type})).filter(h);return c.a.createElement(Dn,{style:{},$direction:"column"},c.a.createElement(Ic,{onClick:function(e,t){e&&g(e),t&&s(t),e||t||(g(void 0),s(void 0))}}),c.a.createElement("div",{style:{marginTop:10}},b.length>0&&c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"WEAPONS"),c.a.createElement(Dn,{style:{flexWrap:"wrap",width:400}},b.map((function(t){return c.a.createElement(qc,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})}))),y.length>0&&c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"ARMOR"),c.a.createElement(Dn,{style:{flexWrap:"wrap",width:400}},y.map((function(t){return c.a.createElement(qc,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})}))),p.length>0&&c.a.createElement("span",{style:{fontFamily:"monospace",fontWeight:"bold",color:"rgba(255,255,255,0.24)",marginBottom:2}},"OTHER"),c.a.createElement(Dn,{style:{flexWrap:"wrap",width:400}},p.map((function(t){return c.a.createElement(qc,{key:t.id,item:t,rawCharacter:e,onEquip:function(t){return a(e.id,t)}})})))))}},{key:"skills",icon:vc.a,Component:function(){var e=wn().userParty;return c.a.createElement(Dn,{style:{width:320,flexWrap:"wrap"}},e.skills.map((function(e){return c.a.createElement(uc,{skill:e})})))}},{key:"mods",icon:wc.a,Component:function(){var e=wn().userParty;return c.a.createElement(Dn,{$direction:"column"},e.mods.map((function(e){return c.a.createElement(Bc,{key:e.id,mod:e})})))}}],zc=function(e){var t=sc(),n=t.logKey,a=t.setLogKey;return c.a.createElement(Mc,{activeKey:n,setActiveKey:a,options:Wc,direction:"left"})},Gc=function(e,t){return c.a.createElement(s.a,{path:e},c.a.createElement(t,null))},Ac=n(184),Hc=n.n(Ac),Fc=n(25),Uc=[{key:"characters",icon:Hc.a,Component:function(){return c.a.createElement(Lc,null)}}],$c=function(e){var t=sc(),n=t.sidebarKey,a=t.setSidebarKey;return c.a.createElement(Mc,{options:Uc,direction:"right",activeKey:n,setActiveKey:a})},Lc=function(){var e=wn(),t=e.userParty,n=e.upsertCharacter,a=Object(s.f)();return c.a.createElement(Dn,{$direction:"column"},t.characters.map((function(e){return c.a.createElement(Fc.b,{key:e.id,to:"/characters/".concat(e.id),style:{padding:8}},e.name)})),t.characters.length<4&&c.a.createElement(Er,{onClick:function(){var e=Zt("new character");n(e),a.push("/characters/".concat(e.id))}},"Add New Character"))},Kc=function(e){var t=e.party,n=wn().upsertCharacter,a=ec(),r=a.userParty,i=a.enemyParty,o=a.characterSkills,l=(a.setCharacterSkill,a.characterTargets);a.setCharacterTarget;if(!t||!r||!i)return c.a.createElement("div",null,"Loading...");var s=[].concat(Object(m.a)(r.characters),Object(m.a)(i.characters));return c.a.createElement("div",null,t.characters.map((function(e){return c.a.createElement(qn,{key:e.id,character:e,onChange:function(e){return n(e,t.id)}},c.a.createElement(Dn,{style:{position:"relative",opacity:se(e).dead?.5:1}},c.a.createElement(Dn,{$direction:"column",$full:!0,style:{marginBottom:10}},c.a.createElement(cc,{showInspect:e.inspected||e.partyId===gn||se(e).dead,showWeaponInspect:e.inspected||e.partyId===gn||se(e).dead,showSkills:t.id===gn})),e.partyId===gn&&c.a.createElement(Dn,{$direction:"column",style:{fontFamily:"monospace",width:80}},c.a.createElement(Bn,null),c.a.createElement(Nc,{skillId:o[e.id],targetId:l[e.id],characters:s}),c.a.createElement(Bn,null))))})))},Nc=function(e){var t=e.skillId,n=e.targetId,a=e.characters,r=Tn().character,i=r.skills.find((function(e){return e.id===t}))||Ft,o=a.find((function(e){return e.id===n}));if(!o&&i.target)return null;var l=function(e,t,n){if(n){var a=0,r=0,i=Oi(e,t.weapon),c=K((function(e){return A(e,t)}))(i,!1).rollResults,o=n.damageResistances;return L(c).filter((function(e){return c[e]})).forEach((function(e){var n=c[e],i=o[e],l=A(i,t,!0);a+=v(n.minTotal-l.maxTotal),r+=v(n.maxTotal-l.minTotal)})),a===r?"".concat(r):"".concat(a,"-").concat(r)}}(i,r,o),s=j(G(i.combineWeaponDamage?r.weapon.accuracyCheck:i.check||Object(f.a)({},T,{keys:[]}),r)),d=i.target&&o?j(G(M(["evade"]),o)):0;return c.a.createElement(yr,{style:{textAlign:"center",fontWeight:"bold",borderLeft:"none"},substyle:{borderLeft:"none",background:"#111"}},l&&"0"!==l&&c.a.createElement("div",{style:{marginBottom:5}},"(",l,")"),c.a.createElement("div",{style:{fontSize:20}},Math.floor(s-d),"%"))},_c=n(185),Vc=n.n(_c),Yc=function(){var e=ec(),t=e.rawUserParty,n=e.rawEnemyParty,a=(e.running,e.done),r=e.rounds,o=(e.start,e.stop,e.reset),l=e.next,s=sc().setLogKey;return Object(i.useEffect)((function(){return s("attack-log"),function(){s(void 0)}}),[]),c.a.createElement(Dn,{$full:!0,$direction:"column",style:{background:"url(".concat(Vc.a,") center center"),backgroundSize:"cover"}},c.a.createElement(yr,null,c.a.createElement(Dn,{style:{alignItems:"center"}},c.a.createElement("div",null,a&&c.a.createElement("button",{onClick:function(){return o()}},"Reset"),!a&&c.a.createElement("button",{onClick:function(){return l()}},"Next")),c.a.createElement(Bn,null),c.a.createElement(Dn,null,"Round ",r.length+1))),c.a.createElement(Dn,{id:"Combat",$full:!0,style:{padding:10}},c.a.createElement(Kc,{party:t}),c.a.createElement(Dn,{$full:!0,$direction:"column"}),c.a.createElement(Kc,{party:n})))},Jc={background:"#111",boxShadow:"inset 0 0 3px black"},Xc={backgroundColor:"#333"},Qc=function(){var e,t=Object(s.g)().pathname.split("/");return c.a.createElement(yr,{substyle:{height:64,padding:0,alignItems:"center",display:"flex"}},c.a.createElement("div",{style:{fontFamily:"monospace",fontSize:24,margin:"0 30px"}},"rpgjs"),c.a.createElement(yr,{tag:Fc.b,to:"/battle",style:{height:"100%"},substyle:Object(f.a)({padding:"0 20px",display:"flex",justifyContent:"center",alignItems:"center"},(e=["battle"],e.includes(t[1])?Jc:Xc))},"battle"))},Zc=function(){return c.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex"}},c.a.createElement(dc,null,c.a.createElement(Yi,null,c.a.createElement(En,null,c.a.createElement(Mn,null,c.a.createElement(qi,null,c.a.createElement(Dn,{$full:!0,$direction:"column",id:"content-root"},c.a.createElement(Qc,null),c.a.createElement(Dn,{$full:!0,style:{height:"calc(100% - 70px)",width:"100vw",overflow:"auto"}},c.a.createElement($c,null),c.a.createElement(Dn,{$full:!0,style:{overflow:"auto"}},c.a.createElement(s.c,null,Gc("/battle",(function(){return c.a.createElement(tc,null,c.a.createElement(Yc,null))})),Gc("/characters/:id",(function(){return c.a.createElement(fc,null)})),Gc("/",(function(){return c.a.createElement(fc,null)})))),c.a.createElement(zc,null)))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(303);var eo=n(188),to=n(186),no=new eo.a,ao=Object(Te.e)(Object(Te.c)({rolls:kn,parties:pn}),Object(Te.d)(Object(Te.a)(to.a)));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ie.a,{store:ao},c.a.createElement(Pn.a,{value:no,debug:void 0,debugAfterHydration:!0},c.a.createElement(Fc.a,null,c.a.createElement(Zc,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[190,1,2]]]);
//# sourceMappingURL=main.aa6054c8.chunk.js.map